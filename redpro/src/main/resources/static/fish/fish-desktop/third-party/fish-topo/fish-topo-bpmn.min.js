!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.fishTopoBpmn=e():t.fishTopoBpmn=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){t.exports=i(2)},function(t,e,i){function n(t,e){this.id,this.group,this._dom=t,this._zr=h.init(t,{renderer:e.renderer||"canvas",devicePixelRatio:e.devicePixelRatio}),this.deleteKeycode=46,this.allNodes=[],this.subProcessNode=[],this.domArray=[],this.overlapArray=[],this.selectedNode=null,this.isNode=!1,this.rect,this.operationNode,this.opts=e,this._api=new o(this),this.forbidEdit=!1,this.model=new d({}),this.model.set(x.RESOURCE_ID,u.getUUID()),this.model.set(x.BPMN_TYPE,x.TEMPLATE),a.call(this),c.registerBPMNNode()}var r=i(3),o=i(56),s=i(57),a=i(12),h=i(58),l=i(4),c=i(68),u=i(69),d=i(74),f=i(71),p=i(97),g=i(99),v=i(92),y=i(102),m=i(103),x=i(96),_=n.prototype;_.getDom=function(){return this._dom},_.getZr=function(){return this._zr},_.getWidth=function(){return this._zr.getWidth()},_.getHeight=function(){return this._zr.getHeight()},_.isDisposed=function(){return this._disposed},_.dispose=function(){this._disposed=!0,this._zr.dispose(),b[this.id]=null},_.resize=function(t,e){$(this.getDom()).css("width",t),$(this.getDom()).css("height",e),this._zr.resize(),this._zr.remove(this.group),this.group=new r.Group,this.gridLine(.2),this._zr.add(this.group)},_.init=function(){var t=this;this.group=new r.Group,1!=this.opts.showGridLine&&"true"!=opts.showGridLine||(this.gridLine(.2),this._zr.add(this.group)),this._zr.on("mouseup",function(e){t.operationNode&&(t._zr.remove(t.operationNode),t.operationNode=null);var i=e.target;i&&i.connector instanceof v||(g.clearSelectCon(),i&&i.operation&&1==i.operation||y.hideAllLineOperation())}),this._zr.on("click",function(e){var i=e.target;if(!(i&&i.parent&&i.parent.resourceId)){var n={};n.event=e,n.type="click",n.target=t,t._api.trigger(n.type,n)}}),this.on("conPointsGroup:click",function(t){y.bindOperation(t.lineNode)})},_.setShapeModel=function(t,e,i,n){x.isTemplate(t.model)?(this.model.mergeOption(e),i>0&&n>0&&this.resize(i,n)):x.isFlow(t.model)?(g.setModel(t,e),y.hideAllLineOperation()):t.setModel(e)},_.clear=function(){this.allNodes=[],this.subProcessNode=[],this.domArray=[],this.overlapArray=[],this.selectedNode=null,this.rect=null,g.connectors=[],this._zr.clear(),this._zr.add(this.group)},_.forbidGridLine=function(t){1==t?this._zr.remove(this.group):(this._zr.remove(this.group),this.group=new r.Group,this.gridLine(.2),this._zr.add(this.group))},_.exportJson=function(){return c.exportJson(this.model,this.allNodes,g.connectors)},_.drawFromJson=function(t){return c.fromJson(this,t)},_.gridLine=function(t){for(var e=this.opts.gridLineSpacing,i=parseInt(this.getWidth()/e),n=0;n<=i;n++){var o=new r.Line({shape:{x1:n*e,y1:0,x2:n*e,y2:this.getHeight()},style:{lineDash:[1],opacity:t},z:-1,draggable:!1,cursor:"default"});this.group.add(o)}for(var s=parseInt(this.getHeight()/e,e),a=0;a<=s;a++){var o=new r.Line({shape:{x1:0,y1:a*e,x2:this.getWidth(),y2:a*e},style:{lineDash:[1],opacity:t},z:-1,draggable:!1,cursor:"default"});this.group.add(o)}},_.addNode=function(t,e,i){if(e>=0&&i>=0){var n=new d({});n.set(x.BPMN_TYPE,t),n.set("bounds.upperLeft",{x:e,y:i}),this.addNodeByModel(n,!0)}},_.addNodeByModel=function(t,e){var i,n=this,r=f.getClass(x.getType(t));if(r){if(node=new r(t,this._api),0==this.subProcessNode.length)this._zr.add(node),i={id:node.id,position:[node.getRect().x,node.getRect().y],width:node.getRect().width,height:node.getRect().height},x.isSlotEvent(node.model)||this.overlapArray.push(i);else if(this._zr.add(node),i={id:node.id,position:[node.getRect().x,node.getRect().y],width:node.getRect().width,height:node.getRect().height},x.isSlotEvent(node.model)||this.overlapArray.push(i),e)for(var o=0;o<this.subProcessNode.length;o++)if(this.subProcessNode[o].rectContain(node.getRect().x,node.getRect().y)){var s=this.subProcessNode[o].getRect().width/2+(node.getRect().x-this.subProcessNode[o].getRect().x),a=this.subProcessNode[o].getRect().height/2+(node.getRect().y-this.subProcessNode[o].getRect().y);node.reDraw(s,a),this.subProcessNode[o].add(node),this._zr.remove(node);for(var o=0;o<n.overlapArray.length;o++)node.id==n.overlapArray[o].id&&n.overlapArray.splice(o,1);break}return x.isSubProcess(node.model)&&this.subProcessNode.push(node),this.allNodes.push(node),this.domArray.push(i),node.on("mousedown",function(t){1!=n.forbidEdit&&(n.newDrag(this,t.event.clientX,t.event.clientY),x.isSlotEvent(this.model)&&n.bindEventNode(this),t.cancelBubble=!0)}),node.on("click",function(t){1!=n.forbidEdit&&(n.nodeMouseDown(this,t.event.clientX,t.event.clientY),t.cancelBubble=!0)}),n.creatTip(node),node.on("mouseover",function(){1==this.alarm.isShow&&this.alarm.show()}),node.on("mouseout",function(){this.alarm.hide()}),node}},_.addConnectorByModel=function(t,e){var i=null,n=null;if(l.each(this.allNodes,function(e){var r=e.model.get("outgoing");r.indexOf(t.get("resourceId"))!==-1&&(i=e);var o=t.get("outgoing");o.indexOf(e.resourceId)!==-1&&(n=e)}),i&&n){var r=g.connectorCreateByOptions(i,n,{model:t},this._api);e?e.add(r):this._zr.add(r)}},_.addIcon=function(t,e){y.addIcon(t,e,this._zr)},_.bindLineDelete=function(t){var e,i=this;e=t.parent?t.parent:i._zr,y.addIcon("delete",y.deleteIconObj(e,t),e)},_.checkLineNode=function(t){for(var e=[],i=[],n=g.connectors,r=0,o=n.length;r<o;r++)n[r].startNode==t&&i.push(n[r].endNode);for(var s=0,o=n.length;s<o;s++)n[s].endNode==t&&e.push(n[s].startNode);var a=[e,i];return a},_.initOperationNode=function(t){var e=this;this.operationNode=new p(t,e._zr),this.operationNode.on(p.ARROW_DRAGSTART,function(t){var i=t.event.offsetX,n=t.event.offsetY;t.event.target.hide();var r=new s(i,n);if(e.selectedNode.parent&&x.isSubProcess(e.selectedNode.parent.model)){var o=e.selectedNode.parent;r=new s(i-o.position[0],n-o.position[1])}var a=g.manageTempConnector(e.selectedNode,r,v.TYPE_STRAIGHT);e.selectedNode.parent&&x.isSubProcess(e.selectedNode.parent.model)?e.selectedNode.parent.add(a):e._zr.add(a)}),this.operationNode.on(p.ARROW_DRAG,function(t){var i=t.event.offsetX,n=t.event.offsetY,r=new s(i,n);if(e.selectedNode.parent&&x.isSubProcess(e.selectedNode.parent.model)){var o=e.selectedNode.parent;r=new s(i-o.position[0],n-o.position[1])}g.manageTempConnector(e.selectedNode,r,v.TYPE_STRAIGHT)}),this.operationNode.on(p.ARROW_DRAGEND,function(i){var n=i.event.offsetX,r=i.event.offsetY,o=null;if(i.event.target.show(),t.parent?x.isSubProcess(t.parent.model)&&(g.removeTempConnector(t.parent),o=c.findHover(e.allNodes,n,r,e.subProcessNode)):(o=c.findHover(e.allNodes,n,r),g.removeTempConnector(e._zr)),o&&e.selectedNode!=o){var s=g.connectorCreate(e.selectedNode,o,v.TYPE_JAGGED,e._api);o.parent&&e.selectedNode.parent&&o.parent.add(s),o.parent||e.selectedNode.parent||e._zr.add(s),s.on("mousedown",function(t){g.connectorForbidEdit(e.forbidEdit),y.isEdit=!e.forbidEdit,e.isNode=!1})}var a=e.selectedNode.getRect();e.operationNode.render(t,e._zr,a)}),this.operationNode.on("OperationNode:deleteClick",function(i){var n;n=e.selectedNode.parent?e.selectedNode.parent:e._zr,n.remove(e.selectedNode);for(var r=0;r<e.allNodes.length;r++)e.selectedNode.id==e.allNodes[r].id&&e.allNodes.splice(r,1);for(var o=0;o<e.domArray.length;o++)e.selectedNode.id==e.domArray[o].id&&e.domArray.splice(o,1);for(var r=0;r<e.overlapArray.length;r++)e.selectedNode.id==e.overlapArray[r].id&&e.overlapArray.splice(r,1);if(g.deleteSelectCon(e.selectedNode,n),(x.isActivity(e.selectedNode.model)||x.isSubProcess(e.selectedNode.model))&&e.selectedNode.slotEvent&&e.selectedNode.slotEvent.length>0)for(var s=0;s<e.selectedNode.slotEvent.length;s++){e.selectedNode.slotEvent[s].parent?x.isSubProcess(e.selectedNode.slotEvent[s].parent.model)&&e.selectedNode.slotEvent[s].parent.remove(e.selectedNode.slotEvent[s]):e._zr.remove(e.selectedNode.slotEvent[s]);for(var r=0;r<e.allNodes.length;r++)e.selectedNode.slotEvent[s].id==e.allNodes[r].id&&e.allNodes.splice(r,1);for(var o=0;o<e.domArray.length;o++)e.selectedNode.slotEvent[s].id==e.domArray[o].id&&e.domArray.splice(o,1)}if(x.isSlotEvent(t.model))for(var r=0;r<e.allNodes.length;r++)if((x.isActivity(e.allNodes[r].model)||x.isSubProcess(e.allNodes[r].model))&&e.allNodes[r].slotEvent&&e.allNodes[r].slotEvent.length>0)for(var s=0;s<e.allNodes[r].slotEvent.length;s++)e.selectedNode.id==e.allNodes[r].slotEvent[s].id&&e.allNodes[r].slotEvent.splice(s,1)}),this.operationNode.on("OperationNode:scaleDragLeft",function(t){this.virtualRect.setShape({points:t.points})}),this.operationNode.on("OperationNode:scaleDragRight",function(t){this.virtualRect.setShape({points:t.points})}),this.operationNode.on("OperationNode:scaleDragEnd",function(t){if(this.virtualRect.shape.points||null!=this.virtualRect.shape.points){var i=this.virtualRect.shape.points[1][0]-this.virtualRect.shape.points[0][0]-1,n=this.virtualRect.shape.points[2][1]-this.virtualRect.shape.points[1][1]-1;if("left"==t.arrowName)var r=[e.selectedNode.position[0]-(i+1-e.selectedNode.getRect().width),e.selectedNode.position[1]-(n+1-e.selectedNode.getRect().height)];if("right"==t.arrowName)var r=[e.selectedNode.position[0],e.selectedNode.position[1]];e.selectedNode.refresh({shape:{width:i,height:n}});var o=!0;n+1<e.selectedNode.getBoundingRect().height&&(e.selectedNode.refresh({shape:{height:e.selectedNode.getBoundingRect().height}}),o=!1),i+1<e.selectedNode.getBoundingRect().width&&(e.selectedNode.refresh({shape:{width:e.selectedNode.getBoundingRect().width}}),o=!1),1==o&&e.selectedNode.refresh({position:r});for(var s=0;s<e.domArray.length;s++)e.selectedNode.id==e.domArray[s].id&&(e.domArray[s].position=[r[0]+(i+1)/2,r[1]+(n+1)/2]);e.nodeMouseDown(e.selectedNode);for(var s=0;s<e.overlapArray.length;s++)e.selectedNode.id==e.overlapArray[s].id&&(e.overlapArray[s]={id:e.selectedNode.id,position:[e.selectedNode.getRect().x,e.selectedNode.getRect().y],width:e.selectedNode.getRect().width,height:e.selectedNode.getRect().height})}g.refreshLineByNode(e.selectedNode);var a=u.getSoltPoints(e.selectedNode);if(e.selectedNode.slotEvent&&e.selectedNode.slotEvent.length>0)for(var s=0;s<e.selectedNode.slotEvent.length;s++)for(var h=(e.selectedNode.slotEvent[s],0);h<t.startSlotPoints.length;h++)e.selectedNode.slotEvent[s].position[0]-t.startPosition[0]==t.startSlotPoints[h][0]&&e.selectedNode.slotEvent[s].position[1]-t.startPosition[1]==t.startSlotPoints[h][1]&&(e.selectedNode.slotEvent[s].attr("position",[a[h][0]+e.selectedNode.position[0],a[h][1]+e.selectedNode.position[1]]),g.refreshLineByNode(e.selectedNode.slotEvent[s]))}),this._zr.add(this.operationNode)},_.nodeMouseDown=function(t,e,i){var n=this;this.selectedNode=t;var r=t.getRect();this.operationNode||this.initOperationNode(t),n.rect.attr("style",{stroke:"rgba(0, 0, 0, 1)"}),this.operationNode.render(t,n._zr,r)},_.initVirtualLine=function(t){m.createGuidelines(this._zr),this.rect=new r.Polyline({position:[t.x,t.y],shape:{points:t.points},style:{lineDash:[2]},z:3}),this._zr.add(this.rect)},_.bindEventNode=function(t){for(var e=this,i=0;i<e.allNodes.length;i++)(x.isActivity(e.allNodes[i].model)||x.isSubProcess(e.allNodes[i].model))&&e.creatSlot(e.allNodes[i]);e._zr.on("mouseup",function(){for(var t=0;t<e.allNodes.length;t++)if((x.isActivity(e.allNodes[t].model)||x.isSubProcess(e.allNodes[t].model))&&e.allNodes[t].slot&&e.allNodes[t].slot.length>0)for(var i=0;i<e.allNodes[t].slot.length;i++)e.allNodes[t].remove(e.allNodes[t].slot[i])})},_.creatSlot=function(t){t.slot=[];for(var e=u.getSoltPoints(t),i=0;i<8;i++){var n=new r.Circle({position:e[i],shape:{cx:0,cy:0,r:10},style:{lineWidth:1,stroke:"rgba(0,0,0,0.6)",fill:"transparent"}});t.slot.push(n),t.add(n)}},_.newDrag=function(t,e,i){function n(e){function i(){v=0,o.rect.attr("style",{stroke:"rgba(0, 0, 0, 1)"})}function n(){v=1,o.rect.attr("style",{stroke:"rgba(255, 0, 0, 1)"})}for(var r=[o.getWidth()-(o.rect.shape.points[1][0]-o.rect.shape.points[0][0])/2,o.getHeight()-(o.rect.shape.points[2][1]-o.rect.shape.points[1][1])/2],l=[(o.rect.shape.points[1][0]-o.rect.shape.points[0][0])/2,(o.rect.shape.points[2][1]-o.rect.shape.points[1][1])/2],g=0;g<Math.abs(parseInt((e.event.clientX-c)/s));g++)y=1,e.event.clientX-c<0?p[0]=d-s*g:p[0]=d+s*g,p[0]<l[0]&&(p[0]=l[0]),p[0]>r[0]&&(p[0]=r[0]);for(var _=0;_<Math.abs(parseInt((e.event.clientY-u)/s));_++)y=1,e.event.clientY-u<0?p[1]=f-s*_:p[1]=f+s*_,p[1]<l[1]&&(p[1]=l[1]),p[1]>r[1]&&(p[1]=r[1]);if(o.rect.attr("position",p),m.judgeAlignment(p,h,o.getWidth(),o.getHeight()),t.parent){var w=Math.abs(p[0]-t.parent.getRect().x),b=Math.abs(t.getRect().width/2-t.parent.getRect().width/2),P=Math.abs(p[1]-t.parent.getRect().y),A=Math.abs(t.getRect().height/2-t.parent.getRect().height/2);w>b-s||P>A-s?n():i()}if(!t.parent)for(var T=0,R=o.overlapArray.length;T<R;T++){var S=o.overlapArray[T];if(i(),S.id!=o.rect.id&&S.id!=t.id)if(a.width>S.width)if(a.height>S.height){if(Math.abs(p[0]-S.position[0])<a.width/2&&Math.abs(p[1]-S.position[1])<a.height/2){n();break}i()}else{if(Math.abs(p[0]-S.position[0])<a.width/2&&Math.abs(p[1]-S.position[1])<S.height/2){n();break}i()}else if(a.height>S.height){if(Math.abs(p[0]-S.position[0])<S.width/2&&Math.abs(p[1]-S.position[1])<a.height/2){n();break}i()}else{if(Math.abs(p[0]-S.position[0])<S.width/2&&Math.abs(p[1]-S.position[1])<S.height/2){n();break}i()}}if(x.isSlotEvent(t.model))for(var L=0;L<o.allNodes.length;L++)if((x.isActivity(o.allNodes[L].model)||x.isSubProcess(o.allNodes[L].model))&&o.allNodes[L].slot&&o.allNodes[L].slot.length>0)for(var _=0;_<o.allNodes[L].slot.length;_++){var N=[o.allNodes[L].slot[_].position[0]+o.allNodes[L].position[0],o.allNodes[L].slot[_].position[1]+o.allNodes[L].position[1]];if(p[0]==N[0]&&p[1]==N[1]){o.rect.attr("style",{stroke:"rgba(0, 255, 0, 1)"});break}}}function r(e){if(o._zr.off("mousemove",_),o._zr.off("mouseup",w),o._zr.off("globalout",w),t.parent&&t.parent.off("globalout",w),o.rect.hide(),m.virtualXLine.attr("shape",{x2:0}),m.virtualYLine.attr("shape",{y2:0}),firstMove=0,isBreak=0,0==v){if(t.parent){if(x.isSubProcess(t.parent.model)){var i=t.parent.getRect().width/2+(p[0]-t.parent.getRect().x),n=t.parent.getRect().height/2+(p[1]-t.parent.getRect().y);if(t.slotEvent&&t.slotEvent.length>0)for(var r=0;r<t.slotEvent.length;r++){var s=[t.slotEvent[r].position[0]+i-l.clone(t.position[0])-t.getBoundingRect().width/2,t.slotEvent[r].position[1]+n-l.clone(t.position[1])-t.getBoundingRect().height/2];t.slotEvent[r].attr("position",s),g.refreshLineByNode(t.slotEvent[r])}t.reDraw(i,n)}}else{if(t.slotEvent&&t.slotEvent.length>0)for(var r=0;r<t.slotEvent.length;r++){var s=[t.slotEvent[r].position[0]+p[0]-l.clone(t.position[0])-t.getBoundingRect().width/2,t.slotEvent[r].position[1]+p[1]-l.clone(t.position[1])-t.getBoundingRect().height/2];t.slotEvent[r].attr("position",s),g.refreshLineByNode(t.slotEvent[r])}t.reDraw(p[0],p[1])}if(t.alarm){var a=[p[0]+t.getBoundingRect().width/2-(t.alarm.getBoundingRect().width-6),p[1]-t.getBoundingRect().height/2-t.alarm.getBoundingRect().height-3];t.alarm.attr("position",a)}for(var h=0;h<o.domArray.length;h++)t.id==o.domArray[h].id&&(o.domArray[h].position=[p[0],p[1]])}if(o.nodeMouseDown(t,e.event.clientX,e.event.clientY),1==y&&g.refreshLineByNode(t),x.isSlotEvent(t.model))for(var h=0;h<o.allNodes.length;h++)if((x.isActivity(o.allNodes[h].model)||x.isSubProcess(o.allNodes[h].model))&&o.allNodes[h].slot&&o.allNodes[h].slot.length>0)for(var r=0;r<o.allNodes[h].slot.length;r++){var c=[o.allNodes[h].slot[r].position[0]+o.allNodes[h].position[0],o.allNodes[h].slot[r].position[1]+o.allNodes[h].position[1]],u=[];if(t.parent?x.isSubProcess(t.parent.model)&&(u[0]=t.parent.getRect().width/2+(p[0]-t.parent.getRect().x),u[1]=t.parent.getRect().height/2+(p[1]-t.parent.getRect().y)):u=p,u[0]==c[0]&&u[1]==c[1]){o.allNodes[h].slotEvent.push(t);break}for(var d=0;d<o.allNodes[h].slotEvent.length;d++)t.id==o.allNodes[h].slotEvent[d].id&&o.allNodes[h].slotEvent.splice(d,1)}}var o=this;o.selectedNode=t,o.isNode=!0;var s=this.opts.gridLineSpacing,a=t.getRect(),h=o.domArray;$("body").one("keydown",function(t){var t=t||window.event;if(t.keycode==o.deleteKeycode||t.charCode==o.deleteKeycode||t.which==o.deleteKeycode)if(1==o.isNode){o.selectedNode.off(),o.selectedNode.parent?x.isSubProcess(o.selectedNode.parent.model)&&o.selectedNode.parent.remove(o.selectedNode):o._zr.remove(o.selectedNode);for(var e=0;e<o.allNodes.length;e++)o.selectedNode.id==o.allNodes[e].id&&o.allNodes.splice(e,1);for(var i=0;i<h.length;i++)o.selectedNode.id==h[i].id&&h.splice(i,1);for(var e=0;e<o.overlapArray.length;e++)o.selectedNode.id==o.overlapArray[e].id&&o.overlapArray.splice(e,1);o.operationNode&&(o._zr.remove(o.operationNode),o.operationNode=null),g.deleteSelectCon(o.selectedNode,o._zr)}else g.deleteLine(o._zr)});var c,u;if(c=e,u=i,t.parent){if(x.isSubProcess(t.parent.model))var d=a.x+t.parent.position[0],f=a.y+t.parent.position[1]}else var d=a.x,f=a.y;o.rect?(o.rect.attr("position",[d,f]),o.rect.setShape({points:a.points}),o.rect.show()):(o.initVirtualLine(a),o.rect.attr("position",[d,f]));var p=[d,f],v=0,y=0,_=function(t){n(t)},w=function(t){r(t)};this._zr.on("mousemove",_),this._zr.on("mouseup",w),this._zr.on("globalout",w)},_.creatTip=function(t){var e=this,i=new r.Group;i.isShow=!1;var n,o=t.model.get("properties.name")||"";n=o.length>64?o.substr(0,64)+"..":o;var s=new r.Text({style:{text:n,textFont:"16px Microsoft YaHei",fill:"#000000",textBaseline:"top"},position:[2,0],z:2});s.name="Text",i.add(s);var a=i.getBoundingRect().width+4,h=i.getBoundingRect().height+8,l=[[0,0],[a,0],[a,h],[a-3,h],[a-6,h+3],[a-9,h],[0,h],[0,0]],c=new r.Polyline({shape:{points:l},style:{fill:"#f9f9f9",stroke:"#bbbbbb"},z:1});c.name="Polyline",i.add(c);var u=[t.position[0]+t.getBoundingRect().width-(i.getBoundingRect().width-6),t.position[1]-i.getBoundingRect().height-3];i.attr("position",u),e._zr.add(i),t.alarm=i,i.hide()},l.mixin(n,a);var w=new Date-0,b={},P="_fishTopoBpmn_instance_",A={version:"1.0.0",dependencies:{zrender:"3.0.4"}};A.init=function(t,e){if(!t)throw new Error("Initialize failed: invalid dom.");e=e||{},l.defaults(e,{type:"bpmn",showGridLine:!0,devicePixelRatio:1,gridLineSpacing:10});var i=new n(t,e);return i.init(),i.id="ft_"+w++,b[i.id]=i,t.setAttribute&&t.setAttribute(P,i.id),i},A.getInstanceByDom=function(t){var e=t.getAttribute(P);return b[e]},A.dispose=function(t){var e;l.isDom(t)?e=A.getInstanceByDom(t):"string"==typeof t&&(e=b[t]),e instanceof A&&!e.isDisposed()&&e.dispose()},A.Bpmn=x,t.exports=A},function(t,e,i){"use strict";function n(t){if(!t.__isHover){if(t.__hoverStlDirty){var e=t.style.stroke,i=t.style.fill,n=t.__hoverStl,r=y.lift;n.fill=n.fill||i&&(i instanceof _?i:r(i,-.1)),n.stroke=n.stroke||e&&(e instanceof _?e:r(e,-.1));var o={};for(var s in n)n.hasOwnProperty(s)&&(o[s]=t.style[s]);t.__normalStl=o,t.__hoverStlDirty=!1}t.setStyle(t.__hoverStl),t.z2+=1,t.__isHover=!0}}function r(t){if(t.__isHover){var e=t.__normalStl;e&&t.setStyle(e),t.z2-=1,t.__isHover=!1}}function o(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&n(t)}):n(t)}function s(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&r(t)}):r(t)}function a(t,e){t.__hoverStl=t.hoverStyle||e||{},t.__hoverStlDirty=!0}function h(){!this.__isEmphasis&&o(this)}function l(){!this.__isEmphasis&&s(this)}function c(){this.__isEmphasis=!0,o(this)}function u(){this.__isEmphasis=!1,s(this)}function d(t,e,i,n,r){var o=t?"Update":"",s=n&&n.getShallow("animationDuration"+o),a=n&&n.getShallow("animationEasing"+o);n&&n.getShallow("animation")?e.animateTo(i,s,a,r):(e.attr(i),r&&r())}var f=i(4),p=i(6),g=Math.round,v=i(7),y=i(20),m=i(14),x=i(15),_=i(5),w={};w.Util=f,w.Group=i(37),w.Image=i(38),w.Text=i(41),w.textContain=i(24),w.Circle=i(42),w.Sector=i(43),w.Ring=i(44),w.Polygon=i(45),w.Polyline=i(49),w.Rect=i(50),w.Line=i(51),w.BezierCurve=i(52),w.Arc=i(53),w.LinearGradient=i(54),w.RadialGradient=i(55),w.BoundingRect=i(25),w.extendShape=function(t){return v.extend(t)},w.extendPath=function(t,e){return p.extendFromString(t,e)},w.makePath=function(t,e,i,n){var r=p.createFromString(t,e),o=r.getBoundingRect();if(i){var s=o.width/o.height;if("center"===n){var a,h=i.height*s;h<=i.width?a=i.height:(h=i.width,a=h/s);var l=i.x+i.width/2,c=i.y+i.height/2;i.x=l-h/2,i.y=c-a/2,i.width=h,i.height=a}this.resizePath(r,i)}return r},w.mergePath=p.mergePath,w.resizePath=function(t,e){if(t.applyTransform){var i=t.getBoundingRect(),n=i.calculateTransform(e);t.applyTransform(n)}},w.subPixelOptimizeLine=function(t){var e=w.subPixelOptimize,i=t.shape,n=t.style.lineWidth;return g(2*i.x1)===g(2*i.x2)&&(i.x1=i.x2=e(i.x1,n,!0)),g(2*i.y1)===g(2*i.y2)&&(i.y1=i.y2=e(i.y1,n,!0)),t},w.subPixelOptimizeRect=function(t){var e=w.subPixelOptimize,i=t.shape,n=t.style.lineWidth,r=i.x,o=i.y,s=i.width,a=i.height;return i.x=e(i.x,n,!0),i.y=e(i.y,n,!0),i.width=Math.max(e(r+s,n,!1)-i.x,0===s?0:1),i.height=Math.max(e(o+a,n,!1)-i.y,0===a?0:1),t},w.subPixelOptimize=function(t,e,i){var n=g(2*t);return(n+g(e))%2===0?n/2:(n+(i?1:-1))/2},w.doEnterHover=o,w.doLeaveHover=s,w.setElementHoverStl=a,w.setHoverStyle=function(t,e){"group"===t.type?t.traverse(function(t){"group"!==t.type&&a(t,e)}):a(t,e),t.on("mouseover",h).on("mouseout",l),t.on("emphasis",c).on("normal",u)},w.setText=function(t,e,i){var n=e.getShallow("position")||"inside",r=n.indexOf("inside")>=0?"white":i,o=e.getModel("textStyle");f.extend(t,{textDistance:e.getShallow("distance")||5,textFont:o.getFont(),textPosition:n,textFill:o.getTextColor()||r})},w.updateProps=f.curry(d,!0),w.initProps=f.curry(d,!1),w.getTransform=function(t,e){for(var i=m.identity([]);t&&t!==e;)m.mul(i,t.getLocalTransform(),i),t=t.parent;return i},w.applyTransform=function(t,e,i){return i&&(e=m.invert([],e)),x.applyTransform([],t,e)},w.transformDirection=function(t,e,i){var n=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),o=["left"===t?-n:"right"===t?n:0,"top"===t?-r:"bottom"===t?r:0];return o=w.applyTransform(o,e,i),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"},t.exports=w},function(t,e,i){function n(t){if("object"==typeof t&&null!==t){var e=t;if(t instanceof Array){e=[];for(var i=0,r=t.length;i<r;i++)e[i]=n(t[i])}else if(!T(t)&&!R(t)){e={};for(var o in t)t.hasOwnProperty(o)&&(e[o]=n(t[o]))}return e}return t}function r(t,e,i){if(!A(e)||!A(t))return i?n(e):t;for(var o in e)if(e.hasOwnProperty(o)){var s=t[o],a=e[o];!A(a)||!A(s)||w(a)||w(s)||R(a)||R(s)||T(a)||T(s)?!i&&o in t||(t[o]=n(e[o],!0)):r(s,a,i)}return t}function o(t,e){for(var i=t[0],n=1,o=t.length;n<o;n++)i=r(i,t[n],e);return i}function s(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function a(t,e,i){for(var n in e)e.hasOwnProperty(n)&&(i?null!=e[n]:null==t[n])&&(t[n]=e[n]);return t}function h(){return document.createElement("canvas")}function l(){return C||(C=G.createCanvas().getContext("2d")),C}function c(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i}return-1}function u(t,e){function i(){}var n=t.prototype;i.prototype=e.prototype,t.prototype=new i;for(var r in n)t.prototype[r]=n[r];t.prototype.constructor=t,t.superClass=e}function d(t,e,i){t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,a(t,e,i)}function f(t){if(t)return"string"!=typeof t&&"number"==typeof t.length}function p(t,e,i){if(t&&e)if(t.forEach&&t.forEach===z)t.forEach(e,i);else if(t.length===+t.length)for(var n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t)}function g(t,e,i){if(t&&e){if(t.map&&t.map===D)return t.map(e,i);for(var n=[],r=0,o=t.length;r<o;r++)n.push(e.call(i,t[r],r,t));return n}}function v(t,e,i,n){if(t&&e){if(t.reduce&&t.reduce===F)return t.reduce(e,i,n);for(var r=0,o=t.length;r<o;r++)i=e.call(n,i,t[r],r,t);return i}}function y(t,e,i){if(t&&e){if(t.filter&&t.filter===B)return t.filter(e,i);for(var n=[],r=0,o=t.length;r<o;r++)e.call(i,t[r],r,t)&&n.push(t[r]);return n}}function m(t,e,i){if(t&&e)for(var n=0,r=t.length;n<r;n++)if(e.call(i,t[n],n,t))return t[n]}function x(t,e){var i=I.call(arguments,2);return function(){return t.apply(e,i.concat(I.call(arguments)))}}function _(t){var e=I.call(arguments,1);return function(){return t.apply(this,e.concat(I.call(arguments)))}}function w(t){return"[object Array]"===k.call(t)}function b(t){return"function"==typeof t}function P(t){return"[object String]"===k.call(t)}function A(t){var e=typeof t;return"function"===e||!!t&&"object"==e}function T(t){return!!E[k.call(t)]||t instanceof M}function R(t){return t&&1===t.nodeType&&"string"==typeof t.nodeName}function S(t){for(var e=0,i=arguments.length;e<i;e++)if(null!=arguments[e])return arguments[e]}function L(){return Function.call.apply(I,arguments)}function N(t,e){if(!t)throw new Error(e)}var C,M=i(5),E={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},k=Object.prototype.toString,O=Array.prototype,z=O.forEach,B=O.filter,I=O.slice,D=O.map,F=O.reduce,G={inherits:u,mixin:d,clone:n,merge:r,mergeAll:o,extend:s,defaults:a,getContext:l,createCanvas:h,indexOf:c,slice:L,find:m,isArrayLike:f,each:p,map:g,reduce:v,filter:y,bind:x,curry:_,isArray:w,isString:P,isObject:A,isFunction:b,isBuildInObject:T,isDom:R,retrieve:S,assert:N,noop:function(){}};t.exports=G},function(t,e){var i=function(t){this.colorStops=t||[]};i.prototype={constructor:i,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}},t.exports=i},function(t,e,i){function n(t,e,i,n,r,o,s,a,h,l,c){var g=h*(p/180),m=f(g)*(t-i)/2+d(g)*(e-n)/2,x=-1*d(g)*(t-i)/2+f(g)*(e-n)/2,_=m*m/(s*s)+x*x/(a*a);_>1&&(s*=u(_),a*=u(_));var w=(r===o?-1:1)*u((s*s*(a*a)-s*s*(x*x)-a*a*(m*m))/(s*s*(x*x)+a*a*(m*m)))||0,b=w*s*x/a,P=w*-a*m/s,A=(t+i)/2+f(g)*b-d(g)*P,T=(e+n)/2+d(g)*b+f(g)*P,R=y([1,0],[(m-b)/s,(x-P)/a]),S=[(m-b)/s,(x-P)/a],L=[(-1*m-b)/s,(-1*x-P)/a],N=y(S,L);v(S,L)<=-1&&(N=p),v(S,L)>=1&&(N=0),0===o&&N>0&&(N-=2*p),1===o&&N<0&&(N+=2*p),c.addData(l,A,T,s,a,R,N,g,o)}function r(t){if(!t)return[];var e,i=t.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,",");for(e=0;e<c.length;e++)i=i.replace(new RegExp(c[e],"g"),"|"+c[e]);var r,o=i.split("|"),s=0,h=0,l=new a,u=a.CMD;for(e=1;e<o.length;e++){var d,f=o[e],p=f.charAt(0),g=0,v=f.slice(1).replace(/e,-/g,"e-").split(",");v.length>0&&""===v[0]&&v.shift();for(var y=0;y<v.length;y++)v[y]=parseFloat(v[y]);for(;g<v.length&&!isNaN(v[g])&&!isNaN(v[0]);){var m,x,_,w,b,P,A,T=s,R=h;switch(p){case"l":s+=v[g++],h+=v[g++],d=u.L,l.addData(d,s,h);break;case"L":s=v[g++],h=v[g++],d=u.L,l.addData(d,s,h);break;case"m":s+=v[g++],h+=v[g++],d=u.M,l.addData(d,s,h),p="l";break;case"M":s=v[g++],h=v[g++],d=u.M,l.addData(d,s,h),p="L";break;case"h":s+=v[g++],d=u.L,l.addData(d,s,h);break;case"H":s=v[g++],d=u.L,l.addData(d,s,h);break;case"v":h+=v[g++],d=u.L,l.addData(d,s,h);break;case"V":h=v[g++],d=u.L,l.addData(d,s,h);break;case"C":d=u.C,l.addData(d,v[g++],v[g++],v[g++],v[g++],v[g++],v[g++]),s=v[g-2],h=v[g-1];break;case"c":d=u.C,l.addData(d,v[g++]+s,v[g++]+h,v[g++]+s,v[g++]+h,v[g++]+s,v[g++]+h),s+=v[g-2],h+=v[g-1];break;case"S":m=s,x=h;var S=l.len(),L=l.data;r===u.C&&(m+=s-L[S-4],x+=h-L[S-3]),d=u.C,T=v[g++],R=v[g++],s=v[g++],h=v[g++],l.addData(d,m,x,T,R,s,h);break;case"s":m=s,x=h;var S=l.len(),L=l.data;r===u.C&&(m+=s-L[S-4],x+=h-L[S-3]),d=u.C,T=s+v[g++],R=h+v[g++],s+=v[g++],h+=v[g++],l.addData(d,m,x,T,R,s,h);break;case"Q":T=v[g++],R=v[g++],s=v[g++],h=v[g++],d=u.Q,l.addData(d,T,R,s,h);break;case"q":T=v[g++]+s,R=v[g++]+h,s+=v[g++],h+=v[g++],d=u.Q,l.addData(d,T,R,s,h);break;case"T":m=s,x=h;var S=l.len(),L=l.data;r===u.Q&&(m+=s-L[S-4],x+=h-L[S-3]),s=v[g++],h=v[g++],d=u.Q,l.addData(d,m,x,s,h);break;case"t":m=s,x=h;var S=l.len(),L=l.data;r===u.Q&&(m+=s-L[S-4],x+=h-L[S-3]),s+=v[g++],h+=v[g++],d=u.Q,l.addData(d,m,x,s,h);break;case"A":_=v[g++],w=v[g++],b=v[g++],P=v[g++],A=v[g++],T=s,R=h,s=v[g++],h=v[g++],d=u.A,n(T,R,s,h,P,A,_,w,b,d,l);break;case"a":_=v[g++],w=v[g++],b=v[g++],P=v[g++],A=v[g++],T=s,R=h,s+=v[g++],h+=v[g++],d=u.A,n(T,R,s,h,P,A,_,w,b,d,l)}}"z"!==p&&"Z"!==p||(d=u.Z,l.addData(d)),r=d}return l.toStatic(),l}function o(t,e){var i,n=r(t);return e=e||{},e.buildPath=function(t){t.setData(n.data),i&&h(t,i);var e=t.getContext();e&&t.rebuildPath(e)},e.applyTransform=function(t){i||(i=l.create()),l.mul(i,t,i)},e}var s=i(7),a=i(26),h=i(36),l=i(14),c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],u=Math.sqrt,d=Math.sin,f=Math.cos,p=Math.PI,g=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},v=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(g(t)*g(e))},y=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(v(t,e))};t.exports={createFromString:function(t,e){return new s(o(t,e))},extendFromString:function(t,e){return s.extend(o(t,e))},mergePath:function(t,e){var i,n,r=[],o=t.length;for(n=0;n<o;n++)i=t[n],i.__dirty&&i.buildPath(i.path,i.shape),r.push(i.path);var a=new s(e);return a.buildPath=function(t){t.appendPath(r);var e=t.getContext();e&&t.rebuildPath(e)},a}}},function(t,e,i){function n(t){var e=t.fill;return null!=e&&"none"!==e}function r(t){var e=t.stroke;return null!=e&&"none"!==e&&t.lineWidth>0}function o(t){s.call(this,t),this.path=new h}var s=i(8),a=i(4),h=i(26),l=i(29),c=i(5),u=Math.abs;o.prototype={constructor:o,type:"path",__dirtyPath:!0,strokeContainThreshold:5,brush:function(t){t.save();var e=this.style,i=this.path,o=r(e),s=n(e);this.__dirtyPath&&(s&&e.fill instanceof c&&e.fill.updateCanvasGradient(this,t),o&&e.stroke instanceof c&&e.stroke.updateCanvasGradient(this,t)),e.bind(t,this),this.setTransform(t);var a=e.lineDash,h=e.lineDashOffset,l=!!t.setLineDash;this.__dirtyPath||a&&!l&&o?(i=this.path.beginPath(t),a&&!l&&(i.setLineDash(a),i.setLineDashOffset(h)),this.buildPath(i,this.shape),this.__dirtyPath=!1):(t.beginPath(),this.path.rebuildPath(t)),s&&i.fill(t),a&&l&&(t.setLineDash(a),t.lineDashOffset=h),o&&i.stroke(t),null!=e.text&&this.drawRectText(t,this.getBoundingRect()),t.restore()},buildPath:function(t,e){},getBoundingRect:function(){var t=this._rect,e=this.style;if(!t){var i=this.path;this.__dirtyPath&&(i.beginPath(),this.buildPath(i,this.shape)),t=i.getBoundingRect()}if(r(e)&&(this.__dirty||!this._rect)){var o=this._rectWithStroke||(this._rectWithStroke=t.clone());o.copy(t);var s=e.lineWidth,a=e.strokeNoScale?this.getLineScale():1;return n(e)||(s=Math.max(s,this.strokeContainThreshold)),a>1e-10&&(o.width+=s/a,o.height+=s/a,o.x-=s/a/2,o.y-=s/a/2),o}return this._rect=t,t},contain:function(t,e){var i=this.transformCoordToLocal(t,e),o=this.getBoundingRect(),s=this.style;if(t=i[0],e=i[1],o.contain(t,e)){var a=this.path.data;if(r(s)){var h=s.lineWidth,c=s.strokeNoScale?this.getLineScale():1;if(c>1e-10&&(n(s)||(h=Math.max(h,this.strokeContainThreshold)),l.containStroke(a,h/c,t,e)))return!0}if(n(s))return l.contain(a,t,e)}return!1},dirty:function(t){0===arguments.length&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?this.setShape(e):s.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var i=this.shape;if(i){if(a.isObject(t))for(var n in t)i[n]=t[n];else i[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&u(t[0]-1)>1e-10&&u(t[3]-1)>1e-10?Math.sqrt(u(t[0]*t[3]-t[2]*t[1])):1}},o.extend=function(t){var e=function(e){o.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var i=t.shape;if(i){this.shape=this.shape||{};var n=this.shape;for(var r in i)!n.hasOwnProperty(r)&&i.hasOwnProperty(r)&&(n[r]=i[r])}t.init&&t.init.call(this,e)};a.inherits(e,o);for(var i in t)"style"!==i&&"shape"!==i&&(e.prototype[i]=t[i]);return e;
},a.inherits(o,s),t.exports=o},function(t,e,i){function n(t){t=t||{},s.call(this,t);for(var e in t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new o(t.style),this._rect=null,this.__clipPaths=[]}var r=i(4),o=i(9),s=i(10),a=i(23);n.prototype={constructor:n,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var i=this.transformCoordToLocal(t,e),n=this.getBoundingRect();return n.contain(i[0],i[1])},dirty:function(){this.__dirty=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?s.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(),this}},r.inherits(n,s),r.mixin(n,a),t.exports=n},function(t,e){var i=["lineCap","lineJoin","miterLimit","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor"],n=function(t){this.extendFrom(t)};n.prototype={constructor:n,fill:"#000000",stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,textFill:"#000",textStroke:null,textPosition:"inside",textBaseline:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,bind:function(t,e){for(var n=this.fill,r=this.stroke,o=0;o<i.length;o++){var s=i[o];null!=this[s]&&(t[s]=this[s])}if(null!=r){var a=this.lineWidth;t.lineWidth=a/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}null!=n&&(t.fillStyle=n.canvasGradient?n.canvasGradient:n),null!=r&&(t.strokeStyle=r.canvasGradient?r.canvasGradient:r),null!=this.opacity&&(t.globalAlpha=this.opacity)},extendFrom:function(t,e){if(t){var i=this;for(var n in t)!t.hasOwnProperty(n)||!e&&i.hasOwnProperty(n)||(i[n]=t[n])}},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t}};var r,o,s=n.prototype;for(o=0;o<i.length;o++)r=i[o],r in s||(s[r]=null);t.exports=n},function(t,e,i){"use strict";var n=i(11),r=i(12),o=i(13),s=i(16),a=i(4),h=function(t){o.call(this,t),r.call(this,t),s.call(this,t),this.id=t.id||n()};h.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=e,this.decomposeTransform(),this.dirty()},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var i=this[t];i||(i=this[t]=[]),i[0]=e[0],i[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(a.isObject(t))for(var i in t)t.hasOwnProperty(i)&&this.attrKV(i,t[i]);return this.dirty(),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),this.clipPath=t,t.__zr=e,t.__clipTarget=this,this.dirty()},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty())},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.addAnimator(e[i]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.removeAnimator(e[i]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},a.mixin(h,s),a.mixin(h,o),a.mixin(h,r),t.exports=h},function(t,e){var i=2311;t.exports=function(){return"zr_"+i++}},function(t,e,i){var n=Array.prototype.slice,r=i(4),o=r.indexOf,s=function(){this._$handlers={}};s.prototype={constructor:s,one:function(t,e,i){var n=this._$handlers;return e&&t?(n[t]||(n[t]=[]),o(n[t],t)>=0?this:(n[t].push({h:e,one:!0,ctx:i||this}),this)):this},on:function(t,e,i){var n=this._$handlers;return e&&t?(n[t]||(n[t]=[]),n[t].push({h:e,one:!1,ctx:i||this}),this):this},isSilent:function(t){var e=this._$handlers;return e[t]&&e[t].length},off:function(t,e){var i=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(i[t]){for(var n=[],r=0,o=i[t].length;r<o;r++)i[t][r].h!=e&&n.push(i[t][r]);i[t]=n}i[t]&&0===i[t].length&&delete i[t]}else delete i[t];return this},trigger:function(t){if(this._$handlers[t]){var e=arguments,i=e.length;i>3&&(e=n.call(e,1));for(var r=this._$handlers[t],o=r.length,s=0;s<o;){switch(i){case 1:r[s].h.call(r[s].ctx);break;case 2:r[s].h.call(r[s].ctx,e[1]);break;case 3:r[s].h.call(r[s].ctx,e[1],e[2]);break;default:r[s].h.apply(r[s].ctx,e)}r[s].one?(r.splice(s,1),o--):s++}}return this},triggerWithContext:function(t){if(this._$handlers[t]){var e=arguments,i=e.length;i>4&&(e=n.call(e,1,e.length-1));for(var r=e[e.length-1],o=this._$handlers[t],s=o.length,a=0;a<s;){switch(i){case 1:o[a].h.call(r);break;case 2:o[a].h.call(r,e[1]);break;case 3:o[a].h.call(r,e[1],e[2]);break;default:o[a].h.apply(r,e)}o[a].one?(o.splice(a,1),s--):a++}}return this}},t.exports=s},function(t,e,i){"use strict";function n(t){return t>a||t<-a}var r=i(14),o=i(15),s=r.identity,a=5e-5,h=function(t){t=t||{},t.position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},l=h.prototype;l.transform=null,l.needLocalTransform=function(){return n(this.rotation)||n(this.position[0])||n(this.position[1])||n(this.scale[0]-1)||n(this.scale[1]-1)},l.updateTransform=function(){var t=this.parent,e=t&&t.transform,i=this.needLocalTransform(),n=this.transform;return i||e?(n=n||r.create(),i?this.getLocalTransform(n):s(n),e&&(i?r.mul(n,t.transform,n):r.copy(n,t.transform)),this.transform=n,this.invTransform=this.invTransform||r.create(),void r.invert(this.invTransform,n)):void(n&&s(n))},l.getLocalTransform=function(t){t=t||[],s(t);var e=this.origin,i=this.scale,n=this.rotation,o=this.position;return e&&(t[4]-=e[0],t[5]-=e[1]),r.scale(t,t,i),n&&r.rotate(t,t,n),e&&(t[4]+=e[0],t[5]+=e[1]),t[4]+=o[0],t[5]+=o[1],t},l.setTransform=function(t){var e=this.transform;e&&t.transform(e[0],e[1],e[2],e[3],e[4],e[5])};var c=[];l.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(r.mul(c,t.invTransform,e),e=c);var i=e[0]*e[0]+e[1]*e[1],o=e[2]*e[2]+e[3]*e[3],s=this.position,a=this.scale;n(i-1)&&(i=Math.sqrt(i)),n(o-1)&&(o=Math.sqrt(o)),e[0]<0&&(i=-i),e[3]<0&&(o=-o),s[0]=e[4],s[1]=e[5],a[0]=i,a[1]=o,this.rotation=Math.atan2(-e[1]/o,e[0]/i)}},l.transformCoordToLocal=function(t,e){var i=[t,e],n=this.invTransform;return n&&o.applyTransform(i,i,n),i},l.transformCoordToGlobal=function(t,e){var i=[t,e],n=this.transform;return n&&o.applyTransform(i,i,n),i},t.exports=h},function(t,e){var i="undefined"==typeof Float32Array?Array:Float32Array,n={create:function(){var t=new i(6);return n.identity(t),t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},mul:function(t,e,i){var n=e[0]*i[0]+e[2]*i[1],r=e[1]*i[0]+e[3]*i[1],o=e[0]*i[2]+e[2]*i[3],s=e[1]*i[2]+e[3]*i[3],a=e[0]*i[4]+e[2]*i[5]+e[4],h=e[1]*i[4]+e[3]*i[5]+e[5];return t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=h,t},translate:function(t,e,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+i[0],t[5]=e[5]+i[1],t},rotate:function(t,e,i){var n=e[0],r=e[2],o=e[4],s=e[1],a=e[3],h=e[5],l=Math.sin(i),c=Math.cos(i);return t[0]=n*c+s*l,t[1]=-n*l+s*c,t[2]=r*c+a*l,t[3]=-r*l+c*a,t[4]=c*o+l*h,t[5]=c*h-l*o,t},scale:function(t,e,i){var n=i[0],r=i[1];return t[0]=e[0]*n,t[1]=e[1]*r,t[2]=e[2]*n,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*r,t},invert:function(t,e){var i=e[0],n=e[2],r=e[4],o=e[1],s=e[3],a=e[5],h=i*s-o*n;return h?(h=1/h,t[0]=s*h,t[1]=-o*h,t[2]=-n*h,t[3]=i*h,t[4]=(n*a-s*r)*h,t[5]=(o*r-i*a)*h,t):null}};t.exports=n},function(t,e){var i="undefined"==typeof Float32Array?Array:Float32Array,n={create:function(t,e){var n=new i(2);return n[0]=t||0,n[1]=e||0,n},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},clone:function(t){var e=new i(2);return e[0]=t[0],e[1]=t[1],e},set:function(t,e,i){return t[0]=e,t[1]=i,t},add:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},scaleAndAdd:function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t},sub:function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},len:function(t){return Math.sqrt(this.lenSquare(t))},lenSquare:function(t){return t[0]*t[0]+t[1]*t[1]},mul:function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},div:function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},scale:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},normalize:function(t,e){var i=n.len(e);return 0===i?(t[0]=0,t[1]=0):(t[0]=e[0]/i,t[1]=e[1]/i),t},distance:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))},distanceSquare:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])},negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerp:function(t,e,i,n){return t[0]=e[0]+n*(i[0]-e[0]),t[1]=e[1]+n*(i[1]-e[1]),t},applyTransform:function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t},min:function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},max:function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}};n.length=n.len,n.lengthSquare=n.lenSquare,n.dist=n.distance,n.distSquare=n.distanceSquare,t.exports=n},function(t,e,i){"use strict";var n=i(17),r=i(4),o=r.isString,s=r.isFunction,a=r.isObject,h=i(21),l=function(){this.animators=[]};l.prototype={constructor:l,animate:function(t,e){var i,o=!1,s=this,a=this.__zr;if(t){var l=t.split("."),c=s;o="shape"===l[0];for(var u=0,d=l.length;u<d;u++)c&&(c=c[l[u]]);c&&(i=c)}else i=s;if(!i)return void h('Property "'+t+'" is not existed in element '+s.id);var f=s.animators,p=new n(i,e);return p.during(function(t){s.dirty(o)}).done(function(){f.splice(r.indexOf(f,p),1)}),f.push(p),a&&a.animation.addAnimator(p),p},stopAnimation:function(t){for(var e=this.animators,i=e.length,n=0;n<i;n++)e[n].stop(t);return e.length=0,this},animateTo:function(t,e,i,n,r){function a(){l--,l||r&&r()}o(i)?(r=n,n=i,i=0):s(n)?(r=n,n="linear",i=0):s(i)?(r=i,i=0):s(e)?(r=e,e=500):e||(e=500),this.stopAnimation(),this._animateToShallow("",this,t,e,i,n,r);var h=this.animators.slice(),l=h.length;l||r&&r();for(var c=0;c<h.length;c++)h[c].done(a).start(n)},_animateToShallow:function(t,e,i,n,o){var s={},h=0;for(var l in i)if(null!=e[l])a(i[l])&&!r.isArrayLike(i[l])?this._animateToShallow(t?t+"."+l:l,e[l],i[l],n,o):(s[l]=i[l],h++);else if(null!=i[l])if(t){var c={};c[t]={},c[t][l]=i[l],this.attr(c)}else this.attr(l,i[l]);return h>0&&this.animate(t,!1).when(null==n?500:n,s).delay(o||0),this}},t.exports=l},function(t,e,i){function n(t,e){return t[e]}function r(t,e,i){t[e]=i}function o(t,e,i){return(e-t)*i+t}function s(t,e,i){return i>.5?e:t}function a(t,e,i,n,r){var s=t.length;if(1==r)for(var a=0;a<s;a++)n[a]=o(t[a],e[a],i);else for(var h=t[0].length,a=0;a<s;a++)for(var l=0;l<h;l++)n[a][l]=o(t[a][l],e[a][l],i)}function h(t,e,i){var n=t.length,r=e.length;if(n!==r){var o=n>r;if(o)t.length=r;else for(var s=n;s<r;s++)t.push(1===i?e[s]:x.call(e[s]))}}function l(t,e,i){if(t===e)return!0;var n=t.length;if(n!==e.length)return!1;if(1===i){for(var r=0;r<n;r++)if(t[r]!==e[r])return!1}else for(var o=t[0].length,r=0;r<n;r++)for(var s=0;s<o;s++)if(t[r][s]!==e[r][s])return!1;return!0}function c(t,e,i,n,r,o,s,a,h){var l=t.length;if(1==h)for(var c=0;c<l;c++)a[c]=u(t[c],e[c],i[c],n[c],r,o,s);else for(var d=t[0].length,c=0;c<l;c++)for(var f=0;f<d;f++)a[c][f]=u(t[c][f],e[c][f],i[c][f],n[c][f],r,o,s)}function u(t,e,i,n,r,o,s){var a=.5*(i-t),h=.5*(n-e);return(2*(e-i)+a+h)*s+(-3*(e-i)-2*a-h)*o+a*r+e}function d(t){if(m(t)){var e=t.length;if(m(t[0])){for(var i=[],n=0;n<e;n++)i.push(x.call(t[n]));return i}return x.call(t)}return t}function f(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function p(t,e,i,n,r){var d=t._getter,p=t._setter,y="spline"===e,x=n.length;if(x){var _,w=n[0].value,b=m(w),P=!1,A=!1,T=b&&m(w[0])?2:1;n.sort(function(t,e){return t.time-e.time}),_=n[x-1].time;for(var R=[],S=[],L=n[0].value,N=!0,C=0;C<x;C++){R.push(n[C].time/_);var M=n[C].value;if(b&&l(M,L,T)||!b&&M===L||(N=!1),L=M,"string"==typeof M){var E=v.parse(M);E?(M=E,P=!0):A=!0}S.push(M)}if(!N){if(b){for(var k=S[x-1],C=0;C<x-1;C++)h(S[C],k,T);h(d(t._target,r),k,T)}var O,z,B,I,D,F,G=0,q=0;if(P)var Y=[0,0,0,0];var H=function(t,e){var i;if(e<q){for(O=Math.min(G+1,x-1),i=O;i>=0&&!(R[i]<=e);i--);i=Math.min(i,x-2)}else{for(i=G;i<x&&!(R[i]>e);i++);i=Math.min(i-1,x-2)}G=i,q=e;var n=R[i+1]-R[i];if(0!==n)if(z=(e-R[i])/n,y)if(I=S[i],B=S[0===i?i:i-1],D=S[i>x-2?x-1:i+1],F=S[i>x-3?x-1:i+2],b)c(B,I,D,F,z,z*z,z*z*z,d(t,r),T);else{var h;if(P)h=c(B,I,D,F,z,z*z,z*z*z,Y,1),h=f(Y);else{if(A)return s(I,D,z);h=u(B,I,D,F,z,z*z,z*z*z)}p(t,r,h)}else if(b)a(S[i],S[i+1],z,d(t,r),T);else{var h;if(P)a(S[i],S[i+1],z,Y,1),h=f(Y);else{if(A)return s(S[i],S[i+1],z);h=o(S[i],S[i+1],z)}p(t,r,h)}},U=new g({target:t._target,life:_,loop:t._loop,delay:t._delay,onframe:H,ondestroy:i});return e&&"spline"!==e&&(U.easing=e),U}}}var g=i(18),v=i(20),y=i(4),m=y.isArrayLike,x=Array.prototype.slice,_=function(t,e,i,o){this._tracks={},this._target=t,this._loop=e||!1,this._getter=i||n,this._setter=o||r,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};_.prototype={when:function(t,e){var i=this._tracks;for(var n in e){if(!i[n]){i[n]=[];var r=this._getter(this._target,n);if(null==r)continue;0!==t&&i[n].push({time:0,value:d(r)})}i[n].push({time:t,value:e[n]})}return this},during:function(t){return this._onframeList.push(t),this},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,i=0;i<e;i++)t[i].call(this)},start:function(t){var e,i=this,n=0,r=function(){n--,n||i._doneCallback()};for(var o in this._tracks){var s=p(this,t,r,this._tracks[o],o);s&&(this._clipList.push(s),n++,this.animation&&this.animation.addClip(s),e=s)}if(e){var a=e.onframe;e.onframe=function(t,e){a(t,e);for(var n=0;n<i._onframeList.length;n++)i._onframeList[n](t,e)}}return n||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,i=this.animation,n=0;n<e.length;n++){var r=e[n];t&&r.onframe(this._target,1),i&&i.removeClip(r)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}},t.exports=_},function(t,e,i){function n(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart}var r=i(19);n.prototype={constructor:n,step:function(t){this._initialized||(this._startTime=(new Date).getTime()+this._delay,this._initialized=!0);var e=(t-this._startTime)/this._life;if(!(e<0)){e=Math.min(e,1);var i=this.easing,n="string"==typeof i?r[i]:i,o="function"==typeof n?n(e):e;return this.fire("frame",o),1==e?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}},restart:function(){var t=(new Date).getTime(),e=(t-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap,this._needsRemove=!1},fire:function(t,e){t="on"+t,this[t]&&this[t](this._target,e)}},t.exports=n},function(t,e){var i={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)))},elasticOut:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/n)+1)},elasticInOut:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)):i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-i.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*i.bounceIn(2*t):.5*i.bounceOut(2*t-1)+.5}};t.exports=i},function(t,e){function i(t){return t=Math.round(t),t<0?0:t>255?255:t}function n(t){return t=Math.round(t),t<0?0:t>360?360:t}function r(t){return t<0?0:t>1?1:t}function o(t){return i(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100*255:parseInt(t,10))}function s(t){return r(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100:parseFloat(t))}function a(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function h(t,e,i){return t+(e-t)*i}function l(t){if(t){t+="";var e=t.replace(/ /g,"").toLowerCase();if(e in _)return _[e].slice();if("#"!==e.charAt(0)){var i=e.indexOf("("),n=e.indexOf(")");if(i!==-1&&n+1===e.length){var r=e.substr(0,i),a=e.substr(i+1,n-(i+1)).split(","),h=1;switch(r){case"rgba":if(4!==a.length)return;h=s(a.pop());case"rgb":if(3!==a.length)return;return[o(a[0]),o(a[1]),o(a[2]),h];case"hsla":if(4!==a.length)return;return a[3]=s(a[3]),c(a);case"hsl":if(3!==a.length)return;return c(a);default:return}}}else{if(4===e.length){var l=parseInt(e.substr(1),16);if(!(l>=0&&l<=4095))return;return[(3840&l)>>4|(3840&l)>>8,240&l|(240&l)>>4,15&l|(15&l)<<4,1]}if(7===e.length){var l=parseInt(e.substr(1),16);if(!(l>=0&&l<=16777215))return;return[(16711680&l)>>16,(65280&l)>>8,255&l,1]}}}}function c(t){var e=(parseFloat(t[0])%360+360)%360/360,n=s(t[1]),r=s(t[2]),o=r<=.5?r*(n+1):r+n-r*n,h=2*r-o,l=[i(255*a(h,o,e+1/3)),i(255*a(h,o,e)),i(255*a(h,o,e-1/3))];return 4===t.length&&(l[3]=t[3]),l}function u(t){if(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(n,r,o),a=Math.max(n,r,o),h=a-s,l=(a+s)/2;if(0===h)e=0,i=0;else{i=l<.5?h/(a+s):h/(2-a-s);var c=((a-n)/6+h/2)/h,u=((a-r)/6+h/2)/h,d=((a-o)/6+h/2)/h;n===a?e=d-u:r===a?e=1/3+c-d:o===a&&(e=2/3+u-c),e<0&&(e+=1),e>1&&(e-=1)}var f=[360*e,i,l];return null!=t[3]&&f.push(t[3]),f}}function d(t,e){var i=l(t);if(i){for(var n=0;n<3;n++)e<0?i[n]=i[n]*(1-e)|0:i[n]=(255-i[n])*e+i[n]|0;return x(i,4===i.length?"rgba":"rgb")}}function f(t,e){var i=l(t);if(i)return((1<<24)+(i[0]<<16)+(i[1]<<8)+ +i[2]).toString(16).slice(1)}function p(t,e,n){if(e&&e.length&&t>=0&&t<=1){n=n||[0,0,0,0];var r=t*(e.length-1),o=Math.floor(r),s=Math.ceil(r),a=e[o],l=e[s],c=r-o;return n[0]=i(h(a[0],l[0],c)),n[1]=i(h(a[1],l[1],c)),n[2]=i(h(a[2],l[2],c)),n[3]=i(h(a[3],l[3],c)),n}}function g(t,e,n){if(e&&e.length&&t>=0&&t<=1){var o=t*(e.length-1),s=Math.floor(o),a=Math.ceil(o),c=l(e[s]),u=l(e[a]),d=o-s,f=x([i(h(c[0],u[0],d)),i(h(c[1],u[1],d)),i(h(c[2],u[2],d)),r(h(c[3],u[3],d))],"rgba");return n?{color:f,leftIndex:s,rightIndex:a,value:o}:f}}function v(t,e){if(!(2!==t.length||t[1]<t[0])){for(var i=g(t[0],e,!0),n=g(t[1],e,!0),r=[{color:i.color,offset:0}],o=n.value-i.value,s=Math.max(i.value,i.rightIndex),a=Math.min(n.value,n.leftIndex),h=s;o>0&&h<=a;h++)r.push({color:e[h],offset:(h-i.value)/o});return r.push({color:n.color,offset:1}),r}}function y(t,e,i,r){if(t=l(t))return t=u(t),null!=e&&(t[0]=n(e)),null!=i&&(t[1]=s(i)),null!=r&&(t[2]=s(r)),x(c(t),"rgba")}function m(t,e){if(t=l(t),t&&null!=e)return t[3]=r(e),x(t,"rgba")}function x(t,e){return"rgb"!==e&&"hsv"!==e&&"hsl"!==e||(t=t.slice(0,3)),e+"("+t.join(",")+")"}var _={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};t.exports={parse:l,lift:d,toHex:f,fastMapToColor:p,mapToColor:g,mapIntervalToColor:v,modifyHSL:y,modifyAlpha:m,stringify:x}},function(t,e,i){var n=i(22);t.exports=function(){if(0!==n.debugMode)if(1==n.debugMode)for(var t in arguments)throw new Error(arguments[t]);else if(n.debugMode>1)for(var t in arguments)console.log(arguments[t])}},function(t,e){var i=1;"undefined"!=typeof window&&(i=Math.max(window.devicePixelRatio||1,1));var n={debugMode:0,devicePixelRatio:i};t.exports=n},function(t,e,i){function n(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function r(t,e){t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}var o=i(24),s=i(25),a=new s,h=function(){};h.prototype={constructor:h,drawRectText:function(t,e,i){var s=this.style,h=s.text;if(null!=h&&(h+=""),h){var l,c,u=s.textPosition,d=s.textDistance,f=s.textAlign,p=s.textFont||s.font,g=s.textBaseline,v=s.textVerticalAlign;i=i||o.getBoundingRect(h,p,f,g);var y=this.transform,m=this.invTransform;if(y&&(a.copy(e),a.applyTransform(y),e=a,r(t,m)),u instanceof Array)l=e.x+n(u[0],e.width),c=e.y+n(u[1],e.height),f=f||"left",g=g||"top";else{var x=o.adjustTextPositionOnRect(u,e,i,d);l=x.x,c=x.y,f=f||x.textAlign,g=g||x.textBaseline}if(t.textAlign=f,v){switch(v){case"middle":c-=i.height/2;break;case"bottom":c-=i.height}t.textBaseline="top"}else t.textBaseline=g;var _=s.textFill,w=s.textStroke;_&&(t.fillStyle=_),w&&(t.strokeStyle=w),t.font=p,t.shadowColor=s.textShadowColor,t.shadowBlur=s.textShadowBlur,t.shadowOffsetX=s.textShadowOffsetX,t.shadowOffsetY=s.textShadowOffsetY;for(var b=h.split("\n"),P=0;P<b.length;P++)_&&t.fillText(b[P],l,c),w&&t.strokeText(b[P],l,c),c+=i.lineHeight;y&&r(t,y)}}},t.exports=h},function(t,e,i){function n(t,e){var i=t+":"+e;if(l[i])return l[i];for(var n=(t+"").split("\n"),r=0,o=0,s=n.length;o<s;o++)r=Math.max(p.measureText(n[o],e).width,r);return c>u&&(c=0,l={}),c++,l[i]=r,r}function r(t,e,i,r){var o=((t||"")+"").split("\n").length,s=n(t,e),a=n("",e),h=o*a,l=new f(0,0,s,h);switch(l.lineHeight=a,r){case"bottom":case"alphabetic":l.y-=a;break;case"middle":l.y-=a/2}switch(i){case"end":case"right":l.x-=l.width;break;case"center":l.x-=l.width/2}return l}function o(t,e,i,n){var r=e.x,o=e.y,s=e.height,a=e.width,h=i.height,l=s/2-h/2,c="left";switch(t){case"left":r-=n,o+=l,c="right";break;case"right":r+=n+a,o+=l,c="left";break;case"top":r+=a/2,o-=n+h,c="center";break;case"bottom":r+=a/2,o+=s+n,c="center";break;case"inside":r+=a/2,o+=l,c="center";break;case"insideLeft":r+=n,o+=l,c="left";break;case"insideRight":r+=a-n,o+=l,c="right";break;case"insideTop":r+=a/2,o+=n,c="center";break;case"insideBottom":r+=a/2,o+=s-h-n,c="center";break;case"insideTopLeft":r+=n,o+=n,c="left";break;case"insideTopRight":r+=a-n,o+=n,c="right";break;case"insideBottomLeft":r+=n,o+=s-h-n;break;case"insideBottomRight":r+=a-n,o+=s-h-n,c="right"}return{x:r,y:o,textAlign:c,textBaseline:"top"}}function s(t,e,i,r){if(!i)return"";r=d.defaults({ellipsis:"...",minCharacters:3,maxIterations:3,cnCharWidth:n("",e),ascCharWidth:n("a",e)},r,!0),i-=n(r.ellipsis);for(var o=(t+"").split("\n"),s=0,h=o.length;s<h;s++)o[s]=a(o[s],e,i,r);return o.join("\n")}function a(t,e,i,r){for(var o=0;;o++){var s=n(t,e);if(s<i||o>=r.maxIterations){t+=r.ellipsis;break}var a=0===o?h(t,i,r):Math.floor(t.length*i/s);if(a<r.minCharacters){t="";break}t=t.substr(0,a)}return t}function h(t,e,i){for(var n=0,r=0,o=t.length;r<o&&n<e;r++){var s=t.charCodeAt(r);n+=0<=s&&s<=127?i.ascCharWidth:i.cnCharWidth}return r}var l={},c=0,u=5e3,d=i(4),f=i(25),p={getWidth:n,getBoundingRect:r,adjustTextPositionOnRect:o,ellipsis:s,measureText:function(t,e){var i=d.getContext();return i.font=e,i.measureText(t)}};t.exports=p},function(t,e,i){"use strict";function n(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}var r=i(15),o=i(14),s=r.applyTransform,a=Math.min,h=Math.abs,l=Math.max;n.prototype={constructor:n,union:function(t){var e=a(t.x,this.x),i=a(t.y,this.y);this.width=l(t.x+t.width,this.x+this.width)-e,this.height=l(t.y+t.height,this.y+this.height)-i,this.x=e,this.y=i},applyTransform:function(){var t=[],e=[];return function(i){i&&(t[0]=this.x,t[1]=this.y,e[0]=this.x+this.width,e[1]=this.y+this.height,s(t,t,i),s(e,e,i),this.x=a(t[0],e[0]),this.y=a(t[1],e[1]),this.width=h(e[0]-t[0]),this.height=h(e[1]-t[1]))}}(),calculateTransform:function(t){var e=this,i=t.width/e.width,n=t.height/e.height,r=o.create();return o.translate(r,r,[-e.x,-e.y]),o.scale(r,r,[i,n]),o.translate(r,r,[t.x,t.y]),r},intersect:function(t){var e=this,i=e.x,n=e.x+e.width,r=e.y,o=e.y+e.height,s=t.x,a=t.x+t.width,h=t.y,l=t.y+t.height;return!(n<s||a<i||o<h||l<r)},contain:function(t,e){var i=this;return t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height},clone:function(){return new n(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}},t.exports=n},function(t,e,i){"use strict";var n=i(27),r=i(15),o=i(28),s=i(25),a={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},h=[],l=[],c=[],u=[],d=Math.min,f=Math.max,p=Math.cos,g=Math.sin,v=Math.sqrt,y="undefined"!=typeof Float32Array,m=function(){this.data=[],this._len=0,this._ctx=null,this._xi=0,this._yi=0,this._x0=0,this._y0=0};m.prototype={constructor:m,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,getContext:function(){return this._ctx},beginPath:function(t){return this._ctx=t,t&&t.beginPath(),this._len=0,this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(a.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){return this.addData(a.L,t,e),this._ctx&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),this._xi=t,this._yi=e,this},bezierCurveTo:function(t,e,i,n,r,o){return this.addData(a.C,t,e,i,n,r,o),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,i,n,r,o):this._ctx.bezierCurveTo(t,e,i,n,r,o)),this._xi=r,this._yi=o,this},quadraticCurveTo:function(t,e,i,n){return this.addData(a.Q,t,e,i,n),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,i,n):this._ctx.quadraticCurveTo(t,e,i,n)),this._xi=i,this._yi=n,this},arc:function(t,e,i,n,r,o){return this.addData(a.A,t,e,i,i,n,r-n,0,o?0:1),this._ctx&&this._ctx.arc(t,e,i,n,r,o),this._xi=p(r)*i+t,this._xi=g(r)*i+t,this},arcTo:function(t,e,i,n,r){return this._ctx&&this._ctx.arcTo(t,e,i,n,r),this},rect:function(t,e,i,n){return this._ctx&&this._ctx.rect(t,e,i,n),this.addData(a.R,t,e,i,n),this},closePath:function(){this.addData(a.Z);var t=this._ctx,e=this._x0,i=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,i),t.closePath()),this._xi=e,this._yi=i,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,i=0;i<t.length;i++)e+=t[i];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;
this.data&&this.data.length==e||!y||(this.data=new Float32Array(e));for(var i=0;i<e;i++)this.data[i]=t[i];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,i=0,n=this._len,r=0;r<e;r++)i+=t[r].len();y&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(var r=0;r<e;r++)for(var o=t[r].data,s=0;s<o.length;s++)this.data[n++]=o[s];this._len=n},addData:function(t){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var i=0;i<arguments.length;i++)e[this._len++]=arguments[i];this._prevCmd=t},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var i,n,r=this._dashSum,o=this._dashOffset,s=this._lineDash,a=this._ctx,h=this._xi,l=this._yi,c=t-h,u=e-l,p=v(c*c+u*u),g=h,y=l,m=s.length;for(c/=p,u/=p,o<0&&(o=r+o),o%=r,g-=o*c,y-=o*u;c>=0&&g<=t||c<0&&g>t;)n=this._dashIdx,i=s[n],g+=c*i,y+=u*i,this._dashIdx=(n+1)%m,c>0&&g<h||c<0&&g>h||a[n%2?"moveTo":"lineTo"](c>=0?d(g,t):f(g,t),u>=0?d(y,e):f(y,e));c=g-t,u=y-e,this._dashOffset=-v(c*c+u*u)},_dashedBezierTo:function(t,e,i,r,o,s){var a,h,l,c,u,d=this._dashSum,f=this._dashOffset,p=this._lineDash,g=this._ctx,y=this._xi,m=this._yi,x=n.cubicAt,_=0,w=this._dashIdx,b=p.length,P=0;for(f<0&&(f=d+f),f%=d,a=0;a<1;a+=.1)h=x(y,t,i,o,a+.1)-x(y,t,i,o,a),l=x(m,e,r,s,a+.1)-x(m,e,r,s,a),_+=v(h*h+l*l);for(;w<b&&(P+=p[w],!(P>f));w++);for(a=(P-f)/_;a<=1;)c=x(y,t,i,o,a),u=x(m,e,r,s,a),w%2?g.moveTo(c,u):g.lineTo(c,u),a+=p[w]/_,w=(w+1)%b;w%2!==0&&g.lineTo(o,s),h=o-c,l=s-u,this._dashOffset=-v(h*h+l*l)},_dashedQuadraticTo:function(t,e,i,n){var r=i,o=n;i=(i+2*t)/3,n=(n+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,i,n,r,o)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,y&&(this.data=new Float32Array(t)))},getBoundingRect:function(){h[0]=h[1]=c[0]=c[1]=Number.MAX_VALUE,l[0]=l[1]=u[0]=u[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,i=0,n=0,d=0,f=0;f<t.length;){var v=t[f++];switch(1==f&&(e=t[f],i=t[f+1],n=e,d=i),v){case a.M:n=t[f++],d=t[f++],e=n,i=d,c[0]=n,c[1]=d,u[0]=n,u[1]=d;break;case a.L:o.fromLine(e,i,t[f],t[f+1],c,u),e=t[f++],i=t[f++];break;case a.C:o.fromCubic(e,i,t[f++],t[f++],t[f++],t[f++],t[f],t[f+1],c,u),e=t[f++],i=t[f++];break;case a.Q:o.fromQuadratic(e,i,t[f++],t[f++],t[f],t[f+1],c,u),e=t[f++],i=t[f++];break;case a.A:var y=t[f++],m=t[f++],x=t[f++],_=t[f++],w=t[f++],b=t[f++]+w,P=(t[f++],1-t[f++]);1==f&&(n=p(w)*x+y,d=g(w)*_+m),o.fromArc(y,m,x,_,w,b,P,c,u),e=p(b)*x+y,i=g(b)*_+m;break;case a.R:n=e=t[f++],d=i=t[f++];var A=t[f++],T=t[f++];o.fromLine(n,d,n+A,d+T,c,u);break;case a.Z:e=n,i=d}r.min(h,h,c),r.max(l,l,u)}return 0===f&&(h[0]=h[1]=l[0]=l[1]=0),new s(h[0],h[1],l[0]-h[0],l[1]-h[1])},rebuildPath:function(t){for(var e=this.data,i=0;i<this._len;){var n=e[i++];switch(n){case a.M:t.moveTo(e[i++],e[i++]);break;case a.L:t.lineTo(e[i++],e[i++]);break;case a.C:t.bezierCurveTo(e[i++],e[i++],e[i++],e[i++],e[i++],e[i++]);break;case a.Q:t.quadraticCurveTo(e[i++],e[i++],e[i++],e[i++]);break;case a.A:var r=e[i++],o=e[i++],s=e[i++],h=e[i++],l=e[i++],c=e[i++],u=e[i++],d=e[i++],f=s>h?s:h,p=s>h?1:s/h,g=s>h?h/s:1,v=Math.abs(s-h)>.001;v?(t.translate(r,o),t.rotate(u),t.scale(p,g),t.arc(0,0,f,l,l+c,1-d),t.scale(1/p,1/g),t.rotate(-u),t.translate(-r,-o)):t.arc(r,o,f,l,l+c,1-d);break;case a.R:t.rect(e[i++],e[i++],e[i++],e[i++]);break;case a.Z:t.closePath()}}}},m.CMD=a,t.exports=m},function(t,e,i){"use strict";function n(t){return t>-b&&t<b}function r(t){return t>b||t<-b}function o(t,e,i,n,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*n+3*o*i)}function s(t,e,i,n,r){var o=1-r;return 3*(((e-t)*o+2*(i-e)*r)*o+(n-i)*r*r)}function a(t,e,i,r,o,s){var a=r+3*(e-i)-t,h=3*(i-2*e+t),l=3*(e-t),c=t-o,u=h*h-3*a*l,d=h*l-9*a*c,f=l*l-3*h*c,p=0;if(n(u)&&n(d))if(n(h))s[0]=0;else{var g=-l/h;g>=0&&g<=1&&(s[p++]=g)}else{var v=d*d-4*u*f;if(n(v)){var y=d/u,g=-h/a+y,m=-y/2;g>=0&&g<=1&&(s[p++]=g),m>=0&&m<=1&&(s[p++]=m)}else if(v>0){var x=w(v),b=u*h+1.5*a*(-d+x),T=u*h+1.5*a*(-d-x);b=b<0?-_(-b,A):_(b,A),T=T<0?-_(-T,A):_(T,A);var g=(-h-(b+T))/(3*a);g>=0&&g<=1&&(s[p++]=g)}else{var R=(2*u*h-3*a*d)/(2*w(u*u*u)),S=Math.acos(R)/3,L=w(u),N=Math.cos(S),g=(-h-2*L*N)/(3*a),m=(-h+L*(N+P*Math.sin(S)))/(3*a),C=(-h+L*(N-P*Math.sin(S)))/(3*a);g>=0&&g<=1&&(s[p++]=g),m>=0&&m<=1&&(s[p++]=m),C>=0&&C<=1&&(s[p++]=C)}}return p}function h(t,e,i,o,s){var a=6*i-12*e+6*t,h=9*e+3*o-3*t-9*i,l=3*e-3*t,c=0;if(n(h)){if(r(a)){var u=-l/a;u>=0&&u<=1&&(s[c++]=u)}}else{var d=a*a-4*h*l;if(n(d))s[0]=-a/(2*h);else if(d>0){var f=w(d),u=(-a+f)/(2*h),p=(-a-f)/(2*h);u>=0&&u<=1&&(s[c++]=u),p>=0&&p<=1&&(s[c++]=p)}}return c}function l(t,e,i,n,r,o){var s=(e-t)*r+t,a=(i-e)*r+e,h=(n-i)*r+i,l=(a-s)*r+s,c=(h-a)*r+a,u=(c-l)*r+l;o[0]=t,o[1]=s,o[2]=l,o[3]=u,o[4]=u,o[5]=c,o[6]=h,o[7]=n}function c(t,e,i,n,r,s,a,h,l,c,u){var d,f,p,g,v,y=.005,m=1/0;T[0]=l,T[1]=c;for(var _=0;_<1;_+=.05)R[0]=o(t,i,r,a,_),R[1]=o(e,n,s,h,_),g=x(T,R),g<m&&(d=_,m=g);m=1/0;for(var P=0;P<32&&!(y<b);P++)f=d-y,p=d+y,R[0]=o(t,i,r,a,f),R[1]=o(e,n,s,h,f),g=x(R,T),f>=0&&g<m?(d=f,m=g):(S[0]=o(t,i,r,a,p),S[1]=o(e,n,s,h,p),v=x(S,T),p<=1&&v<m?(d=p,m=v):y*=.5);return u&&(u[0]=o(t,i,r,a,d),u[1]=o(e,n,s,h,d)),w(m)}function u(t,e,i,n){var r=1-n;return r*(r*t+2*n*e)+n*n*i}function d(t,e,i,n){return 2*((1-n)*(e-t)+n*(i-e))}function f(t,e,i,o,s){var a=t-2*e+i,h=2*(e-t),l=t-o,c=0;if(n(a)){if(r(h)){var u=-l/h;u>=0&&u<=1&&(s[c++]=u)}}else{var d=h*h-4*a*l;if(n(d)){var u=-h/(2*a);u>=0&&u<=1&&(s[c++]=u)}else if(d>0){var f=w(d),u=(-h+f)/(2*a),p=(-h-f)/(2*a);u>=0&&u<=1&&(s[c++]=u),p>=0&&p<=1&&(s[c++]=p)}}return c}function p(t,e,i){var n=t+i-2*e;return 0===n?.5:(t-e)/n}function g(t,e,i,n,r){var o=(e-t)*n+t,s=(i-e)*n+e,a=(s-o)*n+o;r[0]=t,r[1]=o,r[2]=a,r[3]=a,r[4]=s,r[5]=i}function v(t,e,i,n,r,o,s,a,h){var l,c=.005,d=1/0;T[0]=s,T[1]=a;for(var f=0;f<1;f+=.05){R[0]=u(t,i,r,f),R[1]=u(e,n,o,f);var p=x(T,R);p<d&&(l=f,d=p)}d=1/0;for(var g=0;g<32&&!(c<b);g++){var v=l-c,y=l+c;R[0]=u(t,i,r,v),R[1]=u(e,n,o,v);var p=x(R,T);if(v>=0&&p<d)l=v,d=p;else{S[0]=u(t,i,r,y),S[1]=u(e,n,o,y);var m=x(S,T);y<=1&&m<d?(l=y,d=m):c*=.5}}return h&&(h[0]=u(t,i,r,l),h[1]=u(e,n,o,l)),w(d)}var y=i(15),m=y.create,x=y.distSquare,_=Math.pow,w=Math.sqrt,b=1e-4,P=w(3),A=1/3,T=m(),R=m(),S=m();t.exports={cubicAt:o,cubicDerivativeAt:s,cubicRootAt:a,cubicExtrema:h,cubicSubdivide:l,cubicProjectPoint:c,quadraticAt:u,quadraticDerivativeAt:d,quadraticRootAt:f,quadraticExtremum:p,quadraticSubdivide:g,quadraticProjectPoint:v}},function(t,e,i){var n=i(15),r=i(27),o={},s=Math.min,a=Math.max,h=Math.sin,l=Math.cos,c=n.create(),u=n.create(),d=n.create(),f=2*Math.PI;o.fromPoints=function(t,e,i){if(0!==t.length){var n,r=t[0],o=r[0],h=r[0],l=r[1],c=r[1];for(n=1;n<t.length;n++)r=t[n],o=s(o,r[0]),h=a(h,r[0]),l=s(l,r[1]),c=a(c,r[1]);e[0]=o,e[1]=l,i[0]=h,i[1]=c}},o.fromLine=function(t,e,i,n,r,o){r[0]=s(t,i),r[1]=s(e,n),o[0]=a(t,i),o[1]=a(e,n)},o.fromCubic=function(t,e,i,n,o,h,l,c,u,d){var f,p,g,v,y,m=[],x=[],_=r.cubicExtrema,w=r.cubicAt,b=_(t,i,o,l,m);for(y=0;y<b;y++)m[y]=w(t,i,o,l,m[y]);for(b=_(e,n,h,c,x),y=0;y<b;y++)x[y]=w(e,n,h,c,x[y]);m.push(t,l),x.push(e,c),f=s.apply(null,m),p=a.apply(null,m),g=s.apply(null,x),v=a.apply(null,x),u[0]=f,u[1]=g,d[0]=p,d[1]=v},o.fromQuadratic=function(t,e,i,n,o,h,l,c){var u=r.quadraticExtremum,d=r.quadraticAt,f=a(s(u(t,i,o),1),0),p=a(s(u(e,n,h),1),0),g=d(t,i,o,f),v=d(e,n,h,p);l[0]=s(t,o,g),l[1]=s(e,h,v),c[0]=a(t,o,g),c[1]=a(e,h,v)},o.fromArc=function(t,e,i,r,o,s,a,p,g){var v=n.min,y=n.max,m=Math.abs(o-s);if(m%f<1e-4&&m>1e-4)return p[0]=t-i,p[1]=e-r,g[0]=t+i,void(g[1]=e+r);if(c[0]=l(o)*i+t,c[1]=h(o)*r+e,u[0]=l(s)*i+t,u[1]=h(s)*r+e,v(p,c,u),y(g,c,u),o%=f,o<0&&(o+=f),s%=f,s<0&&(s+=f),o>s&&!a?s+=f:o<s&&a&&(o+=f),a){var x=s;s=o,o=x}for(var _=0;_<s;_+=Math.PI/2)_>o&&(d[0]=l(_)*i+t,d[1]=h(_)*r+e,v(p,d,p),y(g,d,g))},t.exports=o},function(t,e,i){"use strict";function n(t,e){return Math.abs(t-e)<x}function r(){var t=w[0];w[0]=w[1],w[1]=t}function o(t,e,i,n,o,s,a,h,l,c){if(c>e&&c>n&&c>s&&c>h||c<e&&c<n&&c<s&&c<h)return 0;var u=g.cubicRootAt(e,n,s,h,c,_);if(0===u)return 0;for(var d,f,p=0,v=-1,y=0;y<u;y++){var m=_[y],x=g.cubicAt(t,i,o,a,m);x<l||(v<0&&(v=g.cubicExtrema(e,n,s,h,w),w[1]<w[0]&&v>1&&r(),d=g.cubicAt(e,n,s,h,w[0]),v>1&&(f=g.cubicAt(e,n,s,h,w[1]))),p+=2==v?m<w[0]?d<e?1:-1:m<w[1]?f<d?1:-1:h<f?1:-1:m<w[0]?d<e?1:-1:h<d?1:-1)}return p}function s(t,e,i,n,r,o,s,a){if(a>e&&a>n&&a>o||a<e&&a<n&&a<o)return 0;var h=g.quadraticRootAt(e,n,o,a,_);if(0===h)return 0;var l=g.quadraticExtremum(e,n,o);if(l>=0&&l<=1){for(var c=0,u=g.quadraticAt(e,n,o,l),d=0;d<h;d++){var f=g.quadraticAt(t,i,r,_[d]);f>s||(c+=_[d]<l?u<e?1:-1:o<u?1:-1)}return c}var f=g.quadraticAt(t,i,r,_[0]);return f>s?0:o<e?1:-1}function a(t,e,i,n,r,o,s,a){if(a-=e,a>i||a<-i)return 0;var h=Math.sqrt(i*i-a*a);_[0]=-h,_[1]=h;var l=Math.abs(n-r);if(l<1e-4)return 0;if(l%m<1e-4){n=0,r=m;var c=o?1:-1;return s>=_[0]+t&&s<=_[1]+t?c:0}if(o){var h=n;n=p(r),r=p(h)}else n=p(n),r=p(r);n>r&&(r+=m);for(var u=0,d=0;d<2;d++){var f=_[d];if(f+t>s){var g=Math.atan2(a,f),c=o?1:-1;g<0&&(g=m+g),(g>=n&&g<=r||g+m>=n&&g+m<=r)&&(g>Math.PI/2&&g<1.5*Math.PI&&(c=-c),u+=c)}}return u}function h(t,e,i,r,h){for(var c=0,p=0,g=0,m=0,x=0,_=0;_<t.length;){var w=t[_++];if(w===l.M&&_>1&&(i||(c+=v(p,g,m,x,r,h)),0!==c))return!0;switch(1==_&&(p=t[_],g=t[_+1],m=p,x=g),w){case l.M:m=t[_++],x=t[_++],p=m,g=x;break;case l.L:if(i){if(y(p,g,t[_],t[_+1],e,r,h))return!0}else c+=v(p,g,t[_],t[_+1],r,h)||0;p=t[_++],g=t[_++];break;case l.C:if(i){if(u.containStroke(p,g,t[_++],t[_++],t[_++],t[_++],t[_],t[_+1],e,r,h))return!0}else c+=o(p,g,t[_++],t[_++],t[_++],t[_++],t[_],t[_+1],r,h)||0;p=t[_++],g=t[_++];break;case l.Q:if(i){if(d.containStroke(p,g,t[_++],t[_++],t[_],t[_+1],e,r,h))return!0}else c+=s(p,g,t[_++],t[_++],t[_],t[_+1],r,h)||0;p=t[_++],g=t[_++];break;case l.A:var b=t[_++],P=t[_++],A=t[_++],T=t[_++],R=t[_++],S=t[_++],L=(t[_++],1-t[_++]),N=Math.cos(R)*A+b,C=Math.sin(R)*T+P;_>1?c+=v(p,g,N,C,r,h):(m=N,x=C);var M=(r-b)*T/A+b;if(i){if(f.containStroke(b,P,T,R,R+S,L,e,M,h))return!0}else c+=a(b,P,T,R,R+S,L,M,h);p=Math.cos(R+S)*A+b,g=Math.sin(R+S)*T+P;break;case l.R:m=p=t[_++],x=g=t[_++];var E=t[_++],k=t[_++],N=m+E,C=x+k;if(i){if(y(m,x,N,x,e,r,h)||y(N,x,N,C,e,r,h)||y(N,C,m,C,e,r,h)||y(m,C,N,C,e,r,h))return!0}else c+=v(N,x,N,C,r,h),c+=v(m,C,m,x,r,h);break;case l.Z:if(i){if(y(p,g,m,x,e,r,h))return!0}else if(c+=v(p,g,m,x,r,h),0!==c)return!0;p=m,g=x}}return i||n(g,x)||(c+=v(p,g,m,x,r,h)||0),0!==c}var l=i(26).CMD,c=i(30),u=i(31),d=i(32),f=i(33),p=i(34).normalizeRadian,g=i(27),v=i(35),y=c.containStroke,m=2*Math.PI,x=1e-4,_=[-1,-1,-1],w=[-1,-1];t.exports={contain:function(t,e,i){return h(t,0,!1,e,i)},containStroke:function(t,e,i,n){return h(t,e,!0,i,n)}}},function(t,e){t.exports={containStroke:function(t,e,i,n,r,o,s){if(0===r)return!1;var a=r,h=0,l=t;if(s>e+a&&s>n+a||s<e-a&&s<n-a||o>t+a&&o>i+a||o<t-a&&o<i-a)return!1;if(t===i)return Math.abs(o-t)<=a/2;h=(e-n)/(t-i),l=(t*n-i*e)/(t-i);var c=h*o-s+l,u=c*c/(h*h+1);return u<=a/2*a/2}}},function(t,e,i){var n=i(27);t.exports={containStroke:function(t,e,i,r,o,s,a,h,l,c,u){if(0===l)return!1;var d=l;if(u>e+d&&u>r+d&&u>s+d&&u>h+d||u<e-d&&u<r-d&&u<s-d&&u<h-d||c>t+d&&c>i+d&&c>o+d&&c>a+d||c<t-d&&c<i-d&&c<o-d&&c<a-d)return!1;var f=n.cubicProjectPoint(t,e,i,r,o,s,a,h,c,u,null);return f<=d/2}}},function(t,e,i){var n=i(27);t.exports={containStroke:function(t,e,i,r,o,s,a,h,l){if(0===a)return!1;var c=a;if(l>e+c&&l>r+c&&l>s+c||l<e-c&&l<r-c&&l<s-c||h>t+c&&h>i+c&&h>o+c||h<t-c&&h<i-c&&h<o-c)return!1;var u=n.quadraticProjectPoint(t,e,i,r,o,s,h,l,null);return u<=c/2}}},function(t,e,i){var n=i(34).normalizeRadian,r=2*Math.PI;t.exports={containStroke:function(t,e,i,o,s,a,h,l,c){if(0===h)return!1;var u=h;l-=t,c-=e;var d=Math.sqrt(l*l+c*c);if(d-u>i||d+u<i)return!1;if(Math.abs(o-s)%r<1e-4)return!0;if(a){var f=o;o=n(s),s=n(f)}else o=n(o),s=n(s);o>s&&(s+=r);var p=Math.atan2(c,l);return p<0&&(p+=r),p>=o&&p<=s||p+r>=o&&p+r<=s}}},function(t,e){var i=2*Math.PI;t.exports={normalizeRadian:function(t){return t%=i,t<0&&(t+=i),t}}},function(t,e){t.exports=function(t,e,i,n,r,o){if(o>e&&o>n||o<e&&o<n)return 0;if(n===e)return 0;var s=n<e?1:-1,a=(o-e)/(n-e),h=a*(i-t)+t;return h>r?s:0}},function(t,e,i){function n(t,e){var i,n,o,c,u,d,f=t.data,p=r.M,g=r.C,v=r.L,y=r.R,m=r.A,x=r.Q;for(o=0,c=0;o<f.length;){switch(i=f[o++],c=o,n=0,i){case p:n=1;break;case v:n=1;break;case g:n=3;break;case x:n=2;break;case m:var _=e[4],w=e[5],b=h(e[0]*e[0]+e[1]*e[1]),P=h(e[2]*e[2]+e[3]*e[3]),A=l(-e[1]/P,e[0]/b);f[o++]+=_,f[o++]+=w,f[o++]*=b,f[o++]*=P,f[o++]+=A,f[o++]+=A,o+=2,c=o;break;case y:d[0]=f[o++],d[1]=f[o++],s(d,d,e),f[c++]=d[0],f[c++]=d[1],d[0]+=f[o++],d[1]+=f[o++],s(d,d,e),f[c++]=d[0],f[c++]=d[1]}for(u=0;u<n;u++){var d=a[u];d[0]=f[o++],d[1]=f[o++],s(d,d,e),f[c++]=d[0],f[c++]=d[1]}}}var r=i(26).CMD,o=i(15),s=o.applyTransform,a=[[],[],[]],h=Math.sqrt,l=Math.atan2;t.exports=n},function(t,e,i){var n=i(4),r=i(10),o=i(25),s=function(t){t=t||{},r.call(this,t);for(var e in t)this[e]=t[e];this._children=[],this.__storage=null,this.__dirty=!0};s.prototype={constructor:s,type:"group",children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,i=0;i<e.length;i++)if(e[i].name===t)return e[i]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var i=this._children,n=i.indexOf(e);n>=0&&(i.splice(n,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__storage,i=this.__zr;e&&e!==t.__storage&&(e.addToMap(t),t instanceof s&&t.addChildrenToStorage(e)),i&&i.refresh()},remove:function(t){var e=this.__zr,i=this.__storage,r=this._children,o=n.indexOf(r,t);return o<0?this:(r.splice(o,1),t.parent=null,i&&(i.delFromMap(t.id),t instanceof s&&t.delChildrenFromStorage(i)),e&&e.refresh(),this)},removeAll:function(){var t,e,i=this._children,n=this.__storage;for(e=0;e<i.length;e++)t=i[e],n&&(n.delFromMap(t.id),t instanceof s&&t.delChildrenFromStorage(n)),t.parent=null;return i.length=0,this},eachChild:function(t,e){for(var i=this._children,n=0;n<i.length;n++){var r=i[n];t.call(e,r,n)}return this},traverse:function(t,e){for(var i=0;i<this._children.length;i++){var n=this._children[i];t.call(e,n),"group"===n.type&&n.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.addToMap(i),i instanceof s&&i.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.delFromMap(i.id),i instanceof s&&i.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,i=new o(0,0,0,0),n=t||this._children,r=[],s=0;s<n.length;s++){var a=n[s];if(!a.ignore&&!a.invisible){var h=a.getBoundingRect(),l=a.getLocalTransform(r);l?(i.copy(h),i.applyTransform(l),e=e||i.clone(),e.union(i)):(e=e||h.clone(),e.union(h))}}return e||i}},n.inherits(s,r),t.exports=s},function(t,e,i){var n=i(8),r=i(25),o=i(4),s=i(39),a=i(40),h=new a(50),l=function(t){n.call(this,t)};l.prototype={constructor:l,type:"image",brush:function(t){var e,i=this.style,n=i.image;if(e="string"==typeof n?this._image:n,!e&&n){var r=h.get(n);if(!r)return e=new Image,e.onload=function(){e.onload=null;for(var t=0;t<r.pending.length;t++)r.pending[t].dirty()},r={image:e,pending:[this]},e.src=n,h.put(n,r),void(this._image=e);if(e=r.image,this._image=e,!e.width||!e.height)return void r.pending.push(this)}if(e){var o=i.width||e.width,a=i.height||e.height,l=i.x||0,c=i.y||0;if(!e.width||!e.height)return;if(t.save(),i.bind(t),this.setTransform(t),i.r&&(t.beginPath(),s.buildPath(t,i),t.clip()),i.sWidth&&i.sHeight){var u=i.sx||0,d=i.sy||0;t.drawImage(e,u,d,i.sWidth,i.sHeight,l,c,o,a)}else if(i.sx&&i.sy){var u=i.sx,d=i.sy,f=o-u,p=a-d;t.drawImage(e,u,d,f,p,l,c,o,a)}else t.drawImage(e,l,c,o,a);null==i.width&&(i.width=o),null==i.height&&(i.height=a),null!=i.text&&this.drawRectText(t,this.getBoundingRect()),t.restore()}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new r(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},o.inherits(l,n),t.exports=l},function(t,e){t.exports={buildPath:function(t,e){var i,n,r,o,s=e.x,a=e.y,h=e.width,l=e.height,c=e.r;h<0&&(s+=h,h=-h),l<0&&(a+=l,l=-l),"number"==typeof c?i=n=r=o=c:c instanceof Array?1===c.length?i=n=r=o=c[0]:2===c.length?(i=r=c[0],n=o=c[1]):3===c.length?(i=c[0],n=o=c[1],r=c[2]):(i=c[0],n=c[1],r=c[2],o=c[3]):i=n=r=o=0;var u;i+n>h&&(u=i+n,i*=h/u,n*=h/u),r+o>h&&(u=r+o,r*=h/u,o*=h/u),n+r>l&&(u=n+r,n*=l/u,r*=l/u),i+o>l&&(u=i+o,i*=l/u,o*=l/u),t.moveTo(s+i,a),t.lineTo(s+h-n,a),0!==n&&t.quadraticCurveTo(s+h,a,s+h,a+n),t.lineTo(s+h,a+l-r),0!==r&&t.quadraticCurveTo(s+h,a+l,s+h-r,a+l),t.lineTo(s+o,a+l),0!==o&&t.quadraticCurveTo(s,a+l,s,a+l-o),t.lineTo(s,a+i),0!==i&&t.quadraticCurveTo(s,a,s+i,a)}}},function(t,e){var i=function(){this.head=null,this.tail=null,this._len=0},n=i.prototype;n.insert=function(t){var e=new r(t);return this.insertEntry(e),e},n.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,this.tail=t):this.head=this.tail=t,this._len++},n.remove=function(t){var e=t.prev,i=t.next;e?e.next=i:this.head=i,i?i.prev=e:this.tail=e,t.next=t.prev=null,this._len--},n.len=function(){return this._len};var r=function(t){this.value=t,this.next,this.prev},o=function(t){this._list=new i,this._map={},this._maxSize=t||10},s=o.prototype;s.put=function(t,e){var i=this._list,n=this._map;if(null==n[t]){var r=i.len();if(r>=this._maxSize&&r>0){var o=i.head;i.remove(o),delete n[o.key]}var s=i.insert(e);s.key=t,n[t]=s}},s.get=function(t){var e=this._map[t],i=this._list;if(null!=e)return e!==i.tail&&(i.remove(e),i.insertEntry(e)),e.value},s.clear=function(){this._list.clear(),this._map={}},t.exports=o},function(t,e,i){var n=i(8),r=i(4),o=i(24),s=function(t){n.call(this,t)};s.prototype={constructor:s,type:"text",brush:function(t){var e=this.style,i=e.x||0,n=e.y||0,r=e.text,s=e.fill,a=e.stroke;if(null!=r&&(r+=""),r){if(t.save(),this.style.bind(t),this.setTransform(t),s&&(t.fillStyle=s),a&&(t.strokeStyle=a),t.font=e.textFont||e.font,t.textAlign=e.textAlign,e.textVerticalAlign){var h=o.getBoundingRect(r,t.font,e.textAlign,"top");switch(t.textBaseline="top",e.textVerticalAlign){case"middle":n-=h.height/2;break;case"bottom":n-=h.height}}else t.textBaseline=e.textBaseline;for(var l=o.measureText("",t.font).width,c=r.split("\n"),u=0;u<c.length;u++)s&&t.fillText(c[u],i,n),a&&t.strokeText(c[u],i,n),n+=l;t.restore()}},getBoundingRect:function(){if(!this._rect){var t=this.style,e=o.getBoundingRect(t.text+"",t.textFont||t.font,t.textAlign,t.textBaseline);e.x+=t.x||0,e.y+=t.y||0,this._rect=e}return this._rect}},r.inherits(s,n),t.exports=s},function(t,e,i){"use strict";t.exports=i(7).extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e){t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}})},function(t,e,i){t.exports=i(7).extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=Math.max(e.r0||0,0),o=Math.max(e.r,0),s=e.startAngle,a=e.endAngle,h=e.clockwise,l=Math.cos(s),c=Math.sin(s);t.moveTo(l*r+i,c*r+n),t.lineTo(l*o+i,c*o+n),t.arc(i,n,o,s,a,!h),t.lineTo(Math.cos(a)*r+i,Math.sin(a)*r+n),0!==r&&t.arc(i,n,r,a,s,h),t.closePath()}})},function(t,e,i){t.exports=i(7).extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=2*Math.PI;t.moveTo(i+e.r,n),t.arc(i,n,e.r,0,r,!1),t.moveTo(i+e.r0,n),t.arc(i,n,e.r0,0,r,!0)}})},function(t,e,i){var n=i(46);t.exports=i(7).extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){n.buildPath(t,e,!0)}})},function(t,e,i){var n=i(47),r=i(48);t.exports={buildPath:function(t,e,i){var o=e.points,s=e.smooth;if(o&&o.length>=2){if(s&&"spline"!==s){var a=r(o,s,i,e.smoothConstraint);t.moveTo(o[0][0],o[0][1]);for(var h=o.length,l=0;l<(i?h:h-1);l++){var c=a[2*l],u=a[2*l+1],d=o[(l+1)%h];t.bezierCurveTo(c[0],c[1],u[0],u[1],d[0],d[1])}}else{"spline"===s&&(o=n(o,i)),t.moveTo(o[0][0],o[0][1]);for(var l=1,f=o.length;l<f;l++)t.lineTo(o[l][0],o[l][1])}i&&t.closePath()}}}},function(t,e,i){function n(t,e,i,n,r,o,s){var a=.5*(i-t),h=.5*(n-e);return(2*(e-i)+a+h)*s+(-3*(e-i)-2*a-h)*o+a*r+e}var r=i(15);t.exports=function(t,e){for(var i=t.length,o=[],s=0,a=1;a<i;a++)s+=r.distance(t[a-1],t[a]);var h=s/2;h=h<i?i:h;for(var a=0;a<h;a++){var l,c,u,d=a/(h-1)*(e?i:i-1),f=Math.floor(d),p=d-f,g=t[f%i];e?(l=t[(f-1+i)%i],c=t[(f+1)%i],u=t[(f+2)%i]):(l=t[0===f?f:f-1],c=t[f>i-2?i-1:f+1],u=t[f>i-3?i-1:f+2]);var v=p*p,y=p*v;o.push([n(l[0],g[0],c[0],u[0],p,v,y),n(l[1],g[1],c[1],u[1],p,v,y)])}return o}},function(t,e,i){var n=i(15),r=n.min,o=n.max,s=n.scale,a=n.distance,h=n.add;t.exports=function(t,e,i,l){var c,u,d,f,p=[],g=[],v=[],y=[];if(l){d=[1/0,1/0],f=[-(1/0),-(1/0)];for(var m=0,x=t.length;m<x;m++)r(d,d,t[m]),o(f,f,t[m]);r(d,d,l[0]),o(f,f,l[1])}for(var m=0,x=t.length;m<x;m++){var _=t[m];if(i)c=t[m?m-1:x-1],u=t[(m+1)%x];else{if(0===m||m===x-1){p.push(n.clone(t[m]));continue}c=t[m-1],u=t[m+1]}n.sub(g,u,c),s(g,g,e);var w=a(_,c),b=a(_,u),P=w+b;0!==P&&(w/=P,b/=P),s(v,g,-w),s(y,g,b);var A=h([],_,v),T=h([],_,y);l&&(o(A,A,d),r(A,A,f),o(T,T,d),r(T,T,f)),p.push(A),p.push(T)}return i&&p.push(p.shift()),p}},function(t,e,i){var n=i(46);t.exports=i(7).extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){n.buildPath(t,e,!1)}})},function(t,e,i){var n=i(39);t.exports=i(7).extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.x,r=e.y,o=e.width,s=e.height;e.r?n.buildPath(t,e):t.rect(i,r,o,s),t.closePath()}})},function(t,e,i){t.exports=i(7).extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.x1,n=e.y1,r=e.x2,o=e.y2,s=e.percent;0!==s&&(t.moveTo(i,n),s<1&&(r=i*(1-s)+r*s,o=n*(1-s)+o*s),t.lineTo(r,o))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}})},function(t,e,i){"use strict";var n=i(27),r=n.quadraticSubdivide,o=n.cubicSubdivide,s=n.quadraticAt,a=n.cubicAt,h=[];t.exports=i(7).extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.x1,n=e.y1,s=e.x2,a=e.y2,l=e.cpx1,c=e.cpy1,u=e.cpx2,d=e.cpy2,f=e.percent;0!==f&&(t.moveTo(i,n),null==u||null==d?(f<1&&(r(i,l,s,f,h),l=h[1],s=h[2],r(n,c,a,f,h),c=h[1],a=h[2]),t.quadraticCurveTo(l,c,s,a)):(f<1&&(o(i,l,u,s,f,h),l=h[1],u=h[2],s=h[3],o(n,c,d,a,f,h),c=h[1],d=h[2],a=h[3]),t.bezierCurveTo(l,c,u,d,s,a)))},pointAt:function(t){var e=this.shape,i=e.cpx2,n=e.cpy2;return null===i||null===n?[s(e.x1,e.cpx1,e.x2,t),s(e.y1,e.cpy1,e.y2,t)]:[a(e.x1,e.cpx1,e.cpx1,e.x2,t),a(e.y1,e.cpy1,e.cpy1,e.y2,t)]}})},function(t,e,i){t.exports=i(7).extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.cx,n=e.cy,r=Math.max(e.r,0),o=e.startAngle,s=e.endAngle,a=e.clockwise,h=Math.cos(o),l=Math.sin(o);t.moveTo(h*r+i,l*r+n),t.arc(i,n,r,o,s,!a)}})},function(t,e,i){"use strict";var n=i(4),r=i(5),o=function(t,e,i,n,o){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==i?1:i,this.y2=null==n?0:n,r.call(this,o)};o.prototype={constructor:o,type:"linear",updateCanvasGradient:function(t,e){for(var i=t.getBoundingRect(),n=this.x*i.width+i.x,r=this.x2*i.width+i.x,o=this.y*i.height+i.y,s=this.y2*i.height+i.y,a=e.createLinearGradient(n,o,r,s),h=this.colorStops,l=0;l<h.length;l++)a.addColorStop(h[l].offset,h[l].color);this.canvasGradient=a}},n.inherits(o,r),t.exports=o},function(t,e,i){"use strict";var n=i(4),r=i(5),o=function(t,e,i,n){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==i?.5:i,r.call(this,n)};o.prototype={constructor:o,type:"radial",updateCanvasGradient:function(t,e){for(var i=t.getBoundingRect(),n=i.width,r=i.height,o=Math.min(n,r),s=this.x*n+i.x,a=this.y*r+i.y,h=this.r*o,l=e.createRadialGradient(s,a,0,s,a,h),c=this.colorStops,u=0;u<c.length;u++)l.addColorStop(c[u].offset,c[u].color);this.canvasGradient=l}},n.inherits(o,r),t.exports=o},function(t,e,i){"use strict";function n(t){r.each(o,function(e){this[e]=r.bind(t[e],t)},this)}var r=i(4),o=["getDom","getZr","getWidth","getHeight","dispatchAction","on","off","trigger","getDataURL","getConnectedDataURL","getModel","getOption"];t.exports=n},function(t,e){function i(t,e){this.x=t,this.y=e}i.load=function(t){var e=new i(Number(t.x),Number(t.y));return e},i.loadArray=function(t){for(var e=[],n=0;n<t.length;n++)e.push(i.load(t[n]));return e},i.cloneArray=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].clone());return e},i.prototype={constructor:i,transform:function(t){var e=this.x,i=this.y;this.x=t[0][0]*e+t[0][1]*i+t[0][2],this.y=t[1][0]*e+t[1][1]*i+t[1][2]},equals:function(t){return t instanceof i&&(this.x==t.x&&this.y==t.y)},clone:function(){var t=new i(this.x,this.y);return t},near:function(t,e,i){var n=Math.sqrt(Math.pow(this.x-t,2)+Math.pow(this.y-e,2));return n<=i},contains:function(t,e){return this.x==t&&this.y==e},toString:function(){return"["+this.x+","+this.y+"]"},getPoints:function(){return[this]}},t.exports=i},function(t,e,i){function n(t){delete u[t]}var r=i(11),o=i(59),s=i(60),a=i(64),h=i(65),l=!o.canvasSupported,c={canvas:i(66)},u={},d={};d.version="3.0.4",d.init=function(t,e){var i=new f(r(),t,e);return u[i.id]=i,i},d.dispose=function(t){if(t)t.dispose();else{for(var e in u)u[e].dispose();u={}}return d},d.getInstance=function(t){return u[t]},d.registerPainter=function(t,e){c[t]=e};var f=function(t,e,i){i=i||{},this.dom=e,this.id=t;var n=this,r=new a,u=i.renderer;if(l){if(!c.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");u="vml"}else u&&c[u]||(u="canvas");var d=new c[u](e,r,i);this.storage=r,this.painter=d,o.node||(this.handler=new s(d.getViewportRoot(),r,d)),this.animation=new h({stage:{update:function(){n._needsRefresh&&n.refreshImmediately()}}}),this.animation.start(),this._needsRefresh;var f=r.delFromMap,p=r.addToMap;r.delFromMap=function(t){var e=r.get(t);f.call(r,t),e&&e.removeSelfFromZr(n)},r.addToMap=function(t){p.call(r,t),t.addSelfToZr(n)}};f.prototype={constructor:f,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer(t,e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},resize:function(){this.painter.resize(),this.handler&&this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},toDataURL:function(t,e,i){return this.painter.toDataURL(t,e,i)},pathToImage:function(t,e,i){var n=r();return this.painter.pathToImage(n,t,e,i)},setDefaultCursorStyle:function(t){this.handler.setDefaultCursorStyle(t)},on:function(t,e,i){this.handler&&this.handler.on(t,e,i)},off:function(t,e){this.handler&&this.handler.off(t,e)},trigger:function(t,e){this.handler&&this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler&&this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,n(this.id)}},t.exports=d},function(t,e){function i(t){var e={},i={},n=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),r=t.match(/(Android);?[\s\/]+([\d.]+)?/),o=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),a=!o&&t.match(/(iPhone\sOS)\s([\d_]+)/),h=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=h&&t.match(/TouchPad/),c=t.match(/Kindle\/([\d.]+)/),u=t.match(/Silk\/([\d._]+)/),d=t.match(/(BlackBerry).*Version\/([\d.]+)/),f=t.match(/(BB10).*Version\/([\d.]+)/),p=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),g=t.match(/PlayBook/),v=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),y=t.match(/Firefox\/([\d.]+)/),m=n&&t.match(/Mobile\//)&&!v,x=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!v,_=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),w=t.match(/Edge\/([\d.]+)/);return(i.webkit=!!n)&&(i.version=n[1]),r&&(e.android=!0,e.version=r[2]),a&&!s&&(e.ios=e.iphone=!0,e.version=a[2].replace(/_/g,".")),o&&(e.ios=e.ipad=!0,e.version=o[2].replace(/_/g,".")),s&&(e.ios=e.ipod=!0,e.version=s[3]?s[3].replace(/_/g,"."):null),h&&(e.webos=!0,e.version=h[2]),l&&(e.touchpad=!0),d&&(e.blackberry=!0,e.version=d[2]),f&&(e.bb10=!0,e.version=f[2]),p&&(e.rimtabletos=!0,e.version=p[2]),g&&(i.playbook=!0),c&&(e.kindle=!0,e.version=c[1]),u&&(i.silk=!0,i.version=u[1]),!u&&e.android&&t.match(/Kindle Fire/)&&(i.silk=!0),v&&(i.chrome=!0,i.version=v[1]),y&&(i.firefox=!0,i.version=y[1]),_&&(i.ie=!0,i.version=_[1]),m&&(t.match(/Safari/)||e.ios)&&(i.safari=!0),x&&(i.webview=!0),_&&(i.ie=!0,i.version=_[1]),w&&(i.edge=!0,i.version=w[1]),e.tablet=!!(o||g||r&&!t.match(/Mobile/)||y&&t.match(/Tablet/)||_&&!t.match(/Phone/)&&t.match(/Touch/)),e.phone=!(e.tablet||e.ipod||!(r||a||h||d||f||v&&t.match(/Android/)||v&&t.match(/CriOS\/([\d.]+)/)||y&&t.match(/Mobile/)||_&&t.match(/Touch/))),{browser:i,os:e,node:!1,canvasSupported:!!document.createElement("canvas").getContext,touchEventsSupported:"ontouchstart"in window&&!i.ie&&!i.edge,pointerEventsSupported:"onpointerdown"in window&&(i.edge||i.ie&&i.version>=10)}}var n={};n="undefined"==typeof navigator?{browser:{},os:{},node:!0,canvasSupported:!0}:i(navigator.userAgent),t.exports=n},function(t,e,i){"use strict";function n(t,e,i){return{type:t,event:i,target:e,cancelBubble:!1,offsetX:i.zrX,offsetY:i.zrY,gestureEvent:i.gestureEvent,pinchX:i.pinchX,pinchY:i.pinchY,pinchScale:i.pinchScale,wheelDelta:i.zrDelta}}function r(t,e,i){var n=t._gestureMgr;"start"===i&&n.clear();var r=n.recognize(e,t.findHover(e.zrX,e.zrY,null));if("end"===i&&n.clear(),r){var o=r.type;e.gestureEvent=o,t._dispatchProxy(r.target,o,r.event)}}function o(t){function e(t,e){return function(){if(!e._touching)return t.apply(e,arguments)}}for(var i=m.concat(x),n=0;n<i.length;n++){var r=i[n];t._handlers[r]=f.bind(A[r],t)}for(var n=0;n<y.length;n++){var r=y[n];t._handlers[r]=e(A[r],t)}}function s(t,e,i){if(t[t.rectHover?"rectContain":"contain"](e,i)){for(var n=t.parent;n;){if(n.clipPath&&!n.clipPath.contain(e,i))return!1;n=n.parent}return!0}return!1}function a(t){t._touching=!0,clearTimeout(t._touchTimer),t._touchTimer=setTimeout(function(){t._touching=!1},700)}function h(){return!1}function l(){return u.touchEventsSupported}function c(t){return"mousewheel"===t&&u.browser.firefox?"DOMMouseScroll":t}var u=i(59),d=i(61),f=i(4),p=i(62),g=i(63),v=i(12),y=["click","dblclick","mousewheel","mouseout"];!h()&&y.push("mouseup","mousedown","mousemove");var m=["touchstart","touchend","touchmove"],x=["pointerdown","pointerup","pointermove"],_=300,w=d.addEventListener,b=d.removeEventListener,P=d.normalizeEvent,A={mousemove:function(t){t=P(this.root,t);var e=t.zrX,i=t.zrY,n=this.findHover(e,i,null),r=this._hovered;this._hovered=n,this.root.style.cursor=n?n.cursor:this._defaultCursorStyle,r&&n!==r&&r.__zr&&this._dispatchProxy(r,"mouseout",t),this._dispatchProxy(n,"mousemove",t),n&&n!==r&&this._dispatchProxy(n,"mouseover",t)},mouseout:function(t){t=P(this.root,t);var e=t.toElement||t.relatedTarget;if(e!=this.root)for(;e&&9!=e.nodeType;){if(e===this.root)return;e=e.parentNode}this._dispatchProxy(this._hovered,"mouseout",t),this.trigger("globalout",{event:t})},touchstart:function(t){t=P(this.root,t),this._lastTouchMoment=new Date,r(this,t,"start"),A.mousemove.call(this,t),A.mousedown.call(this,t),a(this)},touchmove:function(t){
t=P(this.root,t),r(this,t,"change"),A.mousemove.call(this,t),a(this)},touchend:function(t){t=P(this.root,t),r(this,t,"end"),A.mouseup.call(this,t),+new Date-this._lastTouchMoment<_&&A.click.call(this,t),a(this)}};f.each(["click","mousedown","mouseup","mousewheel","dblclick"],function(t){A[t]=function(e){e=P(this.root,e);var i=this.findHover(e.zrX,e.zrY,null);this._dispatchProxy(i,t,e)}});var T=function(t,e,i){function n(e,i){f.each(e,function(e){w(t,c(e),i._handlers[e])},i)}v.call(this),this.root=t,this.storage=e,this.painter=i,this._hovered,this._lastTouchMoment,this._lastX,this._lastY,this._defaultCursorStyle="default",this._gestureMgr=new g,this._handlers=[],this._touching=!1,this._touchTimer,o(this),h()?n(x,this):l()&&n(m,this),n(y,this),p.call(this)};T.prototype={constructor:T,resize:function(t){this._hovered=null},dispatch:function(t,e){var i=this._handlers[t];i&&i.call(this,e)},dispose:function(){for(var t=this.root,e=y.concat(m),i=0;i<e.length;i++){var n=e[i];b(t,c(n),this._handlers[n])}this.root=this.storage=this.painter=null},setDefaultCursorStyle:function(t){this._defaultCursorStyle=t},_dispatchProxy:function(t,e,i){for(var r="on"+e,o=n(e,t,i),s=t;s&&(s[r]&&(o.cancelBubble=s[r].call(s,o)),s.trigger(e,o),s=s.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(e,o),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[r]&&t[r].call(t,o),t.trigger&&t.trigger(e,o)}))},findHover:function(t,e,i){for(var n=this.storage.getDisplayList(),r=n.length-1;r>=0;r--)if(!n[r].silent&&n[r]!==i&&!n[r].ignore&&s(n[r],t,e))return n[r]}},f.mixin(T,v),f.mixin(T,p),t.exports=T},function(t,e,i){"use strict";function n(t){return t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0}}function r(t,e){if(e=e||window.event,null!=e.zrX)return e;var i=e.type,r=i&&i.indexOf("touch")>=0;if(r){var o="touchend"!=i?e.targetTouches[0]:e.changedTouches[0];if(o){var s=n(t);e.zrX=o.clientX-s.left,e.zrY=o.clientY-s.top}}else{var a=n(t);e.zrX=e.clientX-a.left,e.zrY=e.clientY-a.top,e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}return e}function o(t,e,i){h?t.addEventListener(e,i):t.attachEvent("on"+e,i)}function s(t,e,i){h?t.removeEventListener(e,i):t.detachEvent("on"+e,i)}var a=i(12),h="undefined"!=typeof window&&!!window.addEventListener,l=h?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};t.exports={normalizeEvent:r,addEventListener:o,removeEventListener:s,stop:l,Dispatcher:a}},function(t,e){function i(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}i.prototype={constructor:i,_dragStart:function(t){var e=t.target;e&&e.draggable&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this._dispatchProxy(e,"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var i=t.offsetX,n=t.offsetY,r=i-this._x,o=n-this._y;this._x=i,this._y=n,e.drift(r,o,t),this._dispatchProxy(e,"drag",t.event);var s=this.findHover(i,n,e),a=this._dropTarget;this._dropTarget=s,e!==s&&(a&&s!==a&&this._dispatchProxy(a,"dragleave",t.event),s&&s!==a&&this._dispatchProxy(s,"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this._dispatchProxy(e,"dragend",t.event),this._dropTarget&&this._dispatchProxy(this._dropTarget,"drop",t.event),this._draggingTarget=null,this._dropTarget=null}},t.exports=i},function(t,e){"use strict";function i(t){var e=t[1][0]-t[0][0],i=t[1][1]-t[0][1];return Math.sqrt(e*e+i*i)}function n(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var r=function(){this._track=[]};r.prototype={constructor:r,recognize:function(t,e){return this._doTrack(t,e),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e){var i=t.touches;if(i){for(var n={points:[],touches:[],target:e,event:t},r=0,o=i.length;r<o;r++){var s=i[r];n.points.push([s.clientX,s.clientY]),n.touches.push(s)}this._track.push(n)}},_recognize:function(t){for(var e in o)if(o.hasOwnProperty(e)){var i=o[e](this._track,t);if(i)return i}}};var o={pinch:function(t,e){var r=t.length;if(r){var o=(t[r-1]||{}).points,s=(t[r-2]||{}).points||o;if(s&&s.length>1&&o&&o.length>1){var a=i(o)/i(s);!isFinite(a)&&(a=1),e.pinchScale=a;var h=n(o);return e.pinchX=h[0],e.pinchY=h[1],{type:"pinch",target:t[0].target,event:e}}}}};t.exports=r},function(t,e,i){"use strict";function n(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2===e.z2?t.__renderidx-e.__renderidx:t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var r=i(4),o=i(37),s=function(){this._elements={},this._roots=[],this._displayList=[],this._displayListLen=0};s.prototype={constructor:s,getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,i=this._displayList,r=0,o=e.length;r<o;r++)this._updateAndAddDisplayable(e[r],null,t);i.length=this._displayListLen;for(var r=0,o=i.length;r<o;r++)i[r].__renderidx=r;i.sort(n)},_updateAndAddDisplayable:function(t,e,i){if(!t.ignore||i){t.beforeUpdate(),t.update(),t.afterUpdate();var n=t.clipPath;if(n&&(n.parent=t,n.updateTransform(),e?(e=e.slice(),e.push(n)):e=[n]),"group"==t.type){for(var r=t._children,o=0;o<r.length;o++){var s=r[o];s.__dirty=t.__dirty||s.__dirty,this._updateAndAddDisplayable(s,e,i)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){this._elements[t.id]||(t instanceof o&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var i=this._roots[e];i instanceof o&&i.delChildrenFromStorage(this)}return this._elements={},this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array)for(var e=0,n=t.length;e<n;e++)this.delRoot(t[e]);else{var s;s="string"==typeof t?this._elements[t]:t;var a=r.indexOf(this._roots,s);a>=0&&(this.delFromMap(s.id),this._roots.splice(a,1),s instanceof o&&s.delChildrenFromStorage(this))}},addToMap:function(t){return t instanceof o&&(t.__storage=this),t.dirty(),this._elements[t.id]=t,this},get:function(t){return this._elements[t]},delFromMap:function(t){var e=this._elements,i=e[t];return i&&(delete e[t],i instanceof o&&(i.__storage=null)),this},dispose:function(){this._elements=this._renderList=this._roots=null}},t.exports=s},function(t,e,i){"use strict";var n=i(4),r=i(61).Dispatcher,o="undefined"!=typeof window&&(window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)},s=i(17),a=function(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time=0,r.call(this)};a.prototype={constructor:a,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),i=0;i<e.length;i++)this.addClip(e[i])},removeClip:function(t){var e=n.indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),i=0;i<e.length;i++)this.removeClip(e[i]);t.animation=null},_update:function(){for(var t=(new Date).getTime(),e=t-this._time,i=this._clips,n=i.length,r=[],o=[],s=0;s<n;s++){var a=i[s],h=a.step(t);h&&(r.push(h),o.push(a))}for(var s=0;s<n;)i[s]._needsRemove?(i[s]=i[n-1],i.pop(),n--):s++;n=r.length;for(var s=0;s<n;s++)o[s].fire(r[s]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},start:function(){function t(){e._running&&(o(t),e._update())}var e=this;this._running=!0,this._time=(new Date).getTime(),o(t)},stop:function(){this._running=!1},clear:function(){this._clips=[]},animate:function(t,e){e=e||{};var i=new s(t,e.loop,e.getter,e.setter);return i}},n.mixin(a,r),t.exports=a},function(t,e,i){"use strict";function n(t){return parseInt(t,10)}function r(t){return!!t&&(!!t.isBuildin||"function"==typeof t.resize&&"function"==typeof t.refresh)}function o(t){t.__unusedCount++}function s(t){t.__dirty=!1,1==t.__unusedCount&&t.clear()}function a(t,e,i){return g.copy(t.getBoundingRect()),t.transform&&g.applyTransform(t.transform),v.width=e,v.height=i,!g.intersect(v)}function h(t,e){if(!t||!e||t.length!==e.length)return!0;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!0}function l(t,e){for(var i=0;i<t.length;i++){var n,r=t[i];r.transform&&(n=r.transform,e.transform(n[0],n[1],n[2],n[3],n[4],n[5]));var o=r.path;o.beginPath(e),r.buildPath(o,r.shape),e.clip(),r.transform&&(n=r.invTransform,e.transform(n[0],n[1],n[2],n[3],n[4],n[5]))}}var c=i(22),u=i(4),d=i(21),f=i(25),p=i(67),g=new f(0,0,0,0),v=new f(0,0,0,0),y=function(t,e,i){var n=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();i=i||{},this.dpr=i.devicePixelRatio||c.devicePixelRatio,this._singleCanvas=n,this.root=t;var r=t.style;if(r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]="none",r["user-select"]="none",r["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e,n){var o=t.width,s=t.height;this._width=o,this._height=s;var a=new p(t,this,1);a.initContext(),this._layers={0:a},this._zlevelList=[0]}else{var o=this._getWidth(),s=this._getHeight();this._width=o,this._height=s;var h=document.createElement("div");this._domRoot=h;var l=h.style;l.position="relative",l.overflow="hidden",l.width=this._width+"px",l.height=this._height+"px",t.appendChild(h),this._layers={},this._zlevelList=[]}this._layerConfig={},this.pathToImage=this._createPathToImage()};y.prototype={constructor:y,isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._singleCanvas?this._layers[0].dom:this._domRoot},refresh:function(t){var e=this.storage.getDisplayList(!0),i=this._zlevelList;this._paintList(e,t);for(var n=0;n<i.length;n++){var r=i[n],o=this._layers[r];!o.isBuildin&&o.refresh&&o.refresh()}return this},_paintList:function(t,e){null==e&&(e=!1),this._updateLayerStatus(t);var i,n,r,c=this._width,u=this._height;this.eachBuildinLayer(o);for(var f=null,p=0,g=t.length;p<g;p++){var v=t[p],y=this._singleCanvas?0:v.zlevel;if(n!==y&&(n=y,i=this.getLayer(n),i.isBuildin||d("ZLevel "+n+" has been used by unkown layer "+i.id),r=i.ctx,i.__unusedCount=0,(i.__dirty||e)&&i.clear()),(i.__dirty||e)&&!v.invisible&&0!==v.style.opacity&&v.scale[0]&&v.scale[1]&&(!v.culling||!a(v,c,u))){var m=v.__clipPaths;h(m,f)&&(f&&r.restore(),m&&(r.save(),l(m,r)),f=m),v.beforeBrush&&v.beforeBrush(r),v.brush(r,!1),v.afterBrush&&v.afterBrush(r)}v.__dirty=!1}f&&r.restore(),this.eachBuildinLayer(s)},getLayer:function(t){if(this._singleCanvas)return this._layers[0];var e=this._layers[t];return e||(e=new p("zr_"+t,this,this.dpr),e.isBuildin=!0,this._layerConfig[t]&&u.merge(e,this._layerConfig[t],!0),this.insertLayer(t,e),e.initContext()),e},insertLayer:function(t,e){var i=this._layers,n=this._zlevelList,o=n.length,s=null,a=-1,h=this._domRoot;if(i[t])return void d("ZLevel "+t+" has been used already");if(!r(e))return void d("Layer of zlevel "+t+" is not valid");if(o>0&&t>n[0]){for(a=0;a<o-1&&!(n[a]<t&&n[a+1]>t);a++);s=i[n[a]]}if(n.splice(a+1,0,t),s){var l=s.dom;l.nextSibling?h.insertBefore(e.dom,l.nextSibling):h.appendChild(e.dom)}else h.firstChild?h.insertBefore(e.dom,h.firstChild):h.appendChild(e.dom);i[t]=e},eachLayer:function(t,e){var i,n,r=this._zlevelList;for(n=0;n<r.length;n++)i=r[n],t.call(e,this._layers[i],i)},eachBuildinLayer:function(t,e){var i,n,r,o=this._zlevelList;for(r=0;r<o.length;r++)n=o[r],i=this._layers[n],i.isBuildin&&t.call(e,i,n)},eachOtherLayer:function(t,e){var i,n,r,o=this._zlevelList;for(r=0;r<o.length;r++)n=o[r],i=this._layers[n],i.isBuildin||t.call(e,i,n)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){var e=this._layers,i={};this.eachBuildinLayer(function(t,e){i[e]=t.elCount,t.elCount=0});for(var n=0,r=t.length;n<r;n++){var o=t[n],s=this._singleCanvas?0:o.zlevel,a=e[s];if(a){if(a.elCount++,a.__dirty)continue;a.__dirty=o.__dirty}}this.eachBuildinLayer(function(t,e){i[e]!==t.elCount&&(t.__dirty=!0)})},clear:function(){return this.eachBuildinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},configLayer:function(t,e){if(e){var i=this._layerConfig;i[t]?u.merge(i[t],e,!0):i[t]=e;var n=this._layers[t];n&&u.merge(n,i[t],!0)}},delLayer:function(t){var e=this._layers,i=this._zlevelList,n=e[t];n&&(n.dom.parentNode.removeChild(n.dom),delete e[t],i.splice(u.indexOf(i,t),1))},resize:function(t,e){var i=this._domRoot;if(i.style.display="none",t=t||this._getWidth(),e=e||this._getHeight(),i.style.display="",this._width!=t||e!=this._height){i.style.width=t+"px",i.style.height=e+"px";for(var n in this._layers)this._layers[n].resize(t,e);this.refresh(!0)}return this._width=t,this._height=e,this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas)return this._layers[0].dom;var e=new p("image",this,t.pixelRatio||this.dpr);e.initContext();var i=e.ctx;e.clearColor=t.backgroundColor,e.clear();for(var n=this.storage.getDisplayList(!0),r=0;r<n.length;r++){var o=n[r];o.invisible||(o.beforeBrush&&o.beforeBrush(i),o.brush(i,!1),o.afterBrush&&o.afterBrush(i))}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getWidth:function(){var t=this.root,e=document.defaultView.getComputedStyle(t);return(t.clientWidth||n(e.width)||n(t.style.width))-(n(e.paddingLeft)||0)-(n(e.paddingRight)||0)|0},_getHeight:function(){var t=this.root,e=document.defaultView.getComputedStyle(t);return(t.clientHeight||n(e.height)||n(t.style.height))-(n(e.paddingTop)||0)-(n(e.paddingBottom)||0)|0},_pathToImage:function(t,e,n,r,o){var s=document.createElement("canvas"),a=s.getContext("2d");s.width=n*o,s.height=r*o,a.clearRect(0,0,n*o,r*o);var h={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(a);var l=i(38),c=new l({id:t,style:{x:0,y:0,image:s}});return null!=h.position&&(c.position=e.position=h.position),null!=h.rotation&&(c.rotation=e.rotation=h.rotation),null!=h.scale&&(c.scale=e.scale=h.scale),c},_createPathToImage:function(){var t=this;return function(e,i,n,r){return t._pathToImage(e,i,n,r,t.dpr)}}},t.exports=y},function(t,e,i){function n(){return!1}function r(t,e,i,n){var r=document.createElement(e),o=i.getWidth(),s=i.getHeight(),a=r.style;return a.position="absolute",a.left=0,a.top=0,a.width=o+"px",a.height=s+"px",r.width=o*n,r.height=s*n,r.setAttribute("data-zr-dom-id",t),r}var o=i(4),s=i(22),a=function(t,e,i){var a;i=i||s.devicePixelRatio,"string"==typeof t?a=r(t,"canvas",e,i):o.isObject(t)&&(a=t,t=a.id),this.id=t,this.dom=a;var h=a.style;h&&(a.onselectstart=n,h["-webkit-user-select"]="none",h["user-select"]="none",h["-webkit-touch-callout"]="none",h["-webkit-tap-highlight-color"]="rgba(0,0,0,0)"),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=i};a.prototype={constructor:a,elCount:0,__dirty:!0,initContext:function(){this.ctx=this.dom.getContext("2d");var t=this.dpr;1!=t&&this.ctx.scale(t,t)},createBackBuffer:function(){var t=this.dpr;this.domBack=r("back-"+this.id,"canvas",this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!=t&&this.ctxBack.scale(t,t)},resize:function(t,e){var i=this.dpr,n=this.dom,r=n.style,o=this.domBack;r.width=t+"px",r.height=e+"px",n.width=t*i,n.height=e*i,1!=i&&this.ctx.scale(i,i),o&&(o.width=t*i,o.height=e*i,1!=i&&this.ctxBack.scale(i,i))},clear:function(t){var e=this.dom,i=this.ctx,n=e.width,r=e.height,o=this.clearColor,s=this.motionBlur&&!t,a=this.lastFrameAlpha,h=this.dpr;if(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,n/h,r/h)),i.clearRect(0,0,n/h,r/h),o&&(i.save(),i.fillStyle=this.clearColor,i.fillRect(0,0,n/h,r/h),i.restore()),s){var l=this.domBack;i.save(),i.globalAlpha=a,i.drawImage(l,0,0,n/h,r/h),i.restore()}}},t.exports=a},function(t,e,i){function n(t,e,i){for(var n=[],r=0;r<e.length;r++){var o=e[r];o.parent&&R.isSubProcess(o.parent.model)||o&&o.toJSON&&n.push(o.toJSON())}for(var r=0;r<i.length;r++){var s=i[r];s.parent&&R.isSubProcess(s.parent.model)||s&&s.toJSON&&n.push(s.toJSON())}return t.set("childShapes",n),t.option}function r(t,e){t.clear();var i=new d(e);t.model=i;var n=i.get("properties.width"),r=i.get("properties.height");n>0&&r>0&&t.resize(n,r);for(var s=i.get("childShapes"),a=[],h=0;h<s.length;h++){var l=s[h],c=l.stencil.type;if(c===R.SEQUENCE_FLOW)a.push(l);else{var u=new d(l),f=t.addNodeByModel(u,!1);if(c===R.SUB_PROCESS)for(var p=u.get("childShapes"),g=0;g<p.length;g++){var v=new d(p[g]);if(R.isFlow(v))t.addConnectorByModel(v,f);else{var y=u.get("bounds.upperLeft"),m=v.get("bounds.upperLeft");v.set("bounds.upperLeft",{x:m.x+y.x,y:m.y+y.y}),t.addNodeByModel(v,!0)}}}}for(var h=0,x=a.length;h<x;h++){var u=new d(a[h]);t.addConnectorByModel(u)}for(var h=0;h<s.length;h++)if(s[h].properties.slotEvent)for(var g=0;g<s[h].properties.slotEvent.length;g++)o(t,s[h].resourceId).slotEvent.push(o(t,s[h].properties.slotEvent[g]))}function o(t,e){for(var i,n=t.allNodes.length-1;n>=0;n--)t.allNodes[n].model.get("resourceId")==e&&(i=t.allNodes[n]);return i}function s(){u.registerClass(f,"StartNoneEvent"),u.registerClass(p,"EndNoneEvent"),u.registerClass(g,"UserTask"),u.registerClass(v,"ManualTask"),u.registerClass(y,"ScriptTask"),u.registerClass(m,"MailTask"),u.registerClass(x,"CatchTimerEvent"),u.registerClass(_,"CatchSignalEvent"),u.registerClass(w,"ThrowSignalEvent"),u.registerClass(b,"InclusiveGateway"),u.registerClass(P,"ExclusiveGateway"),u.registerClass(A,"ParallelGateway"),u.registerClass(T,"SubProcess")}function a(t,e,i){var n,r;return t.parent?"SubProcess"==t.parent.model.get("stencil.type")?(n=e-t.parent.getRect().boundingRect.x,r=i-t.parent.getRect().boundingRect.y,t.rectContain(n,r)):void 0:t.rectContain(e,i)}function h(t,e,i,n){for(var r=t.length-1;r>=0;r--)if(l(n,t[r])&&!t[r].ignore&&a(t[r],e,i))return t[r]}function l(t,e){return c.indexOf(t,e)==-1}var c=i(4),u=(i(69),i(71)),d=i(74),f=i(76),p=i(78),g=i(79),v=i(81),y=i(82),m=i(83),x=i(84),_=i(85),w=i(86),b=i(87),P=i(89),A=i(90),T=i(91),R=i(96),S={exportJson:n,fromJson:r,registerBPMNNode:s,findHover:h};t.exports=S},function(t,e,i){function n(t,e){function i(){}var n=t.prototype;i.prototype=e.prototype,t.prototype=new i;for(var r in n)t.prototype[r]=n[r];t.prototype.constructor=t,t.superClass=e}function r(){for(var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),n=0,r=0;r<36;r++)8==r||13==r||18==r||23==r?i[r]="-":14==r?i[r]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[r]=e[19==r?3&t|8:t]);return"sid-"+i.join("")}function o(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function s(t){for(var e=o(t[0],t[1]),i=[t[0],t[1]],n=1;n<t.length-1;n++)e<o(t[n],t[n+1])&&(e=o(t[n],t[n+1]),i=[t[n],t[n+1]]);return i}function a(t){for(var e=0,i=0;i<t.length-1;i++)e+=o(t[i],t[i+1]);return e}function h(t){if(0==t.lenght)return NaN;for(var e=t[0],i=0;i<t.length;i++)e<t[i]&&(e=t[i]);return e}function l(t){if(0==t.lenght)return NaN;for(var e=t[0],i=0;i<t.length;i++)e>t[i]&&(e=t[i]);return e}function c(t){if(t.length<=1)return!0;for(var e=0;e<t.length-1;e++)if(t[e].x!=t[e+1].x&&t[e].y!=t[e+1].y)return!1;return!0}function u(t,e){if(t.startPoint.x==t.endPoint.x&&e.startPoint.x==e.endPoint.x)return t.startPoint.x==e.startPoint.x&&(t.contains(e.startPoint.x,e.startPoint.y)||t.contains(e.endPoint.x,e.endPoint.y));if(t.startPoint.x==t.endPoint.x||e.startPoint.x==e.endPoint.x){if(t.startPoint.x==t.endPoint.x){var i=t;t=e,e=i}var n=(t.endPoint.y-t.startPoint.y)/(t.endPoint.x-t.startPoint.x),r=t.startPoint.y-n*t.startPoint.x,o=e.startPoint.x,s=n*o+r;return t.contains(o,s)&&e.contains(o,s)}var a=(t.endPoint.y-t.startPoint.y)/(t.endPoint.x-t.startPoint.x),h=t.startPoint.y-a*t.startPoint.x,l=(e.endPoint.y-e.startPoint.y)/(e.endPoint.x-e.startPoint.x),c=e.startPoint.y-l*e.startPoint.x;return a==l?h==c&&(t.contains(e.startPoint.x,e.startPoint.y)||t.contains(e.endPoint.x,e.endPoint.y)):(o=(c-h)/(a-l),s=a*o+h,t.contains(o,s)&&e.contains(o,s))}function d(t,e,i){var n=[];n.push(new k(new E(e[0],e[1]),new E(e[2],e[1]))),n.push(new k(new E(e[2],e[1]),new E(e[2],e[3]))),n.push(new k(new E(e[2],e[3]),new E(e[0],e[3]))),n.push(new k(new E(e[0],e[3]),new E(e[0],e[1])));for(var r=0;r<t.length-1;r++)for(var o=new k(t[r],t[r+1]),s=0;s<n.length;s++)if(u(o,n[s]))return!0;if(i)for(var o=new k(t[t.length-1],t[0]),s=0;s<n.length;s++)if(u(o,n[s]))return!0;return!1}function f(t){if(t.length<=2)return-1;for(var e=0,i=1;i<t.length-1;i++)if(t[i-1].x==t[i].x&&t[i].x==t[i+1].x){if(p(t[i+1].y-t[i].y)!=p(t[i].y-t[i-1].y))return-1;e++}else if(t[i-1].y==t[i].y&&t[i].y==t[i+1].y){if(p(t[i+1].x-t[i].x)!=p(t[i].x-t[i-1].x))return-1;e++}else e--;return e}function p(t){return t>0?1:t<0?-1:0}function g(t){if(t.length<=2)return!0;for(var e=0;e<t.length-2;e++)if(t[e].x==t[e+1].x&&t[e+1].x==t[e+2].x){if(0!=p(t[e+1].y-t[e].y)&&p(t[e+1].y-t[e].y)==-1*p(t[e+2].y-t[e+1].y))return!1}else if(t[e].y==t[e+1].y&&t[e+1].y==t[e+2].y&&0!=p(t[e+1].x-t[e].x)&&p(t[e+1].x-t[e].x)==-1*p(t[e+2].x-t[e+1].x))return!1;return!0}function v(t,e){var i=[];if(e){for(var n=0;n<t.length;n++){var r=t[n];i.push(new E(r[0],r[1]))}return i}for(var n=0;n<t.length;n++){var r=t[n];i.push([r.x,r.y])}return i}function y(t){var e=[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]];return e}function m(t,e){return[[1,0,t],[0,1,e],[0,0,1]]}function x(t,e){return null==e&&(e=t),[[t,0,0],[0,e,0],[0,0,1]]}function _(t,e,i){var n=t.clone();return n.transform(m(-t.x,-t.y)),n.y-=e,n.transform(y(i)),n.transform(m(t.x,t.y)),n}function w(t){return{left:new E(t.x,t.y+t.height/2),top:new E(t.x+t.width/2,t.y),right:new E(t.x+t.width,t.y+t.height/2),bottom:new E(t.x+t.width/2,t.y+t.height),center:new E(t.x+t.width/2,t.y+t.height/2)}}function b(t){return[[10*Math.round(t.getRect().width/3/10),0],[10*Math.round(2*t.getRect().width/3/10),0],[t.getRect().width,10*Math.round(t.getRect().height/3/10)],[t.getRect().width,10*Math.round(2*t.getRect().height/3/10)],[10*Math.round(t.getRect().width/3/10),t.getRect().height],[10*Math.round(2*t.getRect().width/3/10),t.getRect().height],[0,10*Math.round(t.getRect().height/3/10)],[0,10*Math.round(2*t.getRect().height/3/10)]]}function P(t,e){return-Math.PI/2-Math.atan2(e.y-t.y,e.x-t.x)}function A(t,e,i,n){var r=t.x*e.y+t.y*i.x+e.x*i.y-(e.y*i.x+t.y*e.x+t.x*i.y);return n?Math.abs(r)<=n:0===r}function T(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function R(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function S(t,e,i){t.x=T(t.x,5),t.y=T(t.y,5),e.x=T(e.x,5),e.y=T(e.y,5);var n=Math.atan((e.x-t.x)/(e.y-t.y));for(n=-n,e.x>=t.x&&e.y>=t.y?n+=Math.PI:e.x<=t.x&&e.y>=t.y?n+=Math.PI:e.x<=t.x&&e.y<=t.y&&(n+=2*Math.PI);n>=2*Math.PI;)n-=2*Math.PI;return isNaN(n)&&(n=0),i&&(n=Math.round(n/i)*i),n}function L(t){var e=t.getBoundingRect(),i=[];i[0]=[-e.width/2,-e.height/2],i[1]=[e.width/2,-e.height/2],i[2]=[e.width/2,e.height/2],i[3]=[-e.width/2,e.height/2],i[4]=[-e.width/2,-e.height/2];var n,r,o;return t instanceof O.Circle?(n=new z(t.position[0]-e.width/2,t.position[1]-e.height/2,e.width,e.height),r=t.position[0],o=t.position[1]):(n=new z(t.position[0],t.position[1],e.width,e.height),r=t.position[0]+e.width/2,o=t.position[1]+e.height/2),{x:r,y:o,width:e.width,height:e.height,points:i,boundingRect:n}}function N(){for(var t,e=["0","2","3","4","5","6","7","8","9","a","b","c","d"],i="#",n=0;n<6;n++)t=Math.round(15*Math.random()),i+=e[t];return i}function C(t){return void 0===t}function M(t,e,i){!e&&i&&(e=i),e=e||{},e=B.defaults(e,D,!0);var n=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(n,function(e,i,n,s,a){return o+=t.slice(r,a).replace(q,Y),r=a+e.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj",o)}catch(a){throw a.source=o,a}var h=function(t){return s.call(this,t)},l=e.variable||"obj";return h.source="function("+l+"){\n"+o+"}",h}var E=i(57),k=i(70),O=i(3),z=i(25),B=i(4),I={createNew:function(){var t=[];return{add:function(t,e){var i=this.get(t);i.push(e)},get:function(e){for(var i=0;i<t.length;i++)if(e==t[i].key)return t[i].value;var n=[];return t.push({key:e,value:n}),n},keys:function(){for(var e=[],i=0;i<t.length;i++)e.push(t[i].key);return e},top:function(){return t[t.length-1]},remove:function(e){for(var i=-1,n=0;n<t.length;n++)if(e==t[n].key){i=n;break}return t.splice(i,1)[0]},removeTop:function(){return t.splice(t.length-1,1)[0]},length:function(){return t.length}}}},D={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},F=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,Y=function(t){return"\\"+G[t]};t.exports={inherits:n,getUUID:r,distance:o,getPolylineLength:a,max:h,min:l,orthogonalPath:c,polylineIntersectsRectangle:d,scorePath:f,forwardPath:g,traslatePoints:v,getEndPoint:_,getConnectorPoints:w,tangentRotation:P,collinearity:A,translationMatrix:m,scaleMatrix:x,round:T,getLength:R,getAngle:S,getRect:L,StackedMap:I,getMaxLineLength:s,randomColor:N,template:M,isUndefined:C,getSoltPoints:b}},function(t,e){function i(t,e){this.startPoint=t,this.endPoint=e,this.oType="Line"}i.load=function(t){var e=new i(Point.load(t.startPoint),Point.load(t.endPoint));return e},i.prototype={contructor:i,clone:function(){var t=new i(this.startPoint.clone(),this.endPoint.clone());return t},equals:function(t){return!(!t instanceof i)&&(this.startPoint.equals(t.startPoint)&&this.endPoint.equals(t.endPoint))},contains:function(t,e){if(Math.min(this.startPoint.x,this.endPoint.x)<=t&&t<=Math.max(this.startPoint.x,this.endPoint.x)&&Math.min(this.startPoint.y,this.endPoint.y)<=e&&e<=Math.max(this.startPoint.y,this.endPoint.y)){if(this.startPoint.x==this.endPoint.x)return t==this.startPoint.x;var i=(this.endPoint.y-this.startPoint.y)/(this.endPoint.x-this.startPoint.x),n=this.startPoint.y-i*this.startPoint.x;return e==i*t+n}return!1},near:function(t,e,i){if(this.endPoint.x===this.startPoint.x)return(this.startPoint.y-i<=e&&this.endPoint.y+i>=e||this.endPoint.y-i<=e&&this.startPoint.y+i>=e)&&t>this.startPoint.x-i&&t<this.startPoint.x+i;if(this.startPoint.y===this.endPoint.y)return(this.startPoint.x-i<=t&&this.endPoint.x+i>=t||this.endPoint.x-i<=t&&this.startPoint.x+i>=t)&&e>this.startPoint.y-i&&e<this.startPoint.y+i;var n=Math.min(this.endPoint.x,this.startPoint.x),r=Math.min(this.endPoint.y,this.startPoint.y),o=Math.max(this.endPoint.x,this.startPoint.x),s=Math.max(this.endPoint.y,this.startPoint.y),a=this.endPoint.y-this.startPoint.y,h=this.startPoint.x-this.endPoint.x,l=-(this.startPoint.x*this.endPoint.y-this.endPoint.x*this.startPoint.y),c=Math.abs((a*t+h*e+l)/Math.sqrt(Math.pow(a,2)+Math.pow(h,2))),u=(h*(h*t-a*e)-a*l)/(Math.pow(a,2)+Math.pow(h,2)),d=(a*(-h*t+a*e)-h*l)/(Math.pow(a,2)+Math.pow(h,2)),f=c<=i&&o>=u&&u>=n&&s>=d&&d>=r||this.startPoint.near(t,e,i)||this.endPoint.near(t,e,i);return f},getPoints:function(){var t=[];return t.push(this.startPoint),t.push(this.endPoint),t},getPoint:function(t){var e=t*(this.endPoint.x-this.startPoint.x)+this.startPoint.x,i=t*(this.endPoint.y-this.startPoint.y)+this.startPoint.y;return new Point(e,i)},toString:function(){return"line("+this.startPoint+","+this.endPoint+")"}},t.exports=i},function(t,e,i){function n(t,e){r.call(this),this.model=t,this.options={outline:{enable:!0,radius:!0,initVisible:!1},text:{color:"#000000",lineHeight:24}},this.bpmnInfo={type:-1,name:"BPMNDiagram",displayName:"Task"};var i=t.get("resourceId");i&&""!=i&&(this.resourceId=i),this.initEvent(e)}var r=i(72),o=i(4),s=(i(3),i(73));n.prototype.initEvent=function(t){var e=this,i=["dblclick","click"];o.each(i,function(i){e.on(i,function(n){var r={};r.event=n,r.type=i,r.target=e,t.trigger(i,r)},this)})},n.prototype.getRect=function(t){},n.prototype.rectContain=function(t,e){var i=this.getRect();return i.boundingRect.contain(t,e)},n.prototype.toJSON=function(){if(this.model.set("resourceId",this.resourceId),this.model.set("properties.type",this.bpmnInfo.type),this.model.set("stencil.type",this.bpmnInfo.name),this.slotEvent&&this.slotEvent.length>0){for(var t=[],e=this.slotEvent.length-1;e>=0;e--)t.push(this.slotEvent[e].resourceId);this.model.set("properties.slotEvent",t)}this.model.set("properties.type",this.bpmnInfo.type);var i=this.getRect().boundingRect;return this.model.set("bounds.upperLeft.x",i.x),this.model.set("bounds.upperLeft.y",i.y),this.model.set("bounds.lowerRight.x",i.x+i.width),this.model.set("bounds.lowerRight.y",i.y+i.height),this.model.option},n.prototype.setModel=function(t){var e=this,i=this.model.get("properties.name");if(this.model.mergeOption(t),i!=t.properties.name){var n,r=this.childOfName("Title"),o=t.properties.name.length;o>64?(n=t.properties.name.substr(0,64)+"..",this.alarm.isShow=!0):(n=t.properties.name,this.alarm.isShow=!1),r.attr("style",{text:n}),e.refreshText(e);var s=t.properties.name,a=this.alarm.childOfName("Text");a.attr("style",{text:s});var h=a.getBoundingRect().width+4,l=a.getBoundingRect().height+8,c=[[0,0],[h,0],[h,l],[h-3,l],[h-6,l+3],[h-9,l],[0,l],[0,0]],u=this.alarm.childOfName("Polyline");u.attr("shape",{points:c});var d=[this.position[0]+this.getBoundingRect().width-(this.alarm.getBoundingRect().width-6),this.position[1]-this.alarm.getBoundingRect().height-3];this.alarm.attr("position",d)}},o.inherits(n,r),s.enableClassManagement(n,{registerWhenExtend:!0}),t.exports=n},function(t,e,i){function n(){this.resourceId=o.getUUID(),r.Group.call(this)}var r=i(3),o=i(69);n.prototype.render=function(){},n.prototype.getRect=function(t){},n.prototype.drawText=function(t,e){var i=this.bpmnInfo.name;null!=t&&(i=t);var n=new r.Text({style:{text:i,color:e?e:this.options.text.color,textFont:"12px Microsoft YaHei"},zlevel:20}),o=this.getRect().x-this.position[0]-n.getBoundingRect().width/2,s=this.getRect().y-this.position[1]+this.getBoundingRect().height/2+n.getBoundingRect().height+6;return n.attr("style",{x:o,y:s}),{text:n,rect:n.getBoundingRect()}},n.prototype.refreshText=function(){var t=this.childOfName("Title"),e=this.getRect().x-this.position[0]-t.getBoundingRect().width/2,i=this.getRect().y-this.position[1]+this.getBoundingRect().height/2+t.getBoundingRect().height+6;t.attr("style",{x:e,y:i})},n.prototype.toJSON=function(){},r.Util.inherits(n,r.Group),t.exports=n},function(t,e,i){function n(t,e){var i=o.slice(arguments,2);return this.superClass.prototype[e].apply(t,i)}function r(t,e,i){return this.superClass.prototype[e].apply(t,i)}var o=i(4),s={},a=".",h="___FT__COMPONENT__CONTAINER___",l=s.parseClassType=function(t){var e={main:"",sub:""};return t&&(t=t.split(a),e.main=t[0]||"",e.sub=t[1]||""),e};s.enableClassExtend=function(t,e){t.extend=function(i){var s=function(){e&&e.apply(this,arguments),t.apply(this,arguments)};return o.extend(s.prototype,i),s.extend=this.extend,s.superCall=n,s.superApply=r,o.inherits(s,this),s.superClass=this,s}},s.enableClassManagement=function(t,e){function i(t){var e=n[t.main];return e&&e[h]||(e=n[t.main]={},e[h]=!0),e}e=e||{};var n={};if(t.registerClass=function(t,e){if(e)if(e=l(e),e.sub){if(e.sub!==h){var r=i(e);r[e.sub]=t}}else{if(n[e.main])return;n[e.main]=t}return t},t.getClass=function(t,e,i){var r=n[t];if(r&&r[h]&&(r=e?r[e]:null),i&&!r)throw new Error("Component "+t+"."+(e||"")+" not exists. Load it first.");return r},t.getClassesByMainType=function(t){t=l(t);var e=[],i=n[t.main];return i&&i[h]?o.each(i,function(t,i){
i!==h&&e.push(t)}):e.push(i),e},t.hasClass=function(t){return t=l(t),!!n[t.main]},t.getAllClassMainTypes=function(){var t=[];return o.each(n,function(e,i){t.push(i)}),t},t.hasSubTypes=function(t){t=l(t);var e=n[t.main];return e&&e[h]},t.parseClassType=l,e.registerWhenExtend){var r=t.extend;r&&(t.extend=function(e){var i=r.call(this,e);return t.registerClass(i,e.type)})}return t},t.exports=s},function(t,e,i){var n=i(75),r=(i(4),n.extend({type:"BPMN",defaultOption:{resourceId:"",properties:{type:-1,name:null,notes:"",extProperties:{}},stencil:{type:"BPMNDiagram"},childShapes:[],outgoing:[],bounds:{upperLeft:{x:0,y:0},lowerRight:{x:0,y:0}}}}));t.exports=r},function(t,e,i){function n(t,e,i){this.parentModel=e,this.option=t,this.init&&(arguments.length<=3?this.init(t,e,i):this.init.apply(this,arguments))}var r=i(4),o=i(73);n.prototype={constructor:n,init:function(t,e,i){r.merge(t,this.getDefaultOption())},getDefaultOption:function(){if(!this.hasOwnProperty("__defaultOption")){for(var t=[],e=this.constructor;e;){var i=e.prototype.defaultOption;i&&t.push(i),e=e.superClass}for(var n={},o=t.length-1;o>=0;o--)n=r.merge(n,t[o],!0);this.__defaultOption=n}return this.__defaultOption},mergeOption:function(t){r.merge(this.option,t,!0)},get:function(t,e){if(!t)return this.option;"string"==typeof t&&(t=t.split("."));for(var i=this.option,n=this.parentModel,r=0;r<t.length&&(i=i&&"object"==typeof i?i[t[r]]:null,null!=i);r++);return null==i&&n&&!e&&(i=n.get(t)),i},set:function(t,e){var i=this.option;if(t.indexOf(".")==-1)i[t]=e;else{for(var n,r=t.split("."),o=r.length,s=i,a=0;a<o-1;a++)n=r[a],null==s[n]&&(s[n]={}),s=s[n];n=r[o-1],s[n]=e}},getShallow:function(t,e){var i=this.option,n=i&&i[t],r=this.parentModel;return null==n&&r&&!e&&(n=r.getShallow(t)),n},getModel:function(t,e){var i=this.get(t,!0),r=this.parentModel,o=new n(i,e||r&&r.getModel(t));return o},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){var t=this.constructor;return new t(r.clone(this.option))}},o.enableClassExtend(n),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.startIcon="M11.25,8.25 L11.25,22.5 L22.5,15.375 L11.25,8.25 Z",this.itemSize=20,this.bpmnInfo={type:29,name:"StartNoneEvent"},this.render(t)}var r=i(77),o=i(4),s=i(3);n.prototype.render=function(t){this.removeAll(),this.model=t;var e=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize},style:{fill:"#7ED321"}});e.name="Circle",this.add(e);var i=this.itemSize,n={x:-i/2,y:-i/2,width:i,height:i};this.add(s.makePath(this.startIcon,{style:{fill:"#FFFFFF"}},n,"center")),this.position=[t.get("bounds.upperLeft.x")+i,t.get("bounds.upperLeft.y")+i];var r=this.drawText(t.get("properties.name"));r.text.name="Title",this.add(r.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.bpmnInfo={type:-1,name:"EventNode"},this.model=t}var r=i(71),o=i(4),s=i(25);n.prototype.render=function(){},n.prototype.getRect=function(t){var e=this.getBoundingRect(),i=[];i[0]=[-e.width/2,-e.height/2],i[1]=[e.width/2,-e.height/2],i[2]=[e.width/2,e.height/2],i[3]=[-e.width/2,e.height/2],i[4]=[-e.width/2,-e.height/2];var n=new s(this.position[0]-e.width/2,this.position[1]-e.height/2,e.width,e.height);return{x:this.position[0],y:this.position[1],width:e.width/2,height:e.height/2,points:i,boundingRect:n}},n.prototype.reDraw=function(t,e){this.attr("position",[t,e])},n.prototype.getBoundingRect=function(){var t=this.childOfName("Circle");return t.getBoundingRect()},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.bpmnType="EndNoneEvent",this.itemSize=20,this.rectSize=12,this.bpmnInfo={type:31,name:"EndNoneEvent"},this.render(t)}var r=i(77),o=i(4),s=(i(69),i(3));n.prototype.render=function(t){this.model=t;var e=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize},style:{fill:"#D0011B"}});e.name="Circle",this.add(e);var i=new s.Rect({shape:{x:-this.rectSize/2,y:-this.rectSize/2,width:this.rectSize,height:this.rectSize},style:{fill:"#FFFFFF"}});this.add(i);var n=2*this.itemSize;this.position=[t.get("bounds.upperLeft.x")+n/2,t.get("bounds.upperLeft.y")+n/2];var r=this.drawText(t.get("properties.name"));r.text.name="Title",this.add(r.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.rectSize={width:100,height:60},this.iconPath="M765.573741 718.489888c-14.999622-112.659873-119.671567-196.438974-237.776452-196.438974-118.912273 0-220.514299 85.277222-238.20317 198.770066-11.840676 76.071559 54.585199 71.326489 54.585199 71.326489l360.734878 0C704.913173 792.148491 776.608052 801.364387 765.573741 718.489888zM690.249195 365.718379c0 89.911776-72.889077 162.810063-162.79676 162.810063-89.908706 0-162.797783-72.898287-162.797783-162.810063 0-89.916892 72.889077-162.80597 162.797783-162.80597C617.360118 202.912409 690.249195 275.801487 690.249195 365.718379z",this.bpmnInfo={type:0,name:"UserTask"},this.render(t)}var r=i(80),o=i(4),s=i(3);n.prototype.render=function(t){var e=new s.Rect({shape:{x:.5,y:.5,width:this.rectSize.width-1,height:this.rectSize.height-1,r:7},style:{fill:"#f9f9f9",stroke:"#bbbbbb"}});e.name="Rect",this.add(e);var e={x:5,y:5,width:15,height:15},i=s.makePath(this.iconPath,{style:{fill:"#4990E2"}},e);this.add(i),this.position=[t.get("bounds.upperLeft.x"),t.get("bounds.upperLeft.y")];var n=this.drawText(t.get("properties.name"));n.text.name="Title",this.add(n.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.bpmnInfo={type:-1,name:"TaskNode"},this.model=t,this.slot=[],this.slotEvent=[]}var r=i(71),o=i(4),s=i(25);n.prototype.render=function(){},n.prototype.getRect=function(){var t=this.getBoundingRect(),e=[];e[0]=[-t.width/2,-t.height/2],e[1]=[t.width/2,-t.height/2],e[2]=[t.width/2,t.height/2],e[3]=[-t.width/2,t.height/2],e[4]=[-t.width/2,-t.height/2];var i=new s(this.position[0],this.position[1],t.width,t.height);return{x:this.position[0]+t.width/2,y:this.position[1]+t.height/2,width:t.width,height:t.height,points:e,boundingRect:i}},n.prototype.getBoundingRect=function(){var t=this.childOfName("Rect");return t.getBoundingRect()},n.prototype.reDraw=function(t,e){var i=this.getBoundingRect();this.attr("position",[t-i.width/2,e-i.height/2])},n.prototype.refresh=function(t){var e=this.childOfName("Rect");e.setShape(t.shape),this.attr("position",t.position)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.rectSize={width:100,height:60},this.iconPath="m 17,9.3290326 c -0.0069,0.5512461 -0.455166,1.0455894 -0.940778,1.0376604 l -5.792746,0 c 0.0053,0.119381 0.0026,0.237107 0.0061,0.355965 l 5.154918,0 c 0.482032,-0.0096 0.925529,0.49051 0.919525,1.037574 -0.0078,0.537128 -0.446283,1.017531 -0.919521,1.007683 l -5.245273,0 c -0.01507,0.104484 -0.03389,0.204081 -0.05316,0.301591 l 2.630175,0 c 0.454137,-0.0096 0.872112,0.461754 0.866386,0.977186 C 13.619526,14.554106 13.206293,15.009498 12.75924,15 L 3.7753054,15 C 3.6045812,15 3.433552,14.94423 3.2916363,14.837136 c -0.00174,0 -0.00436,0 -0.00609,0 C 1.7212035,14.367801 0.99998255,11.458641 1,11.458641 L 1,7.4588393 c 0,0 0.6623144,-1.316333 1.8390583,-2.0872584 1.1767614,-0.7711868 6.8053358,-2.40497 7.2587847,-2.8052901 0.453484,-0.40032 1.660213,1.4859942 0.04775,2.4010487 C 8.5332315,5.882394 8.507351,5.7996113 8.4370292,5.7936859 l 6.3569748,-0.00871 c 0.497046,-0.00958 0.952273,0.5097676 0.94612,1.0738232 -0.0053,0.556126 -0.456176,1.0566566 -0.94612,1.0496854 l -4.72435,0 c 0.01307,0.1149374 0.0244,0.2281319 0.03721,0.3498661 l 5.952195,0 c 0.494517,-0.00871 0.947906,0.5066305 0.940795,1.0679848 z",this.bpmnInfo={type:4,name:"ManualTask"},this.render(t)}var r=i(80),o=i(4),s=i(3);n.prototype.render=function(t){var e=new s.Rect({shape:{x:.5,y:.5,width:this.rectSize.width-1,height:this.rectSize.height-1,r:7},style:{fill:"#f9f9f9",stroke:"#bbbbbb"}});e.name="Rect",this.add(e);var e={x:5,y:5,width:15,height:15};this.add(s.makePath(this.iconPath,{style:{fill:"#d1b575"}},e)),this.position=[t.get("bounds.upperLeft.x"),t.get("bounds.upperLeft.y")];var i=this.drawText(t.get("properties.name"));i.text.name="Title",this.add(i.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.rectSize={width:100,height:60},this.iconPath="m 5,2 0,0.094 c 0.23706,0.064 0.53189,0.1645 0.8125,0.375 0.5582,0.4186 1.05109,1.228 1.15625,2.5312 l 8.03125,0 1,0 1,0 c 0,-3 -2,-3 -2,-3 l -10,0 z M 4,3 4,13 2,13 c 0,3 2,3 2,3 l 9,0 c 0,0 2,0 2,-3 L 15,6 6,6 6,5.5 C 6,4.1111 5.5595,3.529 5.1875,3.25 4.8155,2.971 4.5,3 4.5,3 L 4,3 z",this.bpmnInfo={type:7,name:"ScriptTask"},this.render(t)}var r=i(80),o=i(4),s=i(3);n.prototype.render=function(t){var e=new s.Rect({shape:{x:.5,y:.5,width:this.rectSize.width-1,height:this.rectSize.height-1,r:7},style:{fill:"#f9f9f9",stroke:"#bbbbbb"}});e.name="Rect",this.add(e);var e={x:5,y:5,width:15,height:15};this.add(s.makePath(this.iconPath,{style:{fill:"#72a7d0"}},e)),this.position=[t.get("bounds.upperLeft.x"),t.get("bounds.upperLeft.y")];var i=this.drawText(t.get("properties.name"));i.text.name="Title",this.add(i.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.rectSize={width:100,height:60},this.iconPath="M49.013,51.003c1.847,1.303,7.414,5.174,16.702,11.61S82.118,74.005,87.061,77.48c0.543,0.381,1.697,1.209,3.462,2.485c1.765,1.277,3.232,2.31,4.399,3.097c1.168,0.787,2.58,1.67,4.237,2.647c1.657,0.977,3.219,1.711,4.685,2.198c1.467,0.49,2.825,0.733,4.074,0.733H108h0.082c1.249,0,2.607-0.243,4.074-0.733c1.466-0.487,3.029-1.222,4.685-2.198c1.656-0.978,3.068-1.86,4.236-2.647s2.634-1.82,4.399-3.097s2.92-2.104,3.463-2.485c4.996-3.476,17.707-12.302,38.129-26.479c3.965-2.769,7.277-6.11,9.939-10.021C179.67,37.071,181,32.97,181,28.679c0-3.585-1.291-6.654-3.871-9.207c-2.58-2.553-5.636-3.829-9.165-3.829H48.035c-4.182,0-7.4,1.412-9.654,4.236C36.127,22.704,35,26.235,35,30.471c0,3.422,1.494,7.13,4.481,11.122S45.646,48.722,49.013,51.003z M172.852,59.72c-17.814,12.057-31.34,21.427-40.572,28.108c-3.096,2.281-5.608,4.061-7.537,5.336c-1.928,1.277-4.494,2.58-7.699,3.911c-3.204,1.331-6.191,1.996-8.961,1.996H108h-0.082c-2.77,0-5.758-0.665-8.962-1.996s-5.771-2.634-7.699-3.911c-1.928-1.275-4.44-3.055-7.536-5.336c-7.333-5.377-20.83-14.747-40.492-28.108c-3.096-2.063-5.839-4.427-8.229-7.088v64.688c0,3.586,1.276,6.654,3.829,9.207c2.553,2.554,5.622,3.83,9.207,3.83h119.929c3.584,0,6.653-1.276,9.206-3.83c2.554-2.554,3.829-5.621,3.829-9.207V52.632C178.664,55.238,175.949,57.602,172.852,59.72z",this.bpmnInfo={type:8,name:"MailTask"},this.render(t)}var r=i(80),o=i(4),s=i(3);n.prototype.render=function(t){var e=new s.Rect({shape:{x:.5,y:.5,width:this.rectSize.width-1,height:this.rectSize.height-1,r:7},style:{fill:"#f9f9f9",stroke:"#bbbbbb"}});e.name="Rect",this.add(e);var e={x:5,y:5,width:20,height:15};this.add(s.makePath(this.iconPath,{style:{fill:"#72a7d0"}},e)),this.position=[t.get("bounds.upperLeft.x"),t.get("bounds.upperLeft.y")];var i=this.drawText(t.get("properties.name"));i.text.name="Title",this.add(i.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.startIcon="M 10 0 C 4.4771525 0 0 4.4771525 0 10 C 0 15.522847 4.4771525 20 10 20 C 15.522847 20 20 15.522847 20 10 C 20 4.4771525 15.522847 1.1842379e-15 10 0 z M 9.09375 1.03125 C 9.2292164 1.0174926 9.362825 1.0389311 9.5 1.03125 L 9.5 3.5 L 10.5 3.5 L 10.5 1.03125 C 15.063526 1.2867831 18.713217 4.9364738 18.96875 9.5 L 16.5 9.5 L 16.5 10.5 L 18.96875 10.5 C 18.713217 15.063526 15.063526 18.713217 10.5 18.96875 L 10.5 16.5 L 9.5 16.5 L 9.5 18.96875 C 4.9364738 18.713217 1.2867831 15.063526 1.03125 10.5 L 3.5 10.5 L 3.5 9.5 L 1.03125 9.5 C 1.279102 5.0736488 4.7225326 1.4751713 9.09375 1.03125 z M 9.5 5 L 9.5 8.0625 C 8.6373007 8.2844627 8 9.0680195 8 10 C 8 11.104569 8.8954305 12 10 12 C 10.931981 12 11.715537 11.362699 11.9375 10.5 L 14 10.5 L 14 9.5 L 11.9375 9.5 C 11.756642 8.7970599 11.20294 8.2433585 10.5 8.0625 L 10.5 5 L 9.5 5 z",this.itemSize=10,this.bpmnInfo={type:43,name:"CatchTimerEvent"},this.render(t)}var r=i(77),o=i(4),s=i(3);n.prototype.render=function(t){var e=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize-.5},style:{fill:"#ffffff",stroke:"#585858"}});e.name="Circle",this.add(e);var e=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize-3},style:{fill:"#ffffff",stroke:"#585858"}});this.add(e);var i=this.itemSize+6,n={x:-i/2,y:-i/2,width:i,height:i};this.add(s.makePath(this.startIcon,{style:{stroke:"#585858"}},n,"center")),this.position=[t.get("bounds.upperLeft.x")+this.itemSize,t.get("bounds.upperLeft.y")+this.itemSize]},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.startIcon="M7.7124971 20.247342  L22.333334 20.247342  L15.022915000000001 7.575951200000001  L7.7124971 20.247342  z",this.itemSize=10,this.bpmnInfo={type:72,name:"CatchSignalEvent"},this.render(t)}var r=i(77),o=i(4),s=i(3);n.prototype.render=function(t){var e=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize-.5},style:{fill:"#ffffff",stroke:"#585858"}});e.name="Circle",this.add(e);var e=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize-3},style:{fill:"#ffffff",stroke:"#585858"}});this.add(e);var i=this.itemSize+6,n={x:-i/2,y:-i/2-3,width:i,height:i};this.add(s.makePath(this.startIcon,{style:{stroke:"#585858",fill:"#ffffff"}},n,"center")),this.position=[t.get("bounds.upperLeft.x")+this.itemSize,t.get("bounds.upperLeft.y")+this.itemSize]},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.startIcon="M7.7124971 20.247342  L22.333334 20.247342  L15.022915000000001 7.575951200000001  L7.7124971 20.247342  z",this.itemSize=10,this.bpmnInfo={type:75,name:"ThrowSignalEvent"},this.render(t)}var r=i(77),o=i(4),s=i(3);n.prototype.render=function(t){var e=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize-.5},style:{fill:"#ffffff",stroke:"#585858"}});e.name="Circle",this.add(e);var e=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize-3},style:{fill:"#ffffff",stroke:"#585858"}});this.add(e);var i=this.itemSize+6,n={x:-i/2,y:-i/2-3,width:i,height:i};this.add(s.makePath(this.startIcon,{style:{stroke:"#585858",fill:"#000000"}},n,"center")),this.position=[t.get("bounds.upperLeft.x")+this.itemSize,t.get("bounds.upperLeft.y")+this.itemSize]},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.startIcon="M0 19.506393964  L19.506393964 0  L39.012787964 19.506393964  L19.506393964 39.012787964  L0 19.506393964  L0 19.506393964  z",this.nextIcon="M19.851221564 27.782256064000002  C24.231410964 27.782256064000002 27.782256064000002 24.231410964 27.782256064000002 19.851221564  C27.782256064000002 15.471032163999999 24.231410964 11.920187063999999 19.851221564 11.920187063999999  C15.471032163999999 11.920187063999999 11.920187063999999 15.471032163999999 11.920187063999999 19.851221564  C11.920187063999999 24.231410964 15.471032163999999 27.782256064000002 19.851221564 27.782256064000002  z",this.itemSize=20,this.bpmnInfo={type:20,name:"InclusiveGateway"},this.render(t)}var r=i(88),o=i(4),s=i(3);n.prototype.render=function(t){var e=2*this.itemSize,i={x:-e/2,y:-e/2,width:e,height:e},n=s.makePath(this.startIcon,{style:{fill:"#F6A623"}},i,"center");n.name="Path",this.add(n);var e=this.itemSize,i={x:-e/2,y:-e/2,width:e,height:e};this.add(s.makePath(this.nextIcon,{style:{fill:"#FFFFFF"}},i,"center")),this.position=[t.get("bounds.upperLeft.x")+e,t.get("bounds.upperLeft.y")+e];var r=this.drawText(t.get("properties.name"));r.text.name="Title",this.add(r.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.bpmnInfo={type:-1,name:"GatewayNode"},this.model=t}var r=i(71),o=i(4),s=i(25);n.prototype.render=function(){},n.prototype.fromJSON=function(t){},n.prototype.getRect=function(t){var e=this.getBoundingRect(),i=[];i[0]=[-e.width/2,-e.height/2],i[1]=[e.width/2,-e.height/2],i[2]=[e.width/2,e.height/2],i[3]=[-e.width/2,e.height/2],i[4]=[-e.width/2,-e.height/2];var n=new s(this.position[0]-e.width/2,this.position[1]-e.height/2,e.width,e.height);return{x:this.position[0],y:this.position[1],width:e.width/2,height:e.height/2,points:i,boundingRect:n}},n.prototype.reDraw=function(t,e){this.attr("position",[t,e])},n.prototype.getBoundingRect=function(){var t=this.childOfName("Path");return t.getBoundingRect()},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.startIcon="M0 19.506393964  L19.506393964 0  L39.012787964 19.506393964  L19.506393964 39.012787964  L0 19.506393964  L0 19.506393964  z",this.nextIcon="M19.904129064000003 17.676993964000005  L24.997457864000005 12.583664864000003  L26.058118064000006 11.523004664000002  L28.179438464 13.644324964000003  L27.118778264 14.704985164000002  L22.025449364000004 19.798314364  L27.118778264 24.891643464000005  L28.179438464 25.952303664000006  L26.058118064000006 28.073623964000003  L24.997457864000005 27.012963764000006  L19.904129064000003 21.919634764  L14.810800164000003 27.012963764000006  L13.750140064000002 28.073623964000003  L11.628819664000003 25.952303664000006  L12.689479764000003 24.891643464000005  L17.782808764000002 19.798314364  L12.689479764000003 14.704985164000002  L11.628819664000003 13.644324964000003  L13.750140064000002 11.523004664000002  L14.810800164000003 12.583664864000003  L19.904129064000003 17.676993964000005  z",this.itemSize=20,this.bpmnInfo={type:17,name:"ExclusiveGateway"},this.render(t)}var r=i(88),o=i(4),s=i(3);n.prototype.render=function(t){var e=2*this.itemSize,i={x:-e/2,y:-e/2,width:e,height:e},n=s.makePath(this.startIcon,{style:{fill:"#F6A623"}},i,"center");n.name="Path",this.add(n);var e=this.itemSize,i={x:-e/2,y:-e/2,width:e,height:e};this.add(s.makePath(this.nextIcon,{style:{fill:"#FFFFFF"}},i,"center")),this.position=[t.get("bounds.upperLeft.x")+e,t.get("bounds.upperLeft.y")+e];var r=this.drawText(t.get("properties.name"));r.text.name="Title",this.add(r.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.startIcon="M0 19.506393964  L19.506393964 0  L39.012787964 19.506393964  L19.506393964 39.012787964  L0 19.506393964  L0 19.506393964  z",this.nextIcon="M8.275862069 11.965517269000001  L1.499999999 11.965517269000001  L0 11.965517269000001  L0 8.965517239  L1.499999999 8.965517239  L8.275862069 8.965517239  L8.275862069 1.499999999  L8.275862069 0  L11.275862069 0  L11.275862069 1.499999999  L11.275862069 8.965517239  L18.741379269 8.965517239  L20.241379269 8.965517239  L20.241379269 11.965517269000001  L18.741379269 11.965517269000001  L11.275862069 11.965517269000001  L11.275862069 18.741379269  L11.275862069 20.241379269  L8.275862069 20.241379269  L8.275862069 18.741379269  L8.275862069 11.965517269000001  z",this.itemSize=20,this.bpmnInfo={type:20,name:"ParallelGateway"},this.render(t)}var r=i(88),o=i(4),s=i(3);n.prototype.render=function(t){var e=2*this.itemSize,i={x:-e/2,y:-e/2,width:e,height:e},n=s.makePath(this.startIcon,{style:{fill:"#F6A623"}},i,"center");n.name="Path",this.add(n);var e=this.itemSize,i={x:-e/2,y:-e/2,width:e,height:e};this.add(s.makePath(this.nextIcon,{style:{fill:"#FFFFFF"}},i,"center")),this.position=[t.get("bounds.upperLeft.x")+e,t.get("bounds.upperLeft.y")+e];var r=this.drawText(t.get("properties.name"));r.text.name="Title",this.add(r.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.bpmnInfo={type:-1,name:"SubProcess"},this.model=t,this.slot=[],this.slotEvent=[];var i,n;i=t.get("bounds.lowerRight.x")-t.get("bounds.upperLeft.x"),n=t.get("bounds.lowerRight.y")-t.get("bounds.upperLeft.y"),(!i||i<=0)&&(i=160),(!n||n<=0)&&(n=100),this.rectSize={width:i,height:n},this.render(t)}var r=i(71),o=i(4),s=i(25),a=i(3),h=i(92);n.prototype.initEvent=function(t){var e=this,i=["dblclick","click"];o.each(i,function(i){e.on(i,function(n){var r={};r.event=n;var o=n.target;o.parent&&o.parent instanceof h||(r.type=i,r.target=e,t.trigger(i,r))},this)})},n.prototype.render=function(t){var e=new a.Rect({shape:{x:.5,y:.5,width:this.rectSize.width-1,height:this.rectSize.height-1,r:7},style:{fill:"#f9f9f9",stroke:"#bbbbbb"}});e.name="Rect",this.add(e),this.position=[t.get("bounds.upperLeft.x"),t.get("bounds.upperLeft.y")];var i=this.drawText(t.get("properties.name"));i.text.name="Title",this.add(i.text)},n.prototype.getRect=function(t){var e=this.getBoundingRect(),i=[];i[0]=[-e.width/2,-e.height/2],i[1]=[e.width/2,-e.height/2],i[2]=[e.width/2,e.height/2],i[3]=[-e.width/2,e.height/2],i[4]=[-e.width/2,-e.height/2];var n=new s(this.position[0],this.position[1],e.width,e.height);return{x:this.position[0]+e.width/2,y:this.position[1]+e.height/2,width:e.width,height:e.height,points:i,boundingRect:n}},n.prototype.reDraw=function(t,e){var i=this.getBoundingRect();this.attr("position",[t-i.width/2,e-i.height/2])},n.prototype.refresh=function(t){var e=this.childOfName("Rect");e.setShape(t.shape),this.attr("position",t.position),this.refreshText()},n.prototype.getBoundingRect=function(){var t=this.childOfName("Rect");return t.getBoundingRect()},n.prototype.setModel=function(t){var e=this,i=this.model.get("properties.name");if(this.model.mergeOption(t),i!=t.properties.name){var n,r=this.childOfName("Title"),o=t.properties.name.length;o>64?(n=t.properties.name.substr(0,64)+"..",this.alarm.isShow=!0):(n=t.properties.name,this.alarm.isShow=!1),r.attr("style",{text:n}),e.refreshText(e);var s=t.properties.name,a=this.alarm.childOfName("Text");a.attr("style",{text:s});var h=a.getBoundingRect().width+4,l=a.getBoundingRect().height+8,c=[[0,0],[h,0],[h,l],[h-3,l],[h-6,l+3],[h-9,l],[0,l],[0,0]],u=this.alarm.childOfName("Polyline");u.attr("shape",{points:c});var d=[this.position[0]+this.getBoundingRect().width-(this.alarm.getBoundingRect().width-6),this.position[1]-this.alarm.getBoundingRect().height-3];this.alarm.attr("position",d)}},n.prototype.toJSON=function(){if(this.model.set("resourceId",this.resourceId),this.model.set("properties.type",this.bpmnInfo.type),this.model.set("stencil.type",this.bpmnInfo.name),this.slotEvent&&this.slotEvent.length>0){for(var t=[],e=this.slotEvent.length-1;e>=0;e--)t.push(this.slotEvent[e].resourceId);this.model.set("properties.slotEvent",t)}var i=this.getRect().boundingRect;this.model.set("bounds.upperLeft.x",i.x),this.model.set("bounds.upperLeft.y",i.y),this.model.set("bounds.lowerRight.x",i.x+i.width),this.model.set("bounds.lowerRight.y",i.y+i.height);var n=[];return this.eachChild(function(t){t instanceof r&&n.push(t.toJSON()),t instanceof h&&n.push(t.toJSON())}),this.model.set("childShapes",n),this.model.option},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t){a.call(this),this.resourceId=r.getUUID();var e={symbol:{type:"arrow",size:10,color:"#000000"},style:{lineWidth:1,stroke:"#000000",lineType:n.TYPE_STRAIGHT},hoverStyle:{lineWidth:2,stroke:"lime"},arrowHoverStyle:{fill:"lime"},shape:{points:null,smooth:!1,smoothConstraint:null},position:[0,0],isEdit:!0,text:{text:"",color:"#000000",textFont:"12px Microsoft YaHei"}},i=t||{};this.options=o.merge(e,i,!0),this.model=t.model,this.handles=[],this.connectionPoints=[],this.conPointsGroup=null,this.startNode=null,this.endNode=null,this.icons=[],this.render()}var r=i(69),o=i(4),s=i(3),a=i(72),h=i(93),l=i(94),c=i(95);n.TYPE_STRAIGHT="straight",n.TYPE_JAGGED="jagged",n.TYPE_ROUND="round",n.RADIUS=3,n.START_NODE="startNode",n.END_NODE="endNode",n.LEFT="left",n.RIGHT="right",n.TOP="top",n.BOTTOM="bottom",n.BOTTOM="bottom",n.SEPERATOR="-",n.prototype.refresh=function(t){t&&(this.turningPoints=t);var t=r.traslatePoints(this.turningPoints);this.line.attr("shape",{points:t});var e=this.childOfName("toSymbol");e&&(e.attr("position",t[t.length-1]),e.attr("rotation",r.tangentRotation(this.turningPoints[this.turningPoints.length-2],this.turningPoints[this.turningPoints.length-1])));var i=this.childOfName("lineText");if(!i&&this.options.text.text){var o=this.drawText("lineText",this.options.text.text,0,0);this.add(o.text),i=this.childOfName("lineText")}if(i){i.setStyle("text",this.options.text.text);var s=this.middle(this.options.text);if(this.options.style.lineType==n.TYPE_STRAIGHT){var t=r.getMaxLineLength(this.turningPoints),a=-Math.atan2(t[1].y-s[1],t[1].x-s[0]);i.attr("rotation",a)}i.attr("position",s)}},n.prototype.render=function(){var t=this;this.line=new s.Polyline({position:this.options.position,shape:this.options.shape,style:this.options.style,z:0}),this.add(this.line);var e=["dblclick","click"];o.each(e,function(e){t.line.on(e,function(i){var n={};n.event=i,n.type="Connector:"+e,n.target=t,t.trigger(n.type,n),0!=t.options.isEdit&&(t.options.isEdit&&t.connectionPoints.length<1&&t.turningPoints.length>=2&&t.createAllconnectionPoint(),t.handles.length<1&&t.shapeSetHandle())})}),this.options.isEdit&&(this.conPointsGroup=new s.Group,this.add(this.conPointsGroup));var i=this.createSymbol("toSymbol",this.options.symbol.type,this.options.symbol.size,this.options.symbol.color);if(i&&this.add(i),this.options.hoverStyle){var n=this.line;s.setElementHoverStl(n,this.options.hoverStyle),i&&s.setElementHoverStl(i,this.options.arrowHoverStyle),n.on("mouseover",function(){s.doEnterHover(n),i&&s.doEnterHover(i)}).on("mouseout",function(){s.doLeaveHover(n),i&&s.doLeaveHover(i)})}if(this.options.text.text&&""!=this.options.text.text){var r=this.drawText("lineText",this.options.text.text,0,0);this.add(r.text)}},n.prototype.createAllconnectionPoint=function(){var t=this.startNode.getRect?this.startNode.getRect().boundingRect:r.getRect(this.startNode).boundingRect,e=this.endNode.getRect?this.endNode.getRect().boundingRect:r.getRect(this.endNode).boundingRect,i=r.getConnectorPoints(t),o=r.getConnectorPoints(e);this.connectionPointCreate(this.startNode,i.left,n.START_NODE+n.SEPERATOR+n.LEFT),this.connectionPointCreate(this.startNode,i.right,n.START_NODE+n.SEPERATOR+n.RIGHT),this.connectionPointCreate(this.startNode,i.top,n.START_NODE+n.SEPERATOR+n.TOP),this.connectionPointCreate(this.startNode,i.bottom,n.START_NODE+n.SEPERATOR+n.BOTTOM),this.connectionPointCreate(this.endNode,o.left,n.END_NODE+n.SEPERATOR+n.LEFT),this.connectionPointCreate(this.endNode,o.right,n.END_NODE+n.SEPERATOR+n.RIGHT),this.connectionPointCreate(this.endNode,o.top,n.END_NODE+n.SEPERATOR+n.TOP),this.connectionPointCreate(this.endNode,o.bottom,n.END_NODE+n.SEPERATOR+n.BOTTOM),this.connectionPointCreate(this,this.turningPoints[0].clone(),c.TYPE_CONNECTOR),this.connectionPointCreate(this,this.turningPoints[this.turningPoints.length-1].clone(),c.TYPE_CONNECTOR)},n.prototype.connectionPointCreate=function(t,e,i){var n=new c(this,e,i);this.conPointsGroup.add(n.shape)},n.prototype.clearHandles=function(){for(var t=0;t<this.handles.length;t++)this.remove(this.handles[t].handleShape);this.handles=[],this.conPointsGroup&&this.conPointsGroup.removeAll()},n.prototype.shapeSetHandle=function(){for(var t=1;t<this.turningPoints.length-2;t++){var e,i,n,o=r.collinearity(this.turningPoints[t-1],this.turningPoints[t],this.turningPoints[t+1]),s=r.collinearity(this.turningPoints[t],this.turningPoints[t+1],this.turningPoints[t+2]);(o||s&&!this.turningPoints[t+1].equals(this.turningPoints[t+2]))&&(o&&!this.turningPoints[t-1].equals(this.turningPoints[t])||s)||(this.turningPoints[t].x===this.turningPoints[t+1].x?(i=this.turningPoints[t].x,n=(this.turningPoints[t].y+this.turningPoints[t+1].y)/2,e=new l("h",i,n,this)):this.turningPoints[t].y===this.turningPoints[t+1].y&&(i=(this.turningPoints[t].x+this.turningPoints[t+1].x)/2,n=this.turningPoints[t].y,e=new l("v",i,n,this)),e&&(this.add(e.handleShape),this.handles.push(e)))}},n.prototype.createSymbol=function(t,e,i,n){if("none"!==e){o.isArray(i)||(i=[i,i]);var r=h.createSymbol(e,-i[0]/2,-i[1]/2,i[0],i[1],n);return r.name=t,r}},n.prototype.drawText=function(t,e,i,n,r){var o=new s.Text({style:{text:e,x:i,y:n,fill:r?r:this.options.text.color,textFont:this.options.text.textFont},zlevel:20});return o.name=t,{text:o,rect:o.getBoundingRect()}},n.prototype.middle=function(t){if(this.options.style.lineType==n.TYPE_STRAIGHT){var e=r.getMaxLineLength(this.turningPoints);if(t){var i=s.textContain.getWidth(t.text,t.textFont),o=r.getAngle(e[0],e[1]),a=r.distance(e[0],e[1])/2-i/2,h=r.getEndPoint(e[0],a,o);return[h.x,h.y]}var l=(e[0].x+e[1].x)/2,c=(e[0].y+e[1].y)/2;return[l,c]}if(this.options.style.lineType==n.TYPE_JAGGED){for(var u=0,d=0;d<this.turningPoints.length-1;d++)u+=r.getLength(this.turningPoints[d],this.turningPoints[d+1]);for(var f=-1,p=0,d=0;d<this.turningPoints.length-1;d++){f=d;var g=r.getLength(this.turningPoints[d],this.turningPoints[d+1]);if(!(p+g<u/2))break;p+=g}if(f!=-1){var v=u/2-p;if(r.round(this.turningPoints[f].x,3)==r.round(this.turningPoints[f+1].x,3))return[this.turningPoints[f].x,Math.min(this.turningPoints[f].y,this.turningPoints[f+1].y)+v];if(r.round(this.turningPoints[f].y,3)==r.round(this.turningPoints[f+1].y,3))return[Math.min(this.turningPoints[f].x,this.turningPoints[f+1].x)+v,this.turningPoints[f].y];console.error("Connector:middle() - this should never happen "+this.turningPoints[f]+" "+this.turningPoints[f+1]+" nr of points "+this.turningPoints.length)}}return null},n.prototype.toJSON=function(){return this.model.set("resourceId",this.resourceId),this.model.set("properties.type",14),this.model.set("bounds.upperLeft.x",this.position[0]),this.model.set("bounds.upperLeft.y",this.position[1]),this.model.set("bounds.lowerRight.x",this.position[0]+this.getBoundingRect().width),this.model.set("bounds.lowerRight.y",this.position[1]+this.getBoundingRect().height),this.model.set("style.sPos",this.sPos),this.model.set("style.ePos",this.ePos),this.model.set("dockers",this.turningPoints),this.model.option},n.prototype.refreshModel=function(){this.model.set("options.dockers",this.turningPoints)},r.inherits(n,a),t.exports=n},function(t,e,i){"use strict";var n=i(3),r=i(25),o=n.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=e.width/2,o=e.height/2;t.moveTo(i,n-o),t.lineTo(i+r,n+o),t.lineTo(i-r,n+o),t.closePath()}}),s=n.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=e.width/2,o=e.height/2;t.moveTo(i,n-o),t.lineTo(i+r,n),t.lineTo(i,n+o),t.lineTo(i-r,n),t.closePath()}}),a=n.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.x,n=e.y,r=e.width/5*3,o=Math.max(r,e.height),s=r/2,a=s*s/(o-s),h=n-o+s+a,l=Math.asin(a/s),c=Math.cos(l)*s,u=Math.sin(l),d=Math.cos(l);t.arc(i,h,s,Math.PI-l,2*Math.PI+l);var f=.6*s,p=.7*s;t.bezierCurveTo(i+c-u*f,h+a+d*f,i,n-p,i,n),t.bezierCurveTo(i,n-p,i-c+u*f,h+a+d*f,i-c,h+a),t.closePath()}}),h=n.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.height,n=e.width,r=e.x,o=e.y,s=n/3*2;t.moveTo(r,o),t.lineTo(r+s,o+i),t.lineTo(r,o+i/4*3),t.lineTo(r-s,o+i),t.lineTo(r,o),t.closePath()}}),l={line:n.Line,rect:n.Rect,roundRect:n.Rect,square:n.Rect,circle:n.Circle,diamond:s,pin:a,arrow:h,triangle:o},c={line:function(t,e,i,n,r){r.x1=t,r.y1=e+n/2,r.x2=t+i,r.y2=e+n/2},rect:function(t,e,i,n,r){r.x=t,r.y=e,r.width=i,r.height=n},roundRect:function(t,e,i,n,r){r.x=t,r.y=e,r.width=i,r.height=n,r.r=Math.min(i,n)/4},square:function(t,e,i,n,r){var o=Math.min(i,n);r.x=t,r.y=e,r.width=o,r.height=o},circle:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.r=Math.min(i,n)/2},diamond:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.width=i,r.height=n},pin:function(t,e,i,n,r){r.x=t+i/2,r.y=e+n/2,r.width=i,r.height=n},arrow:function(t,e,i,n,r){r.x=t+i/2,r.y=e+n/2,r.width=i,r.height=n},triangle:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.width=i,r.height=n}},u={};for(var d in l)u[d]=new l[d];var f=n.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var t=this.style,e=this.shape;"pin"===e.symbolType&&"inside"===t.textPosition&&(t.textPosition=["50%","40%"],t.textAlign="center",t.textVerticalAlign="middle")},buildPath:function(t,e){var i=e.symbolType,n=u[i];"none"!==e.symbolType&&(n||(i="rect",n=u[i]),c[i](e.x,e.y,e.width,e.height,n.shape),n.buildPath(t,n.shape))}}),p=function(t){
if("image"!==this.type){var e=this.style,i=this.shape;i&&"line"===i.symbolType?e.stroke=t:this.__isEmptyBrush?(e.stroke=t,e.fill="#fff"):(e.fill&&(e.fill=t),e.stroke&&(e.stroke=t)),this.dirty()}},g={createSymbol:function(t,e,i,o,s,a){var h=0===t.indexOf("empty");h&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var l;return l=0===t.indexOf("image://")?new n.Image({style:{image:t.slice(8),x:e,y:i,width:o,height:s}}):0===t.indexOf("path://")?n.makePath(t.slice(7),{},new r(e,i,o,s)):new f({shape:{symbolType:t,x:e,y:i,width:o,height:s}}),l.__isEmptyBrush=h,l.setColor=p,l.setColor(a),l}};t.exports=g},function(t,e,i){function n(t,e,i,o){this.type=t,this.x=e,this.y=i,this.visible=!0,this.connector=o,this.handleShape=new r.Circle({shape:{cx:e,cy:i,r:n.RADIUS},style:{fill:"rgb(0,255,0)",stroke:"rgb(0,0,0)"},z:2,draggable:!0});var s=this;this.handleShape.on("drag",function(t){s.actionConnector(t.offsetX,t.offsetY)})}var r=i(3),o=i(69);n.RADIUS=4,n.prototype={constructor:n,equals:function(t){return!(!t instanceof n)&&(this.type==t.type&&this.x==t.x&&this.y==t.y&&this.visible==t.visible)},actionConnector:function(t,e){switch(this.type){case"v":for(var i,n=1;n<this.connector.turningPoints.length-1;n++)this.connector.turningPoints[n-1].y==this.connector.turningPoints[n].y&&this.connector.turningPoints[n].y==this.y&&Math.min(this.connector.turningPoints[n].x,this.connector.turningPoints[n-1].x)<=this.x&&Math.max(this.connector.turningPoints[n].x,this.connector.turningPoints[n-1].x)>=this.x&&(i=n);var r=e-this.y,s=o.translationMatrix(0,r);this.connector.turningPoints[i-1].transform(s),this.connector.turningPoints[i].transform(s),this.connector.refresh(),this.y=e;break;case"h":for(var i,n=1;n<this.connector.turningPoints.length-1;n++)this.connector.turningPoints[n-1].x==this.connector.turningPoints[n].x&&this.connector.turningPoints[n].x==this.x&&Math.min(this.connector.turningPoints[n].y,this.connector.turningPoints[n-1].y)<=this.y&&Math.max(this.connector.turningPoints[n].y,this.connector.turningPoints[n-1].y)>=this.y&&(i=n);var a=t-this.x,s=o.translationMatrix(a,0);this.connector.turningPoints[i-1].transform(s),this.connector.turningPoints[i].transform(s),this.connector.refresh(),this.x=t}}},t.exports=n},function(t,e,i){function n(t,e,i){this.connector=t,this.point=e.clone(),this.type=i,this.color=n.NORMAL_COLOR,this.oType="ConnectionPoint",this.shape=new r.Circle({shape:{cx:this.point.x,cy:this.point.y,r:n.RADIUS},style:{fill:this.color,stroke:"#000000"},z:2}),this.shape.type=this.type,this.shape.connector=t}var r=i(3);i(69);n.NORMAL_COLOR="#FFFF33",n.OVER_COLOR="#FF9900",n.CONNECTED_COLOR="#ff0000",n.RADIUS=4,n.TYPE_FIGURE="figure",n.TYPE_CONNECTOR="connector",n.prototype={constructor:n,equals:function(t){return this.point.equals(t.point)&&this.connector==t.connector&&this.type==t.type&&this.color==t.color&&this.radius==t.radius}},t.exports=n},function(t,e){var i={BPMN_TYPE:"stencil.type",BPMN_SCRIPT_TASK:"ScriptTask",BPMN_EVENT_SUB_PROCESS:"SubProcessTask",BPMN_TASK:"Task",TEMPLATE:"BPMNDiagram",RESOURCE_ID:"resourceId",SEQUENCE_FLOW:"SequenceFlow",SUB_PROCESS:"SubProcess",isTemplate:function(t){var e=t.get(i.BPMN_TYPE);return e===i.TEMPLATE},isActivity:function(t){var e=t.get(i.BPMN_TYPE);return e.indexOf("Task")!=-1},isSubProcess:function(t){var e=t.get(i.BPMN_TYPE);return e==i.SUB_PROCESS},isGateway:function(t){var e=t.get(i.BPMN_TYPE);return e.indexOf("Gateway")!=-1},isFlow:function(t){var e=t.get(i.BPMN_TYPE);return e===i.SEQUENCE_FLOW},isEvent:function(t){var e=t.get(i.BPMN_TYPE);return e.indexOf("Event")!=-1},isSlotEvent:function(t){var e=t.get(i.BPMN_TYPE);return"CatchTimerEvent"==e||"CatchSignalEvent"==e||"ThrowSignalEvent"==e},getType:function(t){var e=t.get(i.BPMN_TYPE);return e},getStyle:function(t){return t.option.style},getProp:function(t){return t.option.properties}};t.exports=i},function(t,e,i){function n(t,e){h.call(this)}var r=i(4),o=i(3),s=i(69),a=i(96),h=i(98);n.prototype.renderOther=function(t,e,i){function n(t){function n(t){function e(t,e){for(var n=[],r=0;r<=Math.abs(parseInt((e.event.clientX-l)/d));r++)e.event.clientX-l<=0?(m[0]=g[0]-d*r,n[0]=m[0]-10):(m[0]||(m[0]=g[0]),i.points[2][0]-m[0]>f?(m[0]=g[0]+d*r,n[0]=m[0]-10):n[0]=u.rightBottom.position[0]-f);for(var o=0;o<=Math.abs(parseInt((e.event.clientY-c)/d));o++)e.event.clientY-c<=0?(m[1]=g[1]-d*o,n[1]=m[1]-10):(m[1]||(m[1]=g[1]),i.points[2][1]-m[1]>p?(m[1]=g[1]+d*o,n[1]=m[1]-10):n[1]=u.rightBottom.position[1]-p);t.attr("position",n);var s=[];s[0]=[m[0],m[1]],s[1]=[i.points[1][0],m[1]],s[2]=i.points[2],s[3]=[m[0],i.points[3][1]],s[4]=[m[0],m[1]];var a={};a.type="OperationNode:scaleDragLeft",a.points=s,u.trigger(a.type,a)}u.rightBottom.position[0]-u.leftTop.position[0]<f+10?u.rightBottom.position[1]-u.leftTop.position[1]<p+10?(u.leftTop.position[0]=u.rightBottom.position[0]-(f+10),u.leftTop.position[1]=u.rightBottom.position[1]-(p+10)):(u.leftTop.position[0]=u.rightBottom.position[0]-(f+10),e(u.leftTop,t)):u.rightBottom.position[1]-u.leftTop.position[1]<p?(u.leftTop.position[1]=u.rightBottom.position[1]-(p+10),e(u.leftTop,t)):e(u.leftTop,t)}function r(t){e.off("mousemove",o),e.off("mouseup",s);var i={};i.event=t,i.arrowName="left",i.type="OperationNode:scaleDragEnd",i.startSlotPoints=v,i.startPosition=y,u.trigger(i.type,i)}var o=function(t){n(t)};e.on("mousemove",o);var s=function(t){r(t)};e.on("mouseup",s)}function h(t){function n(t){function e(t,e){for(var n=[],r=0;r<=Math.abs(parseInt((e.event.clientX-l)/d));r++)e.event.clientX-l>0?(_[0]=x[0]+d*r,n[0]=_[0]):(_[0]||(_[0]=x[0]),_[0]-i.points[0][0]>f?(_[0]=x[0]-d*r,n[0]=_[0]):n[0]=u.leftTop.position[0]+f);for(var o=0;o<=Math.abs(parseInt((e.event.clientY-c)/d));o++)e.event.clientY-c>0?(_[1]=x[1]+d*o,n[1]=_[1]):(_[1]||(_[1]=x[1]),_[1]-i.points[0][1]>p?(_[1]=x[1]-d*o,n[1]=_[1]):n[1]=u.leftTop.position[1]+p);t.attr("position",n);var s=[];s[0]=i.points[0],s[1]=[_[0],i.points[1][1]],s[2]=[_[0],_[1]],s[3]=[i.points[3][0],_[1]],s[4]=i.points[0];var a={};a.type="OperationNode:scaleDragRight",a.points=s,u.trigger(a.type,a)}u.rightBottom.position[0]-u.leftTop.position[0]<f+10?u.rightBottom.position[1]-u.leftTop.position[1]<p+10?(u.rightBottom.position[0]=u.leftTop.position[0]+(f+10),u.rightBottom.position[1]=u.leftTop.position[1]+(p+10)):(u.rightBottom.position[0]=u.leftTop.position[0]+f,e(u.rightBottom,t)):u.rightBottom.position[1]-u.leftTop.position[1]<p?(u.rightBottom.position[1]=u.leftTop.position[1]+p,e(u.rightBottom,t)):e(u.rightBottom,t)}function r(t){e.off("mousemove",o),e.off("mouseup",s);var i={};i.event=t,i.arrowName="right",i.type="OperationNode:scaleDragEnd",i.startSlotPoints=v,i.startPosition=y,u.trigger(i.type,i)}var o=function(t){n(t)};e.on("mousemove",o);var s=function(t){r(t)};e.on("mouseup",s)}var l,c,u=this,i=i,d=20,f=100,p=60;if(i){var g,v,y,m=[];this.leftTop.on("mousedown",function(e){v=s.getSoltPoints(t),y=r.clone(t.position),g=i.points[0],l=e.event.clientX,c=e.event.clientY,n(e)});var x,_=[];this.rightBottom.on("mousedown",function(e){v=s.getSoltPoints(t),y=r.clone(t.position),x=i.points[2],l=e.event.clientX,c=e.event.clientY,h(e)}),a.isSubProcess(t.model)?(this.leftTop.attr("position",[i.points[0][0]-10,i.points[0][1]-10]),this.rightBottom.attr("position",[i.points[2][0],i.points[2][1]])):(this.leftTop.attr("position",[-1e3,-1e3]),this.rightBottom.attr("position",[-1e3,-1e3])),t.parent?a.isSubProcess(t.parent.model)&&this.attr("position",[i.x+t.parent.position[0],i.y+t.parent.position[1]]):this.attr("position",[i.x,i.y])}else{var w={x:0,y:0,width:10,height:10},b="M0 100 L0 0 L100 0 L100 20 L20 20 L20 100 z";this.leftTop=o.makePath(b,{style:{fill:"#000000"}},w),this.leftTop.attr("cursor","nw-resize");var P={x:0,y:0,width:10,height:10},A="M0 100 L100 100 L100 0 L80 0 L80 80 L0 80 z";this.rightBottom=o.makePath(A,{style:{fill:"#000000"}},P),this.rightBottom.attr("cursor","se-resize"),this.add(this.rightBottom),this.add(this.leftTop)}},n.ARROW_DRAGEND="OperationNode:dragendArrow",n.ARROW_DRAG="OperationNode:dragArrow",n.ARROW_DRAGSTART="OperationNode:dragstartArrow",n.DELETE_CLICK="OperationNode:deleteClick",r.inherits(n,h),t.exports=n},function(t,e,i){function n(t,e){r.call(this),this.render(t,e)}var r=i(72),o=i(4),s=i(3);n.ARROW_DRAGEND="OperationNode:dragendArrow",n.ARROW_DRAG="OperationNode:dragArrow",n.ARROW_DRAGSTART="OperationNode:dragstartArrow",n.DELETE_CLICK="OperationNode:deleteClick",n.prototype.render=function(t,e,i){this.renderBase(t,e,i),this.renderOther(t,e,i)},n.prototype.renderBase=function(t,e,i){var n=this,i=i;if(i)this.virtualRect.setShape({points:i.points}),0==t.linkShow?this.arrow.hide():(this.arrow.show(),this.arrow.attr("position",[i.width/2+10,i.height/2-10])),0==t.deleteShow?this.deletePath.hide():(this.deletePath.show(),0==t.linkShow?this.deletePath.attr("position",[i.width/2+10,i.height/2-10]):this.deletePath.attr("position",[i.width/2+30,i.height/2-10]));else{this.virtualRect=new s.Polyline({style:{lineDash:[2]}});var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAYUExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFY3HCoAAAAIdFJOUwA9/ueGIbZtux4kfgAAADxJREFUCNdjYEAFIglgKjxJyQHMcFJSEgAzWJSUICoYldQgDGERdYiAIYMrRECAASbAgF+AFSbAEIBmPwClqQTPsA3FRgAAAABJRU5ErkJggg==";this.arrow=new s.Image({style:{image:r,cursor:"default"},draggable:!0,z:19});var a=["dragstart","drag","dragend"];o.each(a,function(t){n.arrow.on(t,function(e){var i={};i.event=e,i.type="OperationNode:"+t+"Arrow",n.trigger(i.type,i)})});var h={x:0,y:0,width:10,height:15},l="M73.641,45.957l-0.021,0.252c0,0.032,0.021,0.06,0.021,0.088c0,0.065-0.022,0.126-0.026,0.191l-2.685,54.878H70.91c-0.231,4.304-5.166,10.81-31.748,10.81c-26.58,0-31.509-6.506-31.746-10.81H7.41L4.731,46.488c-0.009-0.06-0.028-0.126-0.028-0.191c0-0.032,0.01-0.06,0.01-0.088l-0.01-0.252h0.028c0.099-0.466,0.364-0.919,0.784-1.353c3.439,3.477,17.191,4.051,33.646,4.051s30.221-0.574,33.642-4.051c0.426,0.434,0.711,0.887,0.784,1.353H73.641z M78.335,25.102v6.407c0,1.316-1.34,2.567-3.715,3.696c-6.266,2.936-19.777,4.975-35.459,4.975c-15.666,0-29.189-2.039-35.442-4.975C1.33,34.075,0,32.825,0,31.509v-6.407c0-3.374,8.681-6.286,21.359-7.724V3.929c0-2.16,1.768-3.929,3.93-3.929h26.314c2.164,0,3.938,1.773,3.938,3.938v13.296C68.98,18.606,78.333,21.611,78.335,25.102z M48.416,11.395c0-2.348-0.321-4.27-0.715-4.27c-0.393,0-2.641,0-4.979,0h-8.545c-2.352,0-4.592,0-4.989,0c-0.388,0-0.714,1.922-0.714,4.27v5.367l1.083-0.065c3.067-0.173,6.286-0.27,9.595-0.271c3.202,0,6.292,0.098,9.264,0.252V11.395z";this.deletePath=s.makePath(l,{style:{fill:"#000000"}},h),this.deletePath.on("click",function(t){var e={};e.event=t,e.type="OperationNode:deleteClick",n.trigger(e.type,e)}),this.add(this.deletePath),this.add(this.virtualRect),this.add(this.arrow)}},n.prototype.renderOther=function(t,e,i){if(i){t.parent&&t.parent.isBg&&1==t.parent.isBg?this.attr("position",[i.x,i.y]):this.attr("position",[i.x+t.parent.position[0],i.y+t.parent.position[1]])}},o.inherits(n,r),t.exports=n},function(t,e,i){var n=i(4),r=i(100),o=i(74),s=i(92),a=i(57),h={connectorCreate:function(t,e,i,n){var r=new o({});return r.set("style.lineType",i),r.set("stencil.type",this.stencilType),this.connectorCreateByOptions(t,e,{model:r,isEdit:!0},n)},connectorCreateByOptions:function(t,e,i,r){var o=this,h=i.model,l=new s(i);l.startNode=t,l.endNode=e,this.connectors.push(l),l.sPos=h.get("style.sPos"),l.ePos=h.get("style.ePos");var c=h.get("dockers");if(c&&c.length>=2){var u=a.loadArray(c);l.refresh(u)}else this.refreshConnector(l,!0);l.conPointsGroup.on("click",function(t){var e=t.target.type.split(s.SEPERATOR),i=t.target.connector;e[0]===s.START_NODE?i.sPos=e[1]:e[0]===s.END_NODE&&(i.ePos=e[1]),o.refreshConnector(i,!0);var n={};n.event=t,n.type="conPointsGroup:click",n.lineNode=o.selConnector,r.trigger(n.type,n)});var d=["dblclick","click"];n.each(d,function(t){l.on("Connector:"+t,function(e){var i=e.target;o.selConnector!==i&&(o.selConnector&&o.refreshConnector(o.selConnector),o.selConnector=i);var n={};n.event=e,n.type=t,n.target=o.selConnector,r.trigger(n.type,n)})});var f=t.model.get("outgoing");f.push(l.resourceId);var p=l.model.get("outgoing");return p.push(e.resourceId),l},setModel:function(t,e){var i=t.model.get("style.lineType"),n=t.options.text.text;t.options.text.text=e.properties.name,t.model.mergeOption(e),i!==e.style.lineType&&this.refreshConnector(t,!0),n!=e.properties.name&&this.refreshConnector(t,!0)},refreshLineByNode:function(t){for(var e=0,i=this.connectors.length;e<i;e++)this.connectors[e].startNode!=t&&this.connectors[e].endNode!=t||this.refreshConnector(this.connectors[e],!0)}},l=n.extend(r,h);t.exports=l},function(t,e,i){var n=(i(72),i(69)),r=(i(3),i(57)),o=i(92),s=i(101),a=i(4),h=30,l={CLOUD_RADIUS:12,CLOUD_LINEWIDTH:3,CLOUD_STROKE_STYLE:"rgba(255, 153, 0, 0.8)",stencilType:"SequenceFlow",connectors:[],selConnector:null,tempConnector:null,connectorForbidEdit:function(t){for(var e=0;e<this.connectors.length;e++)this.connectors[e].options.isEdit=!t},clearSelectCon:function(){null!=l.selConnector&&this.refreshConnector(this.selConnector)},deleteSelectCon:function(t,e){for(var i=[],n=0;n<this.connectors.length;n++)if(this.connectors[n].startNode==t||this.connectors[n].endNode==t){var r=this.connectors[n].startNode.model.get("outgoing");index=a.indexOf(r,this.connectors[n].resourceId),index!=-1&&r.splice(index,1),e.remove(this.connectors[n]),i.push(n),this.selConnector=null}for(var o=0;o<i.length;o++)this.connectors.splice(i[o],1)},deleteLine:function(t){var e=this.selConnector.startNode.model.get("outgoing");i=a.indexOf(e,this.selConnector.resourceId),i!=-1&&e.splice(i,1),t.remove(this.selConnector);var i=a.indexOf(this.connectors,this.selConnector);i!=-1&&this.connectors.splice(i,1),this.selConnector=null},refreshConnector:function(t,e){if(e||!t.turningPoints||t.turningPoints.length<2){var i=t.startNode,r=t.endNode,o=i.getRect?i.getRect().boundingRect:n.getRect(i).boundingRect,s=[o.x,o.y,o.x+o.width,o.y+o.height],a=i.getRect?r.getRect().boundingRect:n.getRect(r).boundingRect,h=[a.x,a.y,a.x+a.width,a.y+a.height],l=n.getConnectorPoints(o),c=n.getConnectorPoints(a);t.sPos&&t.ePos||(o.x<a.x?(t.sPos="right",t.ePos="left"):(t.sPos="left",t.ePos="right")),t.model&&t.model.get("style.lineType")&&(t.options.style.lineType=t.model.get("style.lineType"));var u=this.calcPointExpression(t.sPos,l),d=this.calcPointExpression(t.ePos,c),f=this.connector2Points(t.options.style.lineType,u,d,s,h);t.refresh(f[0][2])}t.clearHandles()},calcPointExpression:function(t,e){var i={top:e.top.x,left:e.left.y,right:e.right.y,bottom:e.bottom.x,center:e.center.x},o="<% print("+t+") %>",s=parseInt(n.template(o)(i));if(t.indexOf("top")!=-1)return new r(s,e.top.y);if(t.indexOf("left")!=-1)return new r(e.left.x,s);if(t.indexOf("right")!=-1)return new r(e.right.x,s);if(t.indexOf("bottom")!=-1)return new r(s,e.bottom.y);if(t.indexOf("center")!=-1)return new r(s,e.bottom.y);throw new Error("pos")},manageTempConnector:function(t,e,i){var r=t.getRect?t.getRect().boundingRect:n.getRect(t).boundingRect,s=[r.x,r.y,r.x+r.width,r.y+r.height],a=n.getConnectorPoints(r);l.tempConnector||(l.tempConnector=new o({isEdit:!1}));var h=l.tempConnector;r.x<e.x?(h.sPos="right",h.ePos="left"):(h.sPos="left",h.ePos="right"),h.options.style.lineType=i;var c=this.connector2Points(i,a[h.sPos],e,s,null);return h.refresh(c[0][2]),h},removeTempConnector:function(t){l.tempConnector&&(t.remove(l.tempConnector),l.tempConnector=null)},connector2Points:function(t,e,i,a,l){s.group("connectionManager: connector2Points"),s.info("ConnectionManager: connector2Points ("+t+", "+e+", "+i+", "+a+", "+l+")");var c=[];switch(t){case o.TYPE_STRAIGHT:var u=[e.clone(),i.clone()];c.push(["straight","straight",u]);break;case o.TYPE_ORGANIC:case o.TYPE_JAGGED:var d=null,f=null;if(null!=a){var p=[];p.push(new r(e.x,a[1]-h)),p.push(new r(a[2]+h,e.y)),p.push(new r(e.x,a[3]+h)),p.push(new r(a[0]-h,e.y)),d=p[0];for(var g=1;g<p.length;g++)n.distance(e,p[g])<n.distance(e,d)&&(d=p[g])}if(null!=l){var p=[];p.push(new r(i.x,l[1]-h)),p.push(new r(l[2]+h,i.y)),p.push(new r(i.x,l[3]+h)),p.push(new r(l[0]-h,i.y)),f=p[0];for(var g=1;g<p.length;g++)n.distance(i,p[g])<n.distance(i,f)&&(f=p[g])}var v=[e],y=0;d&&(v.push(d),y=1),f&&v.push(f),v.push(i);var m=r.cloneArray(v);c.push(["s0","s0",m]);var x=r.cloneArray(v),_=r.cloneArray(x);_.splice(y+1,0,new r(_[y].x,_[y+1].y)),c.push(["s1","s1_1",_]);var w=r.cloneArray(x);w.splice(y+1,0,new r(w[y+1].x,w[y].y)),c.push(["s1","s1_2",w]);var b=r.cloneArray(v),P=new r((b[y].x+b[y+1].x)/2,b[y].y),A=new r((b[y].x+b[y+1].x)/2,b[y+1].y);b.splice(y+1,0,P,A),c.push(["s2","s2_1",b]);var T=r.cloneArray(v),R=new r(T[y].x,(T[y].y+T[y+1].y)/2),S=new r(T[y+1].x,(T[y].y+T[y+1].y)/2);T.splice(y+1,0,R,S),c.push(["s2","s2_2",T]);var L=r.cloneArray(v),N=[L[y].x+20,L[y+1].x+20];a&&N.push(a[2]+20),l&&N.push(l[2]+20);var C=n.max(N),M=new r(C,L[y].y),E=new r(C,L[y+1].y);L.splice(y+1,0,M,E),c.push(["s2","s2_3",L]);var k=r.cloneArray(v),O=[k[y].y-20,k[y+1].y-20];a&&O.push(a[1]-20),l&&O.push(l[1]-20);var z=n.min(O),B=new r(k[y].x,z),I=new r(k[y+1].x,z);k.splice(y+1,0,B,I),c.push(["s2","s2_4",k]);var D=r.cloneArray(v),F=[D[y].x-20,D[y+1].x-20];a&&F.push(a[0]-20),l&&F.push(l[0]-20);var G=n.min(F),q=new r(G,D[y].y),Y=new r(G,D[y+1].y);D.splice(y+1,0,q,Y),c.push(["s2","s2_5",D]);var H=r.cloneArray(v),U=[H[y].y+20,H[y+1].y+20];a&&U.push(a[3]+20),l&&U.push(l[3]+20);var W=n.max(U),j=new r(H[y].x,W),X=new r(H[y+1].x,W);H.splice(y+1,0,j,X),c.push(["s2","s2_6",H]),s.info("Filter orthogonal solutions. Initial number of solutions = "+c.length);for(var V=[],J=0;J<c.length;J++){var Q=c[J][2];n.orthogonalPath(Q)&&V.push(c[J])}if(c=V,s.info("\n\tOrthogonalSolutions = "+c.length),e.equals(i))s.info("Start and end point coincide...skip backward solution. I think we will just fall on s0 :)");else{s.info("Filter backward solutions. Initial number of solutions = "+c.length);for(var K=[],Z="",J=0;J<c.length;J++){var Q=c[J][2];n.forwardPath(Q)?K.push(c[J]):Z=Z+"\n\t"+Q}c=K,s.info("\n\t ForwardSolutions = "+c.length),0==c.length&&s.info("Discarded solutions: "+Z)}s.info("Filter non intersecting solutions. Initial number of solutions = "+c.length);for(var $=[],J=0;J<c.length;J++){var Q=c[J][2],tt=!1,et=Q.slice();(l||a)&&(et=et.slice(1,et.length-1)),a&&(tt=tt||n.polylineIntersectsRectangle(et,a)),l&&(tt=tt||n.polylineIntersectsRectangle(et,l)),tt||$.push(c[J])}0!=$.length&&(c=$),s.info("\n\t nonIntersectionSolutions = "+c.length),s.info("Get first class of solutions with same nr of points"),0==c.length&&s.info("This is not possible");for(var it=c[0][2],nt=it.length,rt=[],J=0;J<c.length;J++){var Q=c[J][2];Q.length==nt&&rt.push(c[J])}c=rt,s.info("pick the first solution with 90 degree angles (less turnarounds)");for(var ot=0,J=0;J<c.length;J++){var Q=c[J][2];n.scorePath(c[ot][2])<n.scorePath(c[J][2])&&(ot=J)}c=[c[ot]]}return s.groupEnd(),c}};t.exports=l},function(t,e){var i={LOG_LEVEL_NONE:0,LOG_LEVEL_DEBUG:1,LOG_LEVEL_INFO:2,LOG_LEVEL_ERROR:3,level:this.LOG_LEVEL_ERROR,debug:function(t){"undefined"!=typeof console&&this.level<=this.LOG_LEVEL_DEBUG&&"function"==typeof console.debug&&console.debug(t)},info:function(t){"undefined"!=typeof console&&this.level<=this.LOG_LEVEL_INFO&&console.info(t)},error:function(t){"undefined"!=typeof console&&this.level<=this.LOG_LEVEL_ERROR&&console.error(t)},group:function(t){this.level<=this.LOG_LEVEL_INFO&&"undefined"!=typeof console&&"function"==typeof console.group&&console.group(t)},groupEnd:function(){this.level<=this.LOG_LEVEL_INFO&&"undefined"!=typeof console&&"function"==typeof console.groupEnd&&console.groupEnd()}};i.level=i.LOG_LEVEL_ERROR,t.exports=i},function(t,e,i){var n=(i(72),i(69),i(3)),r=(i(57),i(4),i(100)),o={LineOperations:[],isEdit:!0,creatOperation:function(t,e){var i=new n.Image({style:{image:e.icon,width:e.width||15,height:e.height||15}});return i.key=t,i.operation=!0,i.hide(),e.lineNode.icons.push(i),o.LineOperations.push(i),i.on("click",function(){e.callback(e.lineNode)}),i},bindOperation:function(t){if(0!=o.isEdit){for(var e=t.middle(),i=[],n=0;n<t.icons.length;n++)i.push(t.icons[n].style.width);for(var r=0;r<t.icons.length;r++){for(var s=10,a=0;a<r;a++)s+=i[a]+10;t.icons[r].attr("position",[e[0]+s,e[1]+5]),t.icons[r].show()}}},hideAllLineOperation:function(){for(var t=0;t<o.LineOperations.length;t++){var e=o.LineOperations[t];e.hide()}},addIcon:function(t,e,i){if(e.lineNode.icons)for(var n=0;n<e.lineNode.icons.length;n++)if(e.lineNode.icons[n].key==t)return void o.bindOperation(e.lineNode);var r=o.creatOperation(t,e);i.add(r),o.bindOperation(e.lineNode)},deleteIconObj:function(t,e){return{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAOBAMAAADpk+DfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAtUExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMGgKD4AAAAPdFJOUwDH/g+agESj4Y6zUiRnh7lnwbkAAABLSURBVAjXY2BgYDZgAIEnnkCa7a5cYGwCwwklIOhhMBEEgmIGnlAgOMDAprhQUGgDA5vWdJciXJRGR0dTAgPzQ0FBSaBpzMbGBgwAIoUW3sQ2EdkAAAAASUVORK5CYII=",width:12,height:14,lineNode:e,callback:function(i){for(var n=0;n<e.icons.length;n++)t.remove(e.icons[n]);r.deleteLine(t),o.hideAllLineOperation(),i.cancelBubble=!0}}}};t.exports=o},function(t,e,i){var n=(i(72),i(69),i(3)),r=(i(57),i(4),{virtualXLine:null,virtualYLine:null,createGuidelines:function(t){this.virtualXLine=new n.Line({style:{lineDash:[5]},z:3}),this.virtualYLine=new n.Line({style:{lineDash:[5]},z:3}),t.add(this.virtualXLine),t.add(this.virtualYLine)},judgeAlignment:function(t,e,i,n){for(var r=this,o=0,s=e.length;o<s;o++){if(t[1]==e[o].position[1]){r.virtualXLine.attr("position",[0,t[1]]),r.virtualXLine.attr("shape",{x2:i});break}r.virtualXLine.attr("shape",{x2:0})}for(var a=0,s=e.length;a<s;a++){if(t[0]==e[a].position[0]){r.virtualYLine.attr("position",[t[0],0]),r.virtualYLine.attr("shape",{y2:n});break}r.virtualYLine.attr("shape",{y2:0})}}});t.exports=r}])});
//# sourceMappingURL=fish-topo-bpmn.min.js.map
