!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.fishTopoFlow=e():t.fishTopoFlow=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){t.exports=n(2)},function(t,e,n){function i(t,e){this.id,this.group,this._dom=t,this.nowZoom=1,this.canScale=!0,this.eagleEye=!1,this.eagleEyeNode,this.initScaleRatio,this.operationNode,this.selectedNode=null,this.renderIcon,this.allNodes=[],this.minimap,this._zr=l.init(t,{renderer:e.renderer||"canvas",devicePixelRatio:e.devicePixelRatio}),this._api=new h(this),this.Shape=r,this.model=new x({}),this.model.set(m.ELEMENT_TYPE,"scene"),this.model.set(m.MODE,"normal"),this.options=e,c.call(this)}var r=n(3),o=n(56),s=n(57),a=n(58),h=n(60),c=n(12),l=n(61),u=n(4),d=n(71),f=n(77),p=n(78),g=n(84),v=n(86),y=n(87),m=n(81),x=n(82),w=n(64),P=n(73),b=n(88),A=i.prototype;A.forceLayout=g,A.treeLayout=v,A.getDom=function(){return this._dom},A.getZr=function(){return this._zr},A.getWidth=function(){return this._zr.getWidth()},A.getHeight=function(){return this._zr.getHeight()},A.isDisposed=function(){return this._disposed},A.dispose=function(){this._disposed=!0,this._zr.dispose(),R[this.id]=null},A.resize=function(){this._zr.resize()},A.init=function(){var t=this;this.group=new r.Group,this.group.isBg=!0,this.groupDrag(this.group),this._zr.add(this.group),this.zrScale(),this._zr.on("mouseup",function(e){t.operationNode&&(t.group.remove(t.operationNode),t.operationNode=null);var n=e.target;n&&n.parent instanceof P||(p.clearSelectCon(),n&&n.operation&&1==n.operation||b.hideAllLineOperation())}),this.on("conPointsGroup:click",function(t){b.bindOperation(t.lineNode)})},A.toJson=function(){return y.toJson(this.model,this.group)},A.fromJson=function(t){this.clear();var e=new x(t);this.setBackground(e.get(m.BACKGROUND));var n=[];y.fromJson(this,this.group,e.get(m.CHILDS),!1,n),n.length>0&&this.layoutNode("tree",{node:n[0]})},A.add=function(t){t instanceof d&&t.setProperties({shape:{width:t.getBoundingRect().width,height:t.getBoundingRect().height}}),this.group.add(t)},A.clear=function(){this._zr.clear(),this.group=new r.Group,this.group.isBg=!0,this._zr.add(this.group)},A.addIcon=function(t,e){b.addIcon(t,e,this.group)},A.lineDefaultIcon=function(t){var e,n=this;e=t.parent?t.parent:n.group,b.addIcon("delete",b.deleteIconObj(e,t),e),b.addIcon("change",{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAPBAMAAAD9gUllAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAqUExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoTzogAAAAOdFJOUwD+CC3uuR7gVXeeFEnMRIEDJwAAAGRJREFUCNdjYOCZwIAA7YuUQADM1nQsDQWBBBBnoSAYiBiAOGeROWwLIzpAYANEE7JpDBtQKAiYqQCmlI1BYOFqMMfcBQQERcEGmkBMFwwAcWzLQcBRCuwItTQQWD4JybQ5DAwAO74b0S83OyMAAAAASUVORK5CYII=",width:15,height:15,lineNode:t,callback:function(t){var e=p.selConnector;"straight"==e.options.style.lineType?p.setModel(e,{style:{lineType:"jagged"}}):"jagged"==e.options.style.lineType&&p.setModel(e,{style:{lineType:"straight"}}),b.bindOperation(e)}},e)},A.initOperationNode=function(t){var e=this;this.operationNode=new f(t,this.group),this.operationNode.on(f.ARROW_DRAGSTART,function(t){var n=(t.event.offsetX-e.group.position[0])/e.nowZoom,i=(t.event.offsetY-e.group.position[1])/e.nowZoom;t.event.target.hide();var r=new a(n,i),o=p.manageTempConnector(e.selectedNode,r,P.TYPE_STRAIGHT);e.group.add(o)}),this.operationNode.on(f.ARROW_DRAG,function(t){var n=(t.event.offsetX-e.group.position[0])/e.nowZoom,i=(t.event.offsetY-e.group.position[1])/e.nowZoom,r=new a(n,i);p.manageTempConnector(e.selectedNode,r,P.TYPE_STRAIGHT)}),this.operationNode.on(f.ARROW_DRAGEND,function(n){function i(t,e,n){return t.rectContain(e,n)}function r(t,e,n,r){for(var s=t.length-1;s>=0;s--)if(o(r,t[s])&&!t[s].ignore&&i(t[s],e,n))return t[s]}function o(t,e){return u.indexOf(t,e)==-1}var a=n.event.offsetX,h=n.event.offsetY,c=null;if(n.event.target.show(),p.removeTempConnector(e.group),c=r(e.allNodes,a,h),c&&e.selectedNode!=c){var l=p.connectorCreate(e.selectedNode,c,{style:{lineType:P.TYPE_JAGGED}},e._api);c.parent&&e.selectedNode.parent&&c.parent.add(l),c.parent||e.selectedNode.parent||e.group.add(l),l.on("mousedown",function(t){p.connectorForbidEdit(!e.options.linkModify),e.isNode=!1})}var d=s.getRect(e.selectedNode);e.operationNode.render(t,e.group,d)}),this.operationNode.on(f.DELETE_CLICK,function(t){e.selectedNode.parent?e.selectedNode.parent.remove(e.selectedNode):e.group.remove(e.selectedNode);for(var n=0;n<e.allNodes.length;n++)e.selectedNode.id==e.allNodes[n].id&&e.allNodes.splice(n,1);p.deleteSelectCon(e.selectedNode,e.group)}),this.group.add(this.operationNode)},A.nodeMouseDown=function(t,e,n){this.selectedNode=t;var i=s.getRect(t);this.operationNode||this.initOperationNode(t),this.operationNode.render(t,this.group,i)},A.groupDrag=function(){function t(t){function n(t){var n=e.group.getBoundingRect().width*e.nowZoom,i=e.group.getBoundingRect().height*e.nowZoom,s=e.group.getBoundingRect().x*e.nowZoom,l=e.group.getBoundingRect().y*e.nowZoom,u=[10-(n+s),10-(i+l)],d=[e._zr.getWidth()-s-10,e._zr.getHeight()-l-10],f=t.event.clientX-r,p=t.event.clientY-o;a[0]=h+f,a[1]=c+p,a[0]>d[0]||a[1]>d[1]||a[0]<u[0]||a[1]<u[1]||(e.group.attr("position",a),1==e.eagleEye&&e.minimap.updataSelectionPosition(a,e.nowZoom))}function i(t){e._zr.off("mousemove",s),e._zr.off("mouseup",l),e._zr.off("globalout",l)}var r=t.event.clientX,o=t.event.clientY,s=function(t){n(t)},a=e.group.position,h=e.group.position[0],c=e.group.position[1];e._zr.on("mousemove",s);var l=function(t){i(t)};e._zr.on("mouseup",l),e._zr.on("globalout",l)}var e=this;e._zr.on("mousedown",function(e){e.target instanceof r.Image&&e.target.parent||e.target instanceof r.Circle&&e.target.parent||(t(e),e.cancelBubble=!0)})},A.drag=function(t){function e(e){function i(e){var i=(e.event.clientX-a)/n.nowZoom,r=(e.event.clientY-h)/n.nowZoom;if(t.parent&&t.parent instanceof d){var o={width:t.shape.width,height:t.shape.height,position:t.position,nodeXY:[t.shape.x,t.shape.y],movePosition:[u,f],moveX:i,moveY:r},s=t.parent;s.reDraw(o,t)}else if(l[0]=u+i,l[1]=f+r,t.attr("position",l),t.alarm){var c=[l[0]+t.getBoundingRect().width-(t.alarm.getBoundingRect().width-6),l[1]-t.alarm.getBoundingRect().height-3];t.alarm.attr("position",c)}n.nodeMouseDown(t,e.event.clientX,e.event.clientY),p.refreshLineByNode(t)}function r(e){if(t.model.set("options.position",t.position),n._zr.off("mousemove",c),n._zr.off("mouseup",g),n._zr.off("globalout",g),t.layout&&n.layoutNode("tree",{node:t}),n.forceLayoutOption){var i=n.forceLayoutOption.allNodes;_.indexOf(i,t)!=-1&&n.layoutNode("force",this.forceLayoutOption)}1==n.eagleEye&&n.openEagleEye(n.eagleEyeNode)}var o,s,a=e.event.clientX,h=e.event.clientY,c=function(t){i(t)},l=t.position,u=t.position[0],f=t.position[1];if(t.alarm){t.alarm.position;o=t.alarm.position[0],s=t.alarm.position[1]}n._zr.on("mousemove",c);var g=function(t){r(t)};n._zr.on("mouseup",g),n._zr.on("globalout",g)}var n=this;t.on("mousedown",function(t){0!=this.isdraggable&&(e(t),t.cancelBubble=!0)})},A.creatNode=function(t,e){var n=this,i=new x({});switch(i.set(m.ELEMENT_TYPE,t),i.set(m.OPTIONS,u.clone(e)),e.z||(e.z=1),t){case"Rect":var r=new this.Shape.Rect(e);break;case"Group":var r=new d(e);if(e.mergedImage){var o=new this.Shape.Image({style:{image:e.mergedImage,text:e.style.text,textPosition:"bottom"},position:[-1e3,-1e3]});this.drag(o),r.relationImage=o,n.group.add(o),setTimeout(function(){o.hide()},100),r.on("dblclick",function(t){r.merged(t)})}break;case"Image":var r=new this.Shape.Image(e);break;case"Text":var r=new this.Shape.Text(e);break;case"Circle":var r=new this.Shape.Circle(e);break;case"Sector":var r=new this.Shape.Sector(e);break;case"Ring":var r=new this.Shape.Ring(e);break;case"Polygon":var r=new this.Shape.Polygon(e);break;case"Polyline":var r=new this.Shape.Polyline(e);break;case"Line":var r=new this.Shape.Line(e);break;case"BezierCurve":var r=new this.Shape.BezierCurve(e);break;case"Arc":var r=new this.Shape.Arc(e)}this.drag(r);var a=e.deleteShow;s.isUndefined(a)&&(a=this.options.deleteShow),r.attr("deleteShow",a);var h=e.linkShow;return s.isUndefined(h)&&(h=this.options.linkShow),r.attr("linkShow",h),r.on("click",function(t){n.nodeMouseDown(this,t.event.clientX,t.event.clientY),t.cancelBubble=!0}),this.allNodes.push(r),e.id?i.set(m.ID,e.id):i.set(m.ID,s.getUUID()),r.model=i,r},A.setBackground=function(t){if(t&&t.length>0){if(this.model.set(m.BACKGROUND,t),"#"==t.substr(0,1)||"rgba"==t.substr(0,4))var e=new this.Shape.Rect({shape:{width:that._zr.getWidth(),height:that._zr.getHeight()},style:{fill:t},cursor:"default",z:-1});else var e=new this.Shape.Image({position:[0,0],scale:[1,1],style:{x:0,y:0,image:t,width:this._zr.getWidth(),height:this._zr.getHeight()},cursor:"default",z:-1});this._zr.add(e)}},A.creatLink=function(t,e,n){n.isEdit=!!this.options.linkModify;var i=p.connectorCreate(t,e,n,this._api);return i},A.creatAlarm=function(t,e){var n=this.creatNode("Group",{style:{fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)"}});n.isdraggable=!1;var i=this.creatNode("Text",{style:{text:e.text,textFont:e.textFont,fill:e.textFill,textBaseline:"top"},position:[2,0],z:2});i.isdraggable=!1,n.add(i),t.parent&&t.parent instanceof d?t.parent.add(n):this.group.add(n);var r=n.getBoundingRect().width+2,o=n.getBoundingRect().height+6,s=[[0,0],[r,0],[r,o],[r-3,o],[r-6,o+3],[r-9,o],[0,o],[0,0]],a=this.creatNode("Polyline",{shape:{points:s},style:{fill:e.textBackground,stroke:e.textBackground},z:1});a.isdraggable=!1,n.add(a);var h=[t.position[0]+t.getBoundingRect().width-(n.getBoundingRect().width-6),t.position[1]-n.getBoundingRect().height-3];n.attr("position",h),t.alarm=n;var c=new x({});return c.set(m.ELEMENT_TYPE,m.ALARM),c.set(m.OPTIONS,u.clone(e)),c.set(m.RELATIONID,t.model.get(m.ID)),n.model=c,n},A.layoutNode=function(t,e){"tree"==t?(e.node.parent&&e.node.parent instanceof d&&e.node.parent.eachChild(function(t){t.isdraggable=!1}),this.treeLayout(e.node)):"force"==t&&(e&&(this.forceLayoutOption=e,this.forceLayoutOption.rect=new r.BoundingRect(0,0,this.getWidth(),this.getHeight())),this.forceLayout(this.forceLayoutOption.allNodes,this.forceLayoutOption.allCons,this.forceLayoutOption.rect,this.forceLayoutOption.repulsion,this.forceLayoutOption.edgeLength,this.forceLayoutOption.gravity))},A.toDataURL=function(t){return y.toDataURL(this._zr,t)},A.initScale=function(){var t=this,e=t.group.getBoundingRect().width,n=t.group.getBoundingRect().height,i=t.getWidth(),r=t.getHeight(),o=1,s=[];e/n>i/r?e>i&&(o=i/e):n>r&&(o=r/n),s[0]=Math.abs(t.group.getBoundingRect().x)*o,s[1]=Math.abs(t.group.getBoundingRect().y)*o,t.group.attr("position",[s[0],s[1]]),t.group.attr("scale",[o,o]),t.initScaleRatio=o;var a=[s[0],s[1],t.initScaleRatio,e,n];return a},A.zrScale=function(t){function e(t,e,i){if(0!=n.canScale){var r=n.group;if(r){var o=r.position,s=r.scale,a=n._zoom=n._zoom||1;a+=t,a=Number(a.toFixed(2));var h=a/n._zoom;if(a>1.7||a<.3)return;n._zoom=a,n.nowZoom=a,o[0]-=(e-o[0])*(h-1),o[1]-=(i-o[1])*(h-1),s[0]*=h,s[1]*=h,r.attr("position",[o[0],o[1]]),r.attr("scale",[s[0],s[1]]),1==n.eagleEye&&n.minimap.updataSelection(o[0],o[1],h,n.nowZoom)}}}var n=this;if(t){if("narrowing"==t){var i=-.07;e(i,this._zr.getWidth()/2,this._zr.getHeight()/2)}if("enlarge"==t){var i=.07;e(i,this._zr.getWidth()/2,this._zr.getHeight()/2)}}else n._zr.on("mousewheel",function(t){w.stop(t.event);var i=t.wheelDelta>0?.07:-.07;e(i,n._zr.getWidth()/2,n._zr.getHeight()/2)})},A.openEagleEye=function(t){var e=this;e.eagleEye=!0,e.eagleEyeNode=t;var n=u.clone(e.group.position),i=u.clone(e.group.scale);e.group.attr("position",[0,0]),e.group.attr("scale",[1,1]);var r=e.initScale(),s=e.toDataURL();e.group.attr("position",n),e.group.attr("scale",i),e.minimap?e.minimap.updataMap(s,e.group.getBoundingRect()):(e.minimap=new o(e,e.group.position,e.group.getBoundingRect(),t,r,s),setTimeout(function(){e.openEagleEye()},10))},u.mixin(i,c);var T=new Date-0,R={},M="_fishTopoFlow_instance_",C={version:"1.0.0",dependencies:{zrender:"3.0.4"}};C.init=function(t,e){if(!t)throw new Error("Initialize failed: invalid dom.");e=e||{},u.defaults(e,{type:"flow",devicePixelRatio:1,deleteShow:!1,linkShow:!1,linkModify:!1});var n=new i(t,e);return n.init(),n.id="ft_"+T++,R[n.id]=n,t.setAttribute&&t.setAttribute(M,n.id),n},C.getInstanceByDom=function(t){var e=t.getAttribute(M);return R[e]},C.dispose=function(t){var e;u.isDom(t)?e=C.getInstanceByDom(t):"string"==typeof t&&(e=R[t]),e instanceof C&&!e.isDisposed()&&e.dispose()},t.exports=C},function(t,e,n){"use strict";function i(t){if(!t.__isHover){if(t.__hoverStlDirty){var e=t.style.stroke,n=t.style.fill,i=t.__hoverStl,r=y.lift;i.fill=i.fill||n&&(n instanceof _?n:r(n,-.1)),i.stroke=i.stroke||e&&(e instanceof _?e:r(e,-.1));var o={};for(var s in i)i.hasOwnProperty(s)&&(o[s]=t.style[s]);t.__normalStl=o,t.__hoverStlDirty=!1}t.setStyle(t.__hoverStl),t.z2+=1,t.__isHover=!0}}function r(t){if(t.__isHover){var e=t.__normalStl;e&&t.setStyle(e),t.z2-=1,t.__isHover=!1}}function o(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&i(t)}):i(t)}function s(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&r(t)}):r(t)}function a(t,e){t.__hoverStl=t.hoverStyle||e||{},t.__hoverStlDirty=!0}function h(){!this.__isEmphasis&&o(this)}function c(){!this.__isEmphasis&&s(this)}function l(){this.__isEmphasis=!0,o(this)}function u(){this.__isEmphasis=!1,s(this)}function d(t,e,n,i,r){var o=t?"Update":"",s=i&&i.getShallow("animationDuration"+o),a=i&&i.getShallow("animationEasing"+o);i&&i.getShallow("animation")?e.animateTo(n,s,a,r):(e.attr(n),r&&r())}var f=n(4),p=n(6),g=Math.round,v=n(7),y=n(20),m=n(14),x=n(15),_=n(5),w={};w.Util=f,w.Group=n(37),w.Image=n(38),w.Text=n(41),w.textContain=n(24),w.Circle=n(42),w.Sector=n(43),w.Ring=n(44),w.Polygon=n(45),w.Polyline=n(49),w.Rect=n(50),w.Line=n(51),w.BezierCurve=n(52),w.Arc=n(53),w.LinearGradient=n(54),w.RadialGradient=n(55),w.BoundingRect=n(25),w.extendShape=function(t){return v.extend(t)},w.extendPath=function(t,e){return p.extendFromString(t,e)},w.makePath=function(t,e,n,i){var r=p.createFromString(t,e),o=r.getBoundingRect();if(n){var s=o.width/o.height;if("center"===i){var a,h=n.height*s;h<=n.width?a=n.height:(h=n.width,a=h/s);var c=n.x+n.width/2,l=n.y+n.height/2;n.x=c-h/2,n.y=l-a/2,n.width=h,n.height=a}this.resizePath(r,n)}return r},w.mergePath=p.mergePath,w.resizePath=function(t,e){if(t.applyTransform){var n=t.getBoundingRect(),i=n.calculateTransform(e);t.applyTransform(i)}},w.subPixelOptimizeLine=function(t){var e=w.subPixelOptimize,n=t.shape,i=t.style.lineWidth;return g(2*n.x1)===g(2*n.x2)&&(n.x1=n.x2=e(n.x1,i,!0)),g(2*n.y1)===g(2*n.y2)&&(n.y1=n.y2=e(n.y1,i,!0)),t},w.subPixelOptimizeRect=function(t){var e=w.subPixelOptimize,n=t.shape,i=t.style.lineWidth,r=n.x,o=n.y,s=n.width,a=n.height;return n.x=e(n.x,i,!0),n.y=e(n.y,i,!0),n.width=Math.max(e(r+s,i,!1)-n.x,0===s?0:1),n.height=Math.max(e(o+a,i,!1)-n.y,0===a?0:1),t},w.subPixelOptimize=function(t,e,n){var i=g(2*t);return(i+g(e))%2===0?i/2:(i+(n?1:-1))/2},w.doEnterHover=o,w.doLeaveHover=s,w.setElementHoverStl=a,w.setHoverStyle=function(t,e){"group"===t.type?t.traverse(function(t){"group"!==t.type&&a(t,e)}):a(t,e),t.on("mouseover",h).on("mouseout",c),t.on("emphasis",l).on("normal",u)},w.setText=function(t,e,n){var i=e.getShallow("position")||"inside",r=i.indexOf("inside")>=0?"white":n,o=e.getModel("textStyle");f.extend(t,{textDistance:e.getShallow("distance")||5,textFont:o.getFont(),textPosition:i,textFill:o.getTextColor()||r})},w.updateProps=f.curry(d,!0),w.initProps=f.curry(d,!1),w.getTransform=function(t,e){for(var n=m.identity([]);t&&t!==e;)m.mul(n,t.getLocalTransform(),n),t=t.parent;return n},w.applyTransform=function(t,e,n){return n&&(e=m.invert([],e)),x.applyTransform([],t,e)},w.transformDirection=function(t,e,n){var i=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),o=["left"===t?-i:"right"===t?i:0,"top"===t?-r:"bottom"===t?r:0];return o=w.applyTransform(o,e,n),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"},t.exports=w},function(t,e,n){function i(t){if("object"==typeof t&&null!==t){var e=t;if(t instanceof Array){e=[];for(var n=0,r=t.length;n<r;n++)e[n]=i(t[n])}else if(!T(t)&&!R(t)){e={};for(var o in t)t.hasOwnProperty(o)&&(e[o]=i(t[o]))}return e}return t}function r(t,e,n){if(!A(e)||!A(t))return n?i(e):t;for(var o in e)if(e.hasOwnProperty(o)){var s=t[o],a=e[o];!A(a)||!A(s)||w(a)||w(s)||R(a)||R(s)||T(a)||T(s)?!n&&o in t||(t[o]=i(e[o],!0)):r(s,a,n)}return t}function o(t,e){for(var n=t[0],i=1,o=t.length;i<o;i++)n=r(n,t[i],e);return n}function s(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function a(t,e,n){for(var i in e)e.hasOwnProperty(i)&&(n?null!=e[i]:null==t[i])&&(t[i]=e[i]);return t}function h(){return document.createElement("canvas")}function c(){return S||(S=G.createCanvas().getContext("2d")),S}function l(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n}return-1}function u(t,e){function n(){}var i=t.prototype;n.prototype=e.prototype,t.prototype=new n;for(var r in i)t.prototype[r]=i[r];t.prototype.constructor=t,t.superClass=e}function d(t,e,n){t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,a(t,e,n)}function f(t){if(t)return"string"!=typeof t&&"number"==typeof t.length}function p(t,e,n){if(t&&e)if(t.forEach&&t.forEach===I)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function g(t,e,n){if(t&&e){if(t.map&&t.map===z)return t.map(e,n);for(var i=[],r=0,o=t.length;r<o;r++)i.push(e.call(n,t[r],r,t));return i}}function v(t,e,n,i){if(t&&e){if(t.reduce&&t.reduce===F)return t.reduce(e,n,i);for(var r=0,o=t.length;r<o;r++)n=e.call(i,n,t[r],r,t);return n}}function y(t,e,n){if(t&&e){if(t.filter&&t.filter===D)return t.filter(e,n);for(var i=[],r=0,o=t.length;r<o;r++)e.call(n,t[r],r,t)&&i.push(t[r]);return i}}function m(t,e,n){if(t&&e)for(var i=0,r=t.length;i<r;i++)if(e.call(n,t[i],i,t))return t[i]}function x(t,e){var n=B.call(arguments,2);return function(){return t.apply(e,n.concat(B.call(arguments)))}}function _(t){var e=B.call(arguments,1);return function(){return t.apply(this,e.concat(B.call(arguments)))}}function w(t){return"[object Array]"===L.call(t)}function P(t){return"function"==typeof t}function b(t){return"[object String]"===L.call(t)}function A(t){var e=typeof t;return"function"===e||!!t&&"object"==e}function T(t){return!!E[L.call(t)]||t instanceof k}function R(t){return t&&1===t.nodeType&&"string"==typeof t.nodeName}function M(t){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]}function C(){return Function.call.apply(B,arguments)}function O(t,e){if(!t)throw new Error(e)}var S,k=n(5),E={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},L=Object.prototype.toString,N=Array.prototype,I=N.forEach,D=N.filter,B=N.slice,z=N.map,F=N.reduce,G={inherits:u,mixin:d,clone:i,merge:r,mergeAll:o,extend:s,defaults:a,getContext:c,createCanvas:h,indexOf:l,slice:C,find:m,isArrayLike:f,each:p,map:g,reduce:v,filter:y,bind:x,curry:_,isArray:w,isString:b,isObject:A,isFunction:P,isBuildInObject:T,isDom:R,retrieve:M,assert:O,noop:function(){}};t.exports=G},function(t,e){var n=function(t){this.colorStops=t||[]};n.prototype={constructor:n,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}},t.exports=n},function(t,e,n){function i(t,e,n,i,r,o,s,a,h,c,l){var g=h*(p/180),m=f(g)*(t-n)/2+d(g)*(e-i)/2,x=-1*d(g)*(t-n)/2+f(g)*(e-i)/2,_=m*m/(s*s)+x*x/(a*a);_>1&&(s*=u(_),a*=u(_));var w=(r===o?-1:1)*u((s*s*(a*a)-s*s*(x*x)-a*a*(m*m))/(s*s*(x*x)+a*a*(m*m)))||0,P=w*s*x/a,b=w*-a*m/s,A=(t+n)/2+f(g)*P-d(g)*b,T=(e+i)/2+d(g)*P+f(g)*b,R=y([1,0],[(m-P)/s,(x-b)/a]),M=[(m-P)/s,(x-b)/a],C=[(-1*m-P)/s,(-1*x-b)/a],O=y(M,C);v(M,C)<=-1&&(O=p),v(M,C)>=1&&(O=0),0===o&&O>0&&(O-=2*p),1===o&&O<0&&(O+=2*p),l.addData(c,A,T,s,a,R,O,g,o)}function r(t){if(!t)return[];var e,n=t.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,",");for(e=0;e<l.length;e++)n=n.replace(new RegExp(l[e],"g"),"|"+l[e]);var r,o=n.split("|"),s=0,h=0,c=new a,u=a.CMD;for(e=1;e<o.length;e++){var d,f=o[e],p=f.charAt(0),g=0,v=f.slice(1).replace(/e,-/g,"e-").split(",");v.length>0&&""===v[0]&&v.shift();for(var y=0;y<v.length;y++)v[y]=parseFloat(v[y]);for(;g<v.length&&!isNaN(v[g])&&!isNaN(v[0]);){var m,x,_,w,P,b,A,T=s,R=h;switch(p){case"l":s+=v[g++],h+=v[g++],d=u.L,c.addData(d,s,h);break;case"L":s=v[g++],h=v[g++],d=u.L,c.addData(d,s,h);break;case"m":s+=v[g++],h+=v[g++],d=u.M,c.addData(d,s,h),p="l";break;case"M":s=v[g++],h=v[g++],d=u.M,c.addData(d,s,h),p="L";break;case"h":s+=v[g++],d=u.L,c.addData(d,s,h);break;case"H":s=v[g++],d=u.L,c.addData(d,s,h);break;case"v":h+=v[g++],d=u.L,c.addData(d,s,h);break;case"V":h=v[g++],d=u.L,c.addData(d,s,h);break;case"C":d=u.C,c.addData(d,v[g++],v[g++],v[g++],v[g++],v[g++],v[g++]),s=v[g-2],h=v[g-1];break;case"c":d=u.C,c.addData(d,v[g++]+s,v[g++]+h,v[g++]+s,v[g++]+h,v[g++]+s,v[g++]+h),s+=v[g-2],h+=v[g-1];break;case"S":m=s,x=h;var M=c.len(),C=c.data;r===u.C&&(m+=s-C[M-4],x+=h-C[M-3]),d=u.C,T=v[g++],R=v[g++],s=v[g++],h=v[g++],c.addData(d,m,x,T,R,s,h);break;case"s":m=s,x=h;var M=c.len(),C=c.data;r===u.C&&(m+=s-C[M-4],x+=h-C[M-3]),d=u.C,T=s+v[g++],R=h+v[g++],s+=v[g++],h+=v[g++],c.addData(d,m,x,T,R,s,h);break;case"Q":T=v[g++],R=v[g++],s=v[g++],h=v[g++],d=u.Q,c.addData(d,T,R,s,h);break;case"q":T=v[g++]+s,R=v[g++]+h,s+=v[g++],h+=v[g++],d=u.Q,c.addData(d,T,R,s,h);break;case"T":m=s,x=h;var M=c.len(),C=c.data;r===u.Q&&(m+=s-C[M-4],x+=h-C[M-3]),s=v[g++],h=v[g++],d=u.Q,c.addData(d,m,x,s,h);break;case"t":m=s,x=h;var M=c.len(),C=c.data;r===u.Q&&(m+=s-C[M-4],x+=h-C[M-3]),s+=v[g++],h+=v[g++],d=u.Q,c.addData(d,m,x,s,h);break;case"A":_=v[g++],w=v[g++],P=v[g++],b=v[g++],A=v[g++],T=s,R=h,s=v[g++],h=v[g++],d=u.A,i(T,R,s,h,b,A,_,w,P,d,c);break;case"a":_=v[g++],w=v[g++],P=v[g++],b=v[g++],A=v[g++],T=s,R=h,s+=v[g++],h+=v[g++],d=u.A,i(T,R,s,h,b,A,_,w,P,d,c)}}"z"!==p&&"Z"!==p||(d=u.Z,c.addData(d)),r=d}return c.toStatic(),c}function o(t,e){var n,i=r(t);return e=e||{},e.buildPath=function(t){t.setData(i.data),n&&h(t,n);var e=t.getContext();e&&t.rebuildPath(e)},e.applyTransform=function(t){n||(n=c.create()),c.mul(n,t,n)},e}var s=n(7),a=n(26),h=n(36),c=n(14),l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],u=Math.sqrt,d=Math.sin,f=Math.cos,p=Math.PI,g=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},v=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(g(t)*g(e))},y=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(v(t,e))};t.exports={createFromString:function(t,e){return new s(o(t,e))},extendFromString:function(t,e){return s.extend(o(t,e))},mergePath:function(t,e){var n,i,r=[],o=t.length;for(i=0;i<o;i++)n=t[i],n.__dirty&&n.buildPath(n.path,n.shape),r.push(n.path);var a=new s(e);return a.buildPath=function(t){t.appendPath(r);var e=t.getContext();e&&t.rebuildPath(e)},a}}},function(t,e,n){function i(t){var e=t.fill;return null!=e&&"none"!==e}function r(t){var e=t.stroke;return null!=e&&"none"!==e&&t.lineWidth>0}function o(t){s.call(this,t),this.path=new h}var s=n(8),a=n(4),h=n(26),c=n(29),l=n(5),u=Math.abs;o.prototype={constructor:o,type:"path",__dirtyPath:!0,strokeContainThreshold:5,brush:function(t){t.save();var e=this.style,n=this.path,o=r(e),s=i(e);this.__dirtyPath&&(s&&e.fill instanceof l&&e.fill.updateCanvasGradient(this,t),o&&e.stroke instanceof l&&e.stroke.updateCanvasGradient(this,t)),e.bind(t,this),this.setTransform(t);var a=e.lineDash,h=e.lineDashOffset,c=!!t.setLineDash;this.__dirtyPath||a&&!c&&o?(n=this.path.beginPath(t),a&&!c&&(n.setLineDash(a),n.setLineDashOffset(h)),this.buildPath(n,this.shape),this.__dirtyPath=!1):(t.beginPath(),this.path.rebuildPath(t)),s&&n.fill(t),a&&c&&(t.setLineDash(a),t.lineDashOffset=h),o&&n.stroke(t),null!=e.text&&this.drawRectText(t,this.getBoundingRect()),t.restore()},buildPath:function(t,e){},getBoundingRect:function(){var t=this._rect,e=this.style;if(!t){var n=this.path;this.__dirtyPath&&(n.beginPath(),this.buildPath(n,this.shape)),t=n.getBoundingRect()}if(r(e)&&(this.__dirty||!this._rect)){var o=this._rectWithStroke||(this._rectWithStroke=t.clone());o.copy(t);var s=e.lineWidth,a=e.strokeNoScale?this.getLineScale():1;return i(e)||(s=Math.max(s,this.strokeContainThreshold)),a>1e-10&&(o.width+=s/a,o.height+=s/a,o.x-=s/a/2,o.y-=s/a/2),o}return this._rect=t,t},contain:function(t,e){var n=this.transformCoordToLocal(t,e),o=this.getBoundingRect(),s=this.style;if(t=n[0],e=n[1],o.contain(t,e)){var a=this.path.data;if(r(s)){var h=s.lineWidth,l=s.strokeNoScale?this.getLineScale():1;if(l>1e-10&&(i(s)||(h=Math.max(h,this.strokeContainThreshold)),c.containStroke(a,h/l,t,e)))return!0}if(i(s))return c.contain(a,t,e)}return!1},dirty:function(t){0===arguments.length&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?this.setShape(e):s.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var n=this.shape;if(n){if(a.isObject(t))for(var i in t)n[i]=t[i];else n[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&u(t[0]-1)>1e-10&&u(t[3]-1)>1e-10?Math.sqrt(u(t[0]*t[3]-t[2]*t[1])):1}},o.extend=function(t){var e=function(e){o.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var n=t.shape;if(n){this.shape=this.shape||{};var i=this.shape;for(var r in n)!i.hasOwnProperty(r)&&n.hasOwnProperty(r)&&(i[r]=n[r])}t.init&&t.init.call(this,e)};a.inherits(e,o);for(var n in t)"style"!==n&&"shape"!==n&&(e.prototype[n]=t[n]);return e},a.inherits(o,s),t.exports=o},function(t,e,n){function i(t){t=t||{},s.call(this,t);for(var e in t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new o(t.style),this._rect=null,this.__clipPaths=[]}var r=n(4),o=n(9),s=n(10),a=n(23);i.prototype={constructor:i,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect();return i.contain(n[0],n[1])},dirty:function(){this.__dirty=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?s.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(),this}},r.inherits(i,s),r.mixin(i,a),t.exports=i},function(t,e){var n=["lineCap","lineJoin","miterLimit","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor"],i=function(t){this.extendFrom(t)};i.prototype={constructor:i,fill:"#000000",stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,textFill:"#000",textStroke:null,textPosition:"inside",textBaseline:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,bind:function(t,e){for(var i=this.fill,r=this.stroke,o=0;o<n.length;o++){var s=n[o];null!=this[s]&&(t[s]=this[s])}if(null!=r){var a=this.lineWidth;t.lineWidth=a/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}null!=i&&(t.fillStyle=i.canvasGradient?i.canvasGradient:i),null!=r&&(t.strokeStyle=r.canvasGradient?r.canvasGradient:r),null!=this.opacity&&(t.globalAlpha=this.opacity)},extendFrom:function(t,e){if(t){var n=this;for(var i in t)!t.hasOwnProperty(i)||!e&&n.hasOwnProperty(i)||(n[i]=t[i])}},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t}};var r,o,s=i.prototype;for(o=0;o<n.length;o++)r=n[o],r in s||(s[r]=null);t.exports=i},function(t,e,n){"use strict";var i=n(11),r=n(12),o=n(13),s=n(16),a=n(4),h=function(t){o.call(this,t),r.call(this,t),s.call(this,t),this.id=t.id||i()};h.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=e,this.decomposeTransform(),this.dirty()},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var n=this[t];n||(n=this[t]=[]),n[0]=e[0],n[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(a.isObject(t))for(var n in t)t.hasOwnProperty(n)&&this.attrKV(n,t[n]);return this.dirty(),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),this.clipPath=t,t.__zr=e,t.__clipTarget=this,this.dirty()},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty())},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},a.mixin(h,s),a.mixin(h,o),a.mixin(h,r),t.exports=h},function(t,e){var n=2311;t.exports=function(){return"zr_"+n++}},function(t,e,n){var i=Array.prototype.slice,r=n(4),o=r.indexOf,s=function(){this._$handlers={}};s.prototype={constructor:s,one:function(t,e,n){var i=this._$handlers;return e&&t?(i[t]||(i[t]=[]),o(i[t],t)>=0?this:(i[t].push({h:e,one:!0,ctx:n||this}),this)):this},on:function(t,e,n){var i=this._$handlers;return e&&t?(i[t]||(i[t]=[]),i[t].push({h:e,one:!1,ctx:n||this}),this):this},isSilent:function(t){var e=this._$handlers;return e[t]&&e[t].length},off:function(t,e){var n=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var i=[],r=0,o=n[t].length;r<o;r++)n[t][r].h!=e&&i.push(n[t][r]);n[t]=i}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},trigger:function(t){if(this._$handlers[t]){var e=arguments,n=e.length;n>3&&(e=i.call(e,1));for(var r=this._$handlers[t],o=r.length,s=0;s<o;){switch(n){case 1:r[s].h.call(r[s].ctx);break;case 2:r[s].h.call(r[s].ctx,e[1]);break;case 3:r[s].h.call(r[s].ctx,e[1],e[2]);break;default:r[s].h.apply(r[s].ctx,e)}r[s].one?(r.splice(s,1),o--):s++}}return this},triggerWithContext:function(t){if(this._$handlers[t]){var e=arguments,n=e.length;n>4&&(e=i.call(e,1,e.length-1));for(var r=e[e.length-1],o=this._$handlers[t],s=o.length,a=0;a<s;){switch(n){case 1:o[a].h.call(r);break;case 2:o[a].h.call(r,e[1]);break;case 3:o[a].h.call(r,e[1],e[2]);break;default:o[a].h.apply(r,e)}o[a].one?(o.splice(a,1),s--):a++}}return this}},t.exports=s},function(t,e,n){"use strict";function i(t){return t>a||t<-a}var r=n(14),o=n(15),s=r.identity,a=5e-5,h=function(t){t=t||{},t.position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},c=h.prototype;c.transform=null,c.needLocalTransform=function(){return i(this.rotation)||i(this.position[0])||i(this.position[1])||i(this.scale[0]-1)||i(this.scale[1]-1)},c.updateTransform=function(){var t=this.parent,e=t&&t.transform,n=this.needLocalTransform(),i=this.transform;
return n||e?(i=i||r.create(),n?this.getLocalTransform(i):s(i),e&&(n?r.mul(i,t.transform,i):r.copy(i,t.transform)),this.transform=i,this.invTransform=this.invTransform||r.create(),void r.invert(this.invTransform,i)):void(i&&s(i))},c.getLocalTransform=function(t){t=t||[],s(t);var e=this.origin,n=this.scale,i=this.rotation,o=this.position;return e&&(t[4]-=e[0],t[5]-=e[1]),r.scale(t,t,n),i&&r.rotate(t,t,i),e&&(t[4]+=e[0],t[5]+=e[1]),t[4]+=o[0],t[5]+=o[1],t},c.setTransform=function(t){var e=this.transform;e&&t.transform(e[0],e[1],e[2],e[3],e[4],e[5])};var l=[];c.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(r.mul(l,t.invTransform,e),e=l);var n=e[0]*e[0]+e[1]*e[1],o=e[2]*e[2]+e[3]*e[3],s=this.position,a=this.scale;i(n-1)&&(n=Math.sqrt(n)),i(o-1)&&(o=Math.sqrt(o)),e[0]<0&&(n=-n),e[3]<0&&(o=-o),s[0]=e[4],s[1]=e[5],a[0]=n,a[1]=o,this.rotation=Math.atan2(-e[1]/o,e[0]/n)}},c.transformCoordToLocal=function(t,e){var n=[t,e],i=this.invTransform;return i&&o.applyTransform(n,n,i),n},c.transformCoordToGlobal=function(t,e){var n=[t,e],i=this.transform;return i&&o.applyTransform(n,n,i),n},t.exports=h},function(t,e){var n="undefined"==typeof Float32Array?Array:Float32Array,i={create:function(){var t=new n(6);return i.identity(t),t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},mul:function(t,e,n){var i=e[0]*n[0]+e[2]*n[1],r=e[1]*n[0]+e[3]*n[1],o=e[0]*n[2]+e[2]*n[3],s=e[1]*n[2]+e[3]*n[3],a=e[0]*n[4]+e[2]*n[5]+e[4],h=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=h,t},translate:function(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t},rotate:function(t,e,n){var i=e[0],r=e[2],o=e[4],s=e[1],a=e[3],h=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=i*l+s*c,t[1]=-i*c+s*l,t[2]=r*l+a*c,t[3]=-r*c+l*a,t[4]=l*o+c*h,t[5]=l*h-c*o,t},scale:function(t,e,n){var i=n[0],r=n[1];return t[0]=e[0]*i,t[1]=e[1]*r,t[2]=e[2]*i,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*r,t},invert:function(t,e){var n=e[0],i=e[2],r=e[4],o=e[1],s=e[3],a=e[5],h=n*s-o*i;return h?(h=1/h,t[0]=s*h,t[1]=-o*h,t[2]=-i*h,t[3]=n*h,t[4]=(i*a-s*r)*h,t[5]=(o*r-n*a)*h,t):null}};t.exports=i},function(t,e){var n="undefined"==typeof Float32Array?Array:Float32Array,i={create:function(t,e){var i=new n(2);return i[0]=t||0,i[1]=e||0,i},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},clone:function(t){var e=new n(2);return e[0]=t[0],e[1]=t[1],e},set:function(t,e,n){return t[0]=e,t[1]=n,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},scaleAndAdd:function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t},sub:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},len:function(t){return Math.sqrt(this.lenSquare(t))},lenSquare:function(t){return t[0]*t[0]+t[1]*t[1]},mul:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},div:function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},normalize:function(t,e){var n=i.len(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t},distance:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))},distanceSquare:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])},negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerp:function(t,e,n,i){return t[0]=e[0]+i*(n[0]-e[0]),t[1]=e[1]+i*(n[1]-e[1]),t},applyTransform:function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}};i.length=i.len,i.lengthSquare=i.lenSquare,i.dist=i.distance,i.distSquare=i.distanceSquare,t.exports=i},function(t,e,n){"use strict";var i=n(17),r=n(4),o=r.isString,s=r.isFunction,a=r.isObject,h=n(21),c=function(){this.animators=[]};c.prototype={constructor:c,animate:function(t,e){var n,o=!1,s=this,a=this.__zr;if(t){var c=t.split("."),l=s;o="shape"===c[0];for(var u=0,d=c.length;u<d;u++)l&&(l=l[c[u]]);l&&(n=l)}else n=s;if(!n)return void h('Property "'+t+'" is not existed in element '+s.id);var f=s.animators,p=new i(n,e);return p.during(function(t){s.dirty(o)}).done(function(){f.splice(r.indexOf(f,p),1)}),f.push(p),a&&a.animation.addAnimator(p),p},stopAnimation:function(t){for(var e=this.animators,n=e.length,i=0;i<n;i++)e[i].stop(t);return e.length=0,this},animateTo:function(t,e,n,i,r){function a(){c--,c||r&&r()}o(n)?(r=i,i=n,n=0):s(i)?(r=i,i="linear",n=0):s(n)?(r=n,n=0):s(e)?(r=e,e=500):e||(e=500),this.stopAnimation(),this._animateToShallow("",this,t,e,n,i,r);var h=this.animators.slice(),c=h.length;c||r&&r();for(var l=0;l<h.length;l++)h[l].done(a).start(i)},_animateToShallow:function(t,e,n,i,o){var s={},h=0;for(var c in n)if(null!=e[c])a(n[c])&&!r.isArrayLike(n[c])?this._animateToShallow(t?t+"."+c:c,e[c],n[c],i,o):(s[c]=n[c],h++);else if(null!=n[c])if(t){var l={};l[t]={},l[t][c]=n[c],this.attr(l)}else this.attr(c,n[c]);return h>0&&this.animate(t,!1).when(null==i?500:i,s).delay(o||0),this}},t.exports=c},function(t,e,n){function i(t,e){return t[e]}function r(t,e,n){t[e]=n}function o(t,e,n){return(e-t)*n+t}function s(t,e,n){return n>.5?e:t}function a(t,e,n,i,r){var s=t.length;if(1==r)for(var a=0;a<s;a++)i[a]=o(t[a],e[a],n);else for(var h=t[0].length,a=0;a<s;a++)for(var c=0;c<h;c++)i[a][c]=o(t[a][c],e[a][c],n)}function h(t,e,n){var i=t.length,r=e.length;if(i!==r){var o=i>r;if(o)t.length=r;else for(var s=i;s<r;s++)t.push(1===n?e[s]:x.call(e[s]))}}function c(t,e,n){if(t===e)return!0;var i=t.length;if(i!==e.length)return!1;if(1===n){for(var r=0;r<i;r++)if(t[r]!==e[r])return!1}else for(var o=t[0].length,r=0;r<i;r++)for(var s=0;s<o;s++)if(t[r][s]!==e[r][s])return!1;return!0}function l(t,e,n,i,r,o,s,a,h){var c=t.length;if(1==h)for(var l=0;l<c;l++)a[l]=u(t[l],e[l],n[l],i[l],r,o,s);else for(var d=t[0].length,l=0;l<c;l++)for(var f=0;f<d;f++)a[l][f]=u(t[l][f],e[l][f],n[l][f],i[l][f],r,o,s)}function u(t,e,n,i,r,o,s){var a=.5*(n-t),h=.5*(i-e);return(2*(e-n)+a+h)*s+(-3*(e-n)-2*a-h)*o+a*r+e}function d(t){if(m(t)){var e=t.length;if(m(t[0])){for(var n=[],i=0;i<e;i++)n.push(x.call(t[i]));return n}return x.call(t)}return t}function f(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function p(t,e,n,i,r){var d=t._getter,p=t._setter,y="spline"===e,x=i.length;if(x){var _,w=i[0].value,P=m(w),b=!1,A=!1,T=P&&m(w[0])?2:1;i.sort(function(t,e){return t.time-e.time}),_=i[x-1].time;for(var R=[],M=[],C=i[0].value,O=!0,S=0;S<x;S++){R.push(i[S].time/_);var k=i[S].value;if(P&&c(k,C,T)||!P&&k===C||(O=!1),C=k,"string"==typeof k){var E=v.parse(k);E?(k=E,b=!0):A=!0}M.push(k)}if(!O){if(P){for(var L=M[x-1],S=0;S<x-1;S++)h(M[S],L,T);h(d(t._target,r),L,T)}var N,I,D,B,z,F,G=0,q=0;if(b)var H=[0,0,0,0];var U=function(t,e){var n;if(e<q){for(N=Math.min(G+1,x-1),n=N;n>=0&&!(R[n]<=e);n--);n=Math.min(n,x-2)}else{for(n=G;n<x&&!(R[n]>e);n++);n=Math.min(n-1,x-2)}G=n,q=e;var i=R[n+1]-R[n];if(0!==i)if(I=(e-R[n])/i,y)if(B=M[n],D=M[0===n?n:n-1],z=M[n>x-2?x-1:n+1],F=M[n>x-3?x-1:n+2],P)l(D,B,z,F,I,I*I,I*I*I,d(t,r),T);else{var h;if(b)h=l(D,B,z,F,I,I*I,I*I*I,H,1),h=f(H);else{if(A)return s(B,z,I);h=u(D,B,z,F,I,I*I,I*I*I)}p(t,r,h)}else if(P)a(M[n],M[n+1],I,d(t,r),T);else{var h;if(b)a(M[n],M[n+1],I,H,1),h=f(H);else{if(A)return s(M[n],M[n+1],I);h=o(M[n],M[n+1],I)}p(t,r,h)}},Y=new g({target:t._target,life:_,loop:t._loop,delay:t._delay,onframe:U,ondestroy:n});return e&&"spline"!==e&&(Y.easing=e),Y}}}var g=n(18),v=n(20),y=n(4),m=y.isArrayLike,x=Array.prototype.slice,_=function(t,e,n,o){this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||i,this._setter=o||r,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};_.prototype={when:function(t,e){var n=this._tracks;for(var i in e){if(!n[i]){n[i]=[];var r=this._getter(this._target,i);if(null==r)continue;0!==t&&n[i].push({time:0,value:d(r)})}n[i].push({time:t,value:e[i]})}return this},during:function(t){return this._onframeList.push(t),this},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,n=0;n<e;n++)t[n].call(this)},start:function(t){var e,n=this,i=0,r=function(){i--,i||n._doneCallback()};for(var o in this._tracks){var s=p(this,t,r,this._tracks[o],o);s&&(this._clipList.push(s),i++,this.animation&&this.animation.addClip(s),e=s)}if(e){var a=e.onframe;e.onframe=function(t,e){a(t,e);for(var i=0;i<n._onframeList.length;i++)n._onframeList[i](t,e)}}return i||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,n=this.animation,i=0;i<e.length;i++){var r=e[i];t&&r.onframe(this._target,1),n&&n.removeClip(r)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}},t.exports=_},function(t,e,n){function i(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart}var r=n(19);i.prototype={constructor:i,step:function(t){this._initialized||(this._startTime=(new Date).getTime()+this._delay,this._initialized=!0);var e=(t-this._startTime)/this._life;if(!(e<0)){e=Math.min(e,1);var n=this.easing,i="string"==typeof n?r[n]:n,o="function"==typeof i?i(e):e;return this.fire("frame",o),1==e?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}},restart:function(){var t=(new Date).getTime(),e=(t-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap,this._needsRemove=!1},fire:function(t,e){t="on"+t,this[t]&&this[t](this._target,e)}},t.exports=i},function(t,e){var n={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)))},elasticOut:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1)},elasticInOut:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)):n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-n.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*n.bounceIn(2*t):.5*n.bounceOut(2*t-1)+.5}};t.exports=n},function(t,e){function n(t){return t=Math.round(t),t<0?0:t>255?255:t}function i(t){return t=Math.round(t),t<0?0:t>360?360:t}function r(t){return t<0?0:t>1?1:t}function o(t){return n(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100*255:parseInt(t,10))}function s(t){return r(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100:parseFloat(t))}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function h(t,e,n){return t+(e-t)*n}function c(t){if(t){t+="";var e=t.replace(/ /g,"").toLowerCase();if(e in _)return _[e].slice();if("#"!==e.charAt(0)){var n=e.indexOf("("),i=e.indexOf(")");if(n!==-1&&i+1===e.length){var r=e.substr(0,n),a=e.substr(n+1,i-(n+1)).split(","),h=1;switch(r){case"rgba":if(4!==a.length)return;h=s(a.pop());case"rgb":if(3!==a.length)return;return[o(a[0]),o(a[1]),o(a[2]),h];case"hsla":if(4!==a.length)return;return a[3]=s(a[3]),l(a);case"hsl":if(3!==a.length)return;return l(a);default:return}}}else{if(4===e.length){var c=parseInt(e.substr(1),16);if(!(c>=0&&c<=4095))return;return[(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,1]}if(7===e.length){var c=parseInt(e.substr(1),16);if(!(c>=0&&c<=16777215))return;return[(16711680&c)>>16,(65280&c)>>8,255&c,1]}}}}function l(t){var e=(parseFloat(t[0])%360+360)%360/360,i=s(t[1]),r=s(t[2]),o=r<=.5?r*(i+1):r+i-r*i,h=2*r-o,c=[n(255*a(h,o,e+1/3)),n(255*a(h,o,e)),n(255*a(h,o,e-1/3))];return 4===t.length&&(c[3]=t[3]),c}function u(t){if(t){var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(i,r,o),a=Math.max(i,r,o),h=a-s,c=(a+s)/2;if(0===h)e=0,n=0;else{n=c<.5?h/(a+s):h/(2-a-s);var l=((a-i)/6+h/2)/h,u=((a-r)/6+h/2)/h,d=((a-o)/6+h/2)/h;i===a?e=d-u:r===a?e=1/3+l-d:o===a&&(e=2/3+u-l),e<0&&(e+=1),e>1&&(e-=1)}var f=[360*e,n,c];return null!=t[3]&&f.push(t[3]),f}}function d(t,e){var n=c(t);if(n){for(var i=0;i<3;i++)e<0?n[i]=n[i]*(1-e)|0:n[i]=(255-n[i])*e+n[i]|0;return x(n,4===n.length?"rgba":"rgb")}}function f(t,e){var n=c(t);if(n)return((1<<24)+(n[0]<<16)+(n[1]<<8)+ +n[2]).toString(16).slice(1)}function p(t,e,i){if(e&&e.length&&t>=0&&t<=1){i=i||[0,0,0,0];var r=t*(e.length-1),o=Math.floor(r),s=Math.ceil(r),a=e[o],c=e[s],l=r-o;return i[0]=n(h(a[0],c[0],l)),i[1]=n(h(a[1],c[1],l)),i[2]=n(h(a[2],c[2],l)),i[3]=n(h(a[3],c[3],l)),i}}function g(t,e,i){if(e&&e.length&&t>=0&&t<=1){var o=t*(e.length-1),s=Math.floor(o),a=Math.ceil(o),l=c(e[s]),u=c(e[a]),d=o-s,f=x([n(h(l[0],u[0],d)),n(h(l[1],u[1],d)),n(h(l[2],u[2],d)),r(h(l[3],u[3],d))],"rgba");return i?{color:f,leftIndex:s,rightIndex:a,value:o}:f}}function v(t,e){if(!(2!==t.length||t[1]<t[0])){for(var n=g(t[0],e,!0),i=g(t[1],e,!0),r=[{color:n.color,offset:0}],o=i.value-n.value,s=Math.max(n.value,n.rightIndex),a=Math.min(i.value,i.leftIndex),h=s;o>0&&h<=a;h++)r.push({color:e[h],offset:(h-n.value)/o});return r.push({color:i.color,offset:1}),r}}function y(t,e,n,r){if(t=c(t))return t=u(t),null!=e&&(t[0]=i(e)),null!=n&&(t[1]=s(n)),null!=r&&(t[2]=s(r)),x(l(t),"rgba")}function m(t,e){if(t=c(t),t&&null!=e)return t[3]=r(e),x(t,"rgba")}function x(t,e){return"rgb"!==e&&"hsv"!==e&&"hsl"!==e||(t=t.slice(0,3)),e+"("+t.join(",")+")"}var _={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};t.exports={parse:c,lift:d,toHex:f,fastMapToColor:p,mapToColor:g,mapIntervalToColor:v,modifyHSL:y,modifyAlpha:m,stringify:x}},function(t,e,n){var i=n(22);t.exports=function(){if(0!==i.debugMode)if(1==i.debugMode)for(var t in arguments)throw new Error(arguments[t]);else if(i.debugMode>1)for(var t in arguments)console.log(arguments[t])}},function(t,e){var n=1;"undefined"!=typeof window&&(n=Math.max(window.devicePixelRatio||1,1));var i={debugMode:0,devicePixelRatio:n};t.exports=i},function(t,e,n){function i(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function r(t,e){t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}var o=n(24),s=n(25),a=new s,h=function(){};h.prototype={constructor:h,drawRectText:function(t,e,n){var s=this.style,h=s.text;if(null!=h&&(h+=""),h){var c,l,u=s.textPosition,d=s.textDistance,f=s.textAlign,p=s.textFont||s.font,g=s.textBaseline,v=s.textVerticalAlign;n=n||o.getBoundingRect(h,p,f,g);var y=this.transform,m=this.invTransform;if(y&&(a.copy(e),a.applyTransform(y),e=a,r(t,m)),u instanceof Array)c=e.x+i(u[0],e.width),l=e.y+i(u[1],e.height),f=f||"left",g=g||"top";else{var x=o.adjustTextPositionOnRect(u,e,n,d);c=x.x,l=x.y,f=f||x.textAlign,g=g||x.textBaseline}if(t.textAlign=f,v){switch(v){case"middle":l-=n.height/2;break;case"bottom":l-=n.height}t.textBaseline="top"}else t.textBaseline=g;var _=s.textFill,w=s.textStroke;_&&(t.fillStyle=_),w&&(t.strokeStyle=w),t.font=p,t.shadowColor=s.textShadowColor,t.shadowBlur=s.textShadowBlur,t.shadowOffsetX=s.textShadowOffsetX,t.shadowOffsetY=s.textShadowOffsetY;for(var P=h.split("\n"),b=0;b<P.length;b++)_&&t.fillText(P[b],c,l),w&&t.strokeText(P[b],c,l),l+=n.lineHeight;y&&r(t,y)}}},t.exports=h},function(t,e,n){function i(t,e){var n=t+":"+e;if(c[n])return c[n];for(var i=(t+"").split("\n"),r=0,o=0,s=i.length;o<s;o++)r=Math.max(p.measureText(i[o],e).width,r);return l>u&&(l=0,c={}),l++,c[n]=r,r}function r(t,e,n,r){var o=((t||"")+"").split("\n").length,s=i(t,e),a=i("",e),h=o*a,c=new f(0,0,s,h);switch(c.lineHeight=a,r){case"bottom":case"alphabetic":c.y-=a;break;case"middle":c.y-=a/2}switch(n){case"end":case"right":c.x-=c.width;break;case"center":c.x-=c.width/2}return c}function o(t,e,n,i){var r=e.x,o=e.y,s=e.height,a=e.width,h=n.height,c=s/2-h/2,l="left";switch(t){case"left":r-=i,o+=c,l="right";break;case"right":r+=i+a,o+=c,l="left";break;case"top":r+=a/2,o-=i+h,l="center";break;case"bottom":r+=a/2,o+=s+i,l="center";break;case"inside":r+=a/2,o+=c,l="center";break;case"insideLeft":r+=i,o+=c,l="left";break;case"insideRight":r+=a-i,o+=c,l="right";break;case"insideTop":r+=a/2,o+=i,l="center";break;case"insideBottom":r+=a/2,o+=s-h-i,l="center";break;case"insideTopLeft":r+=i,o+=i,l="left";break;case"insideTopRight":r+=a-i,o+=i,l="right";break;case"insideBottomLeft":r+=i,o+=s-h-i;break;case"insideBottomRight":r+=a-i,o+=s-h-i,l="right"}return{x:r,y:o,textAlign:l,textBaseline:"top"}}function s(t,e,n,r){if(!n)return"";r=d.defaults({ellipsis:"...",minCharacters:3,maxIterations:3,cnCharWidth:i("",e),ascCharWidth:i("a",e)},r,!0),n-=i(r.ellipsis);for(var o=(t+"").split("\n"),s=0,h=o.length;s<h;s++)o[s]=a(o[s],e,n,r);return o.join("\n")}function a(t,e,n,r){for(var o=0;;o++){var s=i(t,e);if(s<n||o>=r.maxIterations){t+=r.ellipsis;break}var a=0===o?h(t,n,r):Math.floor(t.length*n/s);if(a<r.minCharacters){t="";break}t=t.substr(0,a)}return t}function h(t,e,n){for(var i=0,r=0,o=t.length;r<o&&i<e;r++){var s=t.charCodeAt(r);i+=0<=s&&s<=127?n.ascCharWidth:n.cnCharWidth}return r}var c={},l=0,u=5e3,d=n(4),f=n(25),p={getWidth:i,getBoundingRect:r,adjustTextPositionOnRect:o,ellipsis:s,measureText:function(t,e){var n=d.getContext();return n.font=e,n.measureText(t)}};t.exports=p},function(t,e,n){"use strict";function i(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i}var r=n(15),o=n(14),s=r.applyTransform,a=Math.min,h=Math.abs,c=Math.max;i.prototype={constructor:i,union:function(t){var e=a(t.x,this.x),n=a(t.y,this.y);this.width=c(t.x+t.width,this.x+this.width)-e,this.height=c(t.y+t.height,this.y+this.height)-n,this.x=e,this.y=n},applyTransform:function(){var t=[],e=[];return function(n){n&&(t[0]=this.x,t[1]=this.y,e[0]=this.x+this.width,e[1]=this.y+this.height,s(t,t,n),s(e,e,n),this.x=a(t[0],e[0]),this.y=a(t[1],e[1]),this.width=h(e[0]-t[0]),this.height=h(e[1]-t[1]))}}(),calculateTransform:function(t){var e=this,n=t.width/e.width,i=t.height/e.height,r=o.create();return o.translate(r,r,[-e.x,-e.y]),o.scale(r,r,[n,i]),o.translate(r,r,[t.x,t.y]),r},intersect:function(t){var e=this,n=e.x,i=e.x+e.width,r=e.y,o=e.y+e.height,s=t.x,a=t.x+t.width,h=t.y,c=t.y+t.height;return!(i<s||a<n||o<h||c<r)},contain:function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},clone:function(){return new i(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}},t.exports=i},function(t,e,n){"use strict";var i=n(27),r=n(15),o=n(28),s=n(25),a={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},h=[],c=[],l=[],u=[],d=Math.min,f=Math.max,p=Math.cos,g=Math.sin,v=Math.sqrt,y="undefined"!=typeof Float32Array,m=function(){this.data=[],this._len=0,this._ctx=null,this._xi=0,this._yi=0,this._x0=0,this._y0=0};m.prototype={constructor:m,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,getContext:function(){return this._ctx},beginPath:function(t){return this._ctx=t,t&&t.beginPath(),this._len=0,this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(a.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){return this.addData(a.L,t,e),this._ctx&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),this._xi=t,this._yi=e,this},bezierCurveTo:function(t,e,n,i,r,o){return this.addData(a.C,t,e,n,i,r,o),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,n,i,r,o):this._ctx.bezierCurveTo(t,e,n,i,r,o)),this._xi=r,this._yi=o,this},quadraticCurveTo:function(t,e,n,i){return this.addData(a.Q,t,e,n,i),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,n,i):this._ctx.quadraticCurveTo(t,e,n,i)),this._xi=n,this._yi=i,this},arc:function(t,e,n,i,r,o){return this.addData(a.A,t,e,n,n,i,r-i,0,o?0:1),this._ctx&&this._ctx.arc(t,e,n,i,r,o),this._xi=p(r)*n+t,this._xi=g(r)*n+t,this},arcTo:function(t,e,n,i,r){return this._ctx&&this._ctx.arcTo(t,e,n,i,r),this},rect:function(t,e,n,i){return this._ctx&&this._ctx.rect(t,e,n,i),this.addData(a.R,t,e,n,i),this},closePath:function(){this.addData(a.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length==e||!y||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,i=this._len,r=0;r<e;r++)n+=t[r].len();y&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var r=0;r<e;r++)for(var o=t[r].data,s=0;s<o.length;s++)this.data[i++]=o[s];this._len=i},addData:function(t){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var n=0;n<arguments.length;n++)e[this._len++]=arguments[n];this._prevCmd=t},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var n,i,r=this._dashSum,o=this._dashOffset,s=this._lineDash,a=this._ctx,h=this._xi,c=this._yi,l=t-h,u=e-c,p=v(l*l+u*u),g=h,y=c,m=s.length;for(l/=p,u/=p,o<0&&(o=r+o),o%=r,g-=o*l,y-=o*u;l>=0&&g<=t||l<0&&g>t;)i=this._dashIdx,n=s[i],g+=l*n,y+=u*n,this._dashIdx=(i+1)%m,l>0&&g<h||l<0&&g>h||a[i%2?"moveTo":"lineTo"](l>=0?d(g,t):f(g,t),u>=0?d(y,e):f(y,e));l=g-t,u=y-e,this._dashOffset=-v(l*l+u*u)},_dashedBezierTo:function(t,e,n,r,o,s){var a,h,c,l,u,d=this._dashSum,f=this._dashOffset,p=this._lineDash,g=this._ctx,y=this._xi,m=this._yi,x=i.cubicAt,_=0,w=this._dashIdx,P=p.length,b=0;for(f<0&&(f=d+f),f%=d,a=0;a<1;a+=.1)h=x(y,t,n,o,a+.1)-x(y,t,n,o,a),c=x(m,e,r,s,a+.1)-x(m,e,r,s,a),_+=v(h*h+c*c);for(;w<P&&(b+=p[w],!(b>f));w++);for(a=(b-f)/_;a<=1;)l=x(y,t,n,o,a),u=x(m,e,r,s,a),w%2?g.moveTo(l,u):g.lineTo(l,u),a+=p[w]/_,w=(w+1)%P;w%2!==0&&g.lineTo(o,s),h=o-l,c=s-u,this._dashOffset=-v(h*h+c*c)},_dashedQuadraticTo:function(t,e,n,i){var r=n,o=i;n=(n+2*t)/3,i=(i+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,n,i,r,o)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,y&&(this.data=new Float32Array(t)))},getBoundingRect:function(){h[0]=h[1]=l[0]=l[1]=Number.MAX_VALUE,c[0]=c[1]=u[0]=u[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,n=0,i=0,d=0,f=0;f<t.length;){var v=t[f++];switch(1==f&&(e=t[f],n=t[f+1],i=e,d=n),v){case a.M:i=t[f++],d=t[f++],e=i,n=d,l[0]=i,l[1]=d,u[0]=i,u[1]=d;break;case a.L:o.fromLine(e,n,t[f],t[f+1],l,u),e=t[f++],n=t[f++];break;case a.C:o.fromCubic(e,n,t[f++],t[f++],t[f++],t[f++],t[f],t[f+1],l,u),e=t[f++],n=t[f++];break;case a.Q:o.fromQuadratic(e,n,t[f++],t[f++],t[f],t[f+1],l,u),e=t[f++],n=t[f++];break;case a.A:var y=t[f++],m=t[f++],x=t[f++],_=t[f++],w=t[f++],P=t[f++]+w,b=(t[f++],1-t[f++]);1==f&&(i=p(w)*x+y,d=g(w)*_+m),o.fromArc(y,m,x,_,w,P,b,l,u),e=p(P)*x+y,n=g(P)*_+m;break;case a.R:i=e=t[f++],d=n=t[f++];var A=t[f++],T=t[f++];o.fromLine(i,d,i+A,d+T,l,u);break;case a.Z:e=i,n=d}r.min(h,h,l),r.max(c,c,u)}return 0===f&&(h[0]=h[1]=c[0]=c[1]=0),new s(h[0],h[1],c[0]-h[0],c[1]-h[1])},rebuildPath:function(t){for(var e=this.data,n=0;n<this._len;){var i=e[n++];switch(i){case a.M:t.moveTo(e[n++],e[n++]);break;case a.L:t.lineTo(e[n++],e[n++]);break;case a.C:t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);break;case a.Q:t.quadraticCurveTo(e[n++],e[n++],e[n++],e[n++]);break;case a.A:var r=e[n++],o=e[n++],s=e[n++],h=e[n++],c=e[n++],l=e[n++],u=e[n++],d=e[n++],f=s>h?s:h,p=s>h?1:s/h,g=s>h?h/s:1,v=Math.abs(s-h)>.001;v?(t.translate(r,o),t.rotate(u),t.scale(p,g),t.arc(0,0,f,c,c+l,1-d),t.scale(1/p,1/g),t.rotate(-u),t.translate(-r,-o)):t.arc(r,o,f,c,c+l,1-d);break;case a.R:t.rect(e[n++],e[n++],e[n++],e[n++]);break;case a.Z:t.closePath()}}}},m.CMD=a,t.exports=m},function(t,e,n){"use strict";function i(t){return t>-P&&t<P}function r(t){return t>P||t<-P}function o(t,e,n,i,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*i+3*o*n)}function s(t,e,n,i,r){var o=1-r;return 3*(((e-t)*o+2*(n-e)*r)*o+(i-n)*r*r)}function a(t,e,n,r,o,s){var a=r+3*(e-n)-t,h=3*(n-2*e+t),c=3*(e-t),l=t-o,u=h*h-3*a*c,d=h*c-9*a*l,f=c*c-3*h*l,p=0;if(i(u)&&i(d))if(i(h))s[0]=0;else{var g=-c/h;g>=0&&g<=1&&(s[p++]=g)}else{var v=d*d-4*u*f;if(i(v)){var y=d/u,g=-h/a+y,m=-y/2;g>=0&&g<=1&&(s[p++]=g),m>=0&&m<=1&&(s[p++]=m)}else if(v>0){var x=w(v),P=u*h+1.5*a*(-d+x),T=u*h+1.5*a*(-d-x);P=P<0?-_(-P,A):_(P,A),T=T<0?-_(-T,A):_(T,A);var g=(-h-(P+T))/(3*a);g>=0&&g<=1&&(s[p++]=g)}else{var R=(2*u*h-3*a*d)/(2*w(u*u*u)),M=Math.acos(R)/3,C=w(u),O=Math.cos(M),g=(-h-2*C*O)/(3*a),m=(-h+C*(O+b*Math.sin(M)))/(3*a),S=(-h+C*(O-b*Math.sin(M)))/(3*a);g>=0&&g<=1&&(s[p++]=g),m>=0&&m<=1&&(s[p++]=m),S>=0&&S<=1&&(s[p++]=S)}}return p}function h(t,e,n,o,s){var a=6*n-12*e+6*t,h=9*e+3*o-3*t-9*n,c=3*e-3*t,l=0;if(i(h)){if(r(a)){var u=-c/a;u>=0&&u<=1&&(s[l++]=u)}}else{var d=a*a-4*h*c;if(i(d))s[0]=-a/(2*h);else if(d>0){var f=w(d),u=(-a+f)/(2*h),p=(-a-f)/(2*h);u>=0&&u<=1&&(s[l++]=u),p>=0&&p<=1&&(s[l++]=p)}}return l}function c(t,e,n,i,r,o){var s=(e-t)*r+t,a=(n-e)*r+e,h=(i-n)*r+n,c=(a-s)*r+s,l=(h-a)*r+a,u=(l-c)*r+c;o[0]=t,o[1]=s,o[2]=c,o[3]=u,o[4]=u,o[5]=l,o[6]=h,o[7]=i}function l(t,e,n,i,r,s,a,h,c,l,u){var d,f,p,g,v,y=.005,m=1/0;T[0]=c,T[1]=l;for(var _=0;_<1;_+=.05)R[0]=o(t,n,r,a,_),R[1]=o(e,i,s,h,_),g=x(T,R),g<m&&(d=_,m=g);m=1/0;for(var b=0;b<32&&!(y<P);b++)f=d-y,p=d+y,R[0]=o(t,n,r,a,f),R[1]=o(e,i,s,h,f),g=x(R,T),f>=0&&g<m?(d=f,m=g):(M[0]=o(t,n,r,a,p),M[1]=o(e,i,s,h,p),v=x(M,T),p<=1&&v<m?(d=p,m=v):y*=.5);return u&&(u[0]=o(t,n,r,a,d),u[1]=o(e,i,s,h,d)),w(m)}function u(t,e,n,i){var r=1-i;return r*(r*t+2*i*e)+i*i*n}function d(t,e,n,i){return 2*((1-i)*(e-t)+i*(n-e))}function f(t,e,n,o,s){var a=t-2*e+n,h=2*(e-t),c=t-o,l=0;if(i(a)){if(r(h)){var u=-c/h;u>=0&&u<=1&&(s[l++]=u)}}else{var d=h*h-4*a*c;if(i(d)){var u=-h/(2*a);u>=0&&u<=1&&(s[l++]=u)}else if(d>0){var f=w(d),u=(-h+f)/(2*a),p=(-h-f)/(2*a);u>=0&&u<=1&&(s[l++]=u),p>=0&&p<=1&&(s[l++]=p)}}return l}function p(t,e,n){var i=t+n-2*e;return 0===i?.5:(t-e)/i}function g(t,e,n,i,r){var o=(e-t)*i+t,s=(n-e)*i+e,a=(s-o)*i+o;r[0]=t,r[1]=o,r[2]=a,r[3]=a,r[4]=s,r[5]=n}function v(t,e,n,i,r,o,s,a,h){var c,l=.005,d=1/0;T[0]=s,T[1]=a;for(var f=0;f<1;f+=.05){R[0]=u(t,n,r,f),R[1]=u(e,i,o,f);var p=x(T,R);p<d&&(c=f,d=p)}d=1/0;for(var g=0;g<32&&!(l<P);g++){
var v=c-l,y=c+l;R[0]=u(t,n,r,v),R[1]=u(e,i,o,v);var p=x(R,T);if(v>=0&&p<d)c=v,d=p;else{M[0]=u(t,n,r,y),M[1]=u(e,i,o,y);var m=x(M,T);y<=1&&m<d?(c=y,d=m):l*=.5}}return h&&(h[0]=u(t,n,r,c),h[1]=u(e,i,o,c)),w(d)}var y=n(15),m=y.create,x=y.distSquare,_=Math.pow,w=Math.sqrt,P=1e-4,b=w(3),A=1/3,T=m(),R=m(),M=m();t.exports={cubicAt:o,cubicDerivativeAt:s,cubicRootAt:a,cubicExtrema:h,cubicSubdivide:c,cubicProjectPoint:l,quadraticAt:u,quadraticDerivativeAt:d,quadraticRootAt:f,quadraticExtremum:p,quadraticSubdivide:g,quadraticProjectPoint:v}},function(t,e,n){var i=n(15),r=n(27),o={},s=Math.min,a=Math.max,h=Math.sin,c=Math.cos,l=i.create(),u=i.create(),d=i.create(),f=2*Math.PI;o.fromPoints=function(t,e,n){if(0!==t.length){var i,r=t[0],o=r[0],h=r[0],c=r[1],l=r[1];for(i=1;i<t.length;i++)r=t[i],o=s(o,r[0]),h=a(h,r[0]),c=s(c,r[1]),l=a(l,r[1]);e[0]=o,e[1]=c,n[0]=h,n[1]=l}},o.fromLine=function(t,e,n,i,r,o){r[0]=s(t,n),r[1]=s(e,i),o[0]=a(t,n),o[1]=a(e,i)},o.fromCubic=function(t,e,n,i,o,h,c,l,u,d){var f,p,g,v,y,m=[],x=[],_=r.cubicExtrema,w=r.cubicAt,P=_(t,n,o,c,m);for(y=0;y<P;y++)m[y]=w(t,n,o,c,m[y]);for(P=_(e,i,h,l,x),y=0;y<P;y++)x[y]=w(e,i,h,l,x[y]);m.push(t,c),x.push(e,l),f=s.apply(null,m),p=a.apply(null,m),g=s.apply(null,x),v=a.apply(null,x),u[0]=f,u[1]=g,d[0]=p,d[1]=v},o.fromQuadratic=function(t,e,n,i,o,h,c,l){var u=r.quadraticExtremum,d=r.quadraticAt,f=a(s(u(t,n,o),1),0),p=a(s(u(e,i,h),1),0),g=d(t,n,o,f),v=d(e,i,h,p);c[0]=s(t,o,g),c[1]=s(e,h,v),l[0]=a(t,o,g),l[1]=a(e,h,v)},o.fromArc=function(t,e,n,r,o,s,a,p,g){var v=i.min,y=i.max,m=Math.abs(o-s);if(m%f<1e-4&&m>1e-4)return p[0]=t-n,p[1]=e-r,g[0]=t+n,void(g[1]=e+r);if(l[0]=c(o)*n+t,l[1]=h(o)*r+e,u[0]=c(s)*n+t,u[1]=h(s)*r+e,v(p,l,u),y(g,l,u),o%=f,o<0&&(o+=f),s%=f,s<0&&(s+=f),o>s&&!a?s+=f:o<s&&a&&(o+=f),a){var x=s;s=o,o=x}for(var _=0;_<s;_+=Math.PI/2)_>o&&(d[0]=c(_)*n+t,d[1]=h(_)*r+e,v(p,d,p),y(g,d,g))},t.exports=o},function(t,e,n){"use strict";function i(t,e){return Math.abs(t-e)<x}function r(){var t=w[0];w[0]=w[1],w[1]=t}function o(t,e,n,i,o,s,a,h,c,l){if(l>e&&l>i&&l>s&&l>h||l<e&&l<i&&l<s&&l<h)return 0;var u=g.cubicRootAt(e,i,s,h,l,_);if(0===u)return 0;for(var d,f,p=0,v=-1,y=0;y<u;y++){var m=_[y],x=g.cubicAt(t,n,o,a,m);x<c||(v<0&&(v=g.cubicExtrema(e,i,s,h,w),w[1]<w[0]&&v>1&&r(),d=g.cubicAt(e,i,s,h,w[0]),v>1&&(f=g.cubicAt(e,i,s,h,w[1]))),p+=2==v?m<w[0]?d<e?1:-1:m<w[1]?f<d?1:-1:h<f?1:-1:m<w[0]?d<e?1:-1:h<d?1:-1)}return p}function s(t,e,n,i,r,o,s,a){if(a>e&&a>i&&a>o||a<e&&a<i&&a<o)return 0;var h=g.quadraticRootAt(e,i,o,a,_);if(0===h)return 0;var c=g.quadraticExtremum(e,i,o);if(c>=0&&c<=1){for(var l=0,u=g.quadraticAt(e,i,o,c),d=0;d<h;d++){var f=g.quadraticAt(t,n,r,_[d]);f>s||(l+=_[d]<c?u<e?1:-1:o<u?1:-1)}return l}var f=g.quadraticAt(t,n,r,_[0]);return f>s?0:o<e?1:-1}function a(t,e,n,i,r,o,s,a){if(a-=e,a>n||a<-n)return 0;var h=Math.sqrt(n*n-a*a);_[0]=-h,_[1]=h;var c=Math.abs(i-r);if(c<1e-4)return 0;if(c%m<1e-4){i=0,r=m;var l=o?1:-1;return s>=_[0]+t&&s<=_[1]+t?l:0}if(o){var h=i;i=p(r),r=p(h)}else i=p(i),r=p(r);i>r&&(r+=m);for(var u=0,d=0;d<2;d++){var f=_[d];if(f+t>s){var g=Math.atan2(a,f),l=o?1:-1;g<0&&(g=m+g),(g>=i&&g<=r||g+m>=i&&g+m<=r)&&(g>Math.PI/2&&g<1.5*Math.PI&&(l=-l),u+=l)}}return u}function h(t,e,n,r,h){for(var l=0,p=0,g=0,m=0,x=0,_=0;_<t.length;){var w=t[_++];if(w===c.M&&_>1&&(n||(l+=v(p,g,m,x,r,h)),0!==l))return!0;switch(1==_&&(p=t[_],g=t[_+1],m=p,x=g),w){case c.M:m=t[_++],x=t[_++],p=m,g=x;break;case c.L:if(n){if(y(p,g,t[_],t[_+1],e,r,h))return!0}else l+=v(p,g,t[_],t[_+1],r,h)||0;p=t[_++],g=t[_++];break;case c.C:if(n){if(u.containStroke(p,g,t[_++],t[_++],t[_++],t[_++],t[_],t[_+1],e,r,h))return!0}else l+=o(p,g,t[_++],t[_++],t[_++],t[_++],t[_],t[_+1],r,h)||0;p=t[_++],g=t[_++];break;case c.Q:if(n){if(d.containStroke(p,g,t[_++],t[_++],t[_],t[_+1],e,r,h))return!0}else l+=s(p,g,t[_++],t[_++],t[_],t[_+1],r,h)||0;p=t[_++],g=t[_++];break;case c.A:var P=t[_++],b=t[_++],A=t[_++],T=t[_++],R=t[_++],M=t[_++],C=(t[_++],1-t[_++]),O=Math.cos(R)*A+P,S=Math.sin(R)*T+b;_>1?l+=v(p,g,O,S,r,h):(m=O,x=S);var k=(r-P)*T/A+P;if(n){if(f.containStroke(P,b,T,R,R+M,C,e,k,h))return!0}else l+=a(P,b,T,R,R+M,C,k,h);p=Math.cos(R+M)*A+P,g=Math.sin(R+M)*T+b;break;case c.R:m=p=t[_++],x=g=t[_++];var E=t[_++],L=t[_++],O=m+E,S=x+L;if(n){if(y(m,x,O,x,e,r,h)||y(O,x,O,S,e,r,h)||y(O,S,m,S,e,r,h)||y(m,S,O,S,e,r,h))return!0}else l+=v(O,x,O,S,r,h),l+=v(m,S,m,x,r,h);break;case c.Z:if(n){if(y(p,g,m,x,e,r,h))return!0}else if(l+=v(p,g,m,x,r,h),0!==l)return!0;p=m,g=x}}return n||i(g,x)||(l+=v(p,g,m,x,r,h)||0),0!==l}var c=n(26).CMD,l=n(30),u=n(31),d=n(32),f=n(33),p=n(34).normalizeRadian,g=n(27),v=n(35),y=l.containStroke,m=2*Math.PI,x=1e-4,_=[-1,-1,-1],w=[-1,-1];t.exports={contain:function(t,e,n){return h(t,0,!1,e,n)},containStroke:function(t,e,n,i){return h(t,e,!0,n,i)}}},function(t,e){t.exports={containStroke:function(t,e,n,i,r,o,s){if(0===r)return!1;var a=r,h=0,c=t;if(s>e+a&&s>i+a||s<e-a&&s<i-a||o>t+a&&o>n+a||o<t-a&&o<n-a)return!1;if(t===n)return Math.abs(o-t)<=a/2;h=(e-i)/(t-n),c=(t*i-n*e)/(t-n);var l=h*o-s+c,u=l*l/(h*h+1);return u<=a/2*a/2}}},function(t,e,n){var i=n(27);t.exports={containStroke:function(t,e,n,r,o,s,a,h,c,l,u){if(0===c)return!1;var d=c;if(u>e+d&&u>r+d&&u>s+d&&u>h+d||u<e-d&&u<r-d&&u<s-d&&u<h-d||l>t+d&&l>n+d&&l>o+d&&l>a+d||l<t-d&&l<n-d&&l<o-d&&l<a-d)return!1;var f=i.cubicProjectPoint(t,e,n,r,o,s,a,h,l,u,null);return f<=d/2}}},function(t,e,n){var i=n(27);t.exports={containStroke:function(t,e,n,r,o,s,a,h,c){if(0===a)return!1;var l=a;if(c>e+l&&c>r+l&&c>s+l||c<e-l&&c<r-l&&c<s-l||h>t+l&&h>n+l&&h>o+l||h<t-l&&h<n-l&&h<o-l)return!1;var u=i.quadraticProjectPoint(t,e,n,r,o,s,h,c,null);return u<=l/2}}},function(t,e,n){var i=n(34).normalizeRadian,r=2*Math.PI;t.exports={containStroke:function(t,e,n,o,s,a,h,c,l){if(0===h)return!1;var u=h;c-=t,l-=e;var d=Math.sqrt(c*c+l*l);if(d-u>n||d+u<n)return!1;if(Math.abs(o-s)%r<1e-4)return!0;if(a){var f=o;o=i(s),s=i(f)}else o=i(o),s=i(s);o>s&&(s+=r);var p=Math.atan2(l,c);return p<0&&(p+=r),p>=o&&p<=s||p+r>=o&&p+r<=s}}},function(t,e){var n=2*Math.PI;t.exports={normalizeRadian:function(t){return t%=n,t<0&&(t+=n),t}}},function(t,e){t.exports=function(t,e,n,i,r,o){if(o>e&&o>i||o<e&&o<i)return 0;if(i===e)return 0;var s=i<e?1:-1,a=(o-e)/(i-e),h=a*(n-t)+t;return h>r?s:0}},function(t,e,n){function i(t,e){var n,i,o,l,u,d,f=t.data,p=r.M,g=r.C,v=r.L,y=r.R,m=r.A,x=r.Q;for(o=0,l=0;o<f.length;){switch(n=f[o++],l=o,i=0,n){case p:i=1;break;case v:i=1;break;case g:i=3;break;case x:i=2;break;case m:var _=e[4],w=e[5],P=h(e[0]*e[0]+e[1]*e[1]),b=h(e[2]*e[2]+e[3]*e[3]),A=c(-e[1]/b,e[0]/P);f[o++]+=_,f[o++]+=w,f[o++]*=P,f[o++]*=b,f[o++]+=A,f[o++]+=A,o+=2,l=o;break;case y:d[0]=f[o++],d[1]=f[o++],s(d,d,e),f[l++]=d[0],f[l++]=d[1],d[0]+=f[o++],d[1]+=f[o++],s(d,d,e),f[l++]=d[0],f[l++]=d[1]}for(u=0;u<i;u++){var d=a[u];d[0]=f[o++],d[1]=f[o++],s(d,d,e),f[l++]=d[0],f[l++]=d[1]}}}var r=n(26).CMD,o=n(15),s=o.applyTransform,a=[[],[],[]],h=Math.sqrt,c=Math.atan2;t.exports=i},function(t,e,n){var i=n(4),r=n(10),o=n(25),s=function(t){t=t||{},r.call(this,t);for(var e in t)this[e]=t[e];this._children=[],this.__storage=null,this.__dirty=!0};s.prototype={constructor:s,type:"group",children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,i=n.indexOf(e);i>=0&&(n.splice(i,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__storage,n=this.__zr;e&&e!==t.__storage&&(e.addToMap(t),t instanceof s&&t.addChildrenToStorage(e)),n&&n.refresh()},remove:function(t){var e=this.__zr,n=this.__storage,r=this._children,o=i.indexOf(r,t);return o<0?this:(r.splice(o,1),t.parent=null,n&&(n.delFromMap(t.id),t instanceof s&&t.delChildrenFromStorage(n)),e&&e.refresh(),this)},removeAll:function(){var t,e,n=this._children,i=this.__storage;for(e=0;e<n.length;e++)t=n[e],i&&(i.delFromMap(t.id),t instanceof s&&t.delChildrenFromStorage(i)),t.parent=null;return n.length=0,this},eachChild:function(t,e){for(var n=this._children,i=0;i<n.length;i++){var r=n[i];t.call(e,r,i)}return this},traverse:function(t,e){for(var n=0;n<this._children.length;n++){var i=this._children[n];t.call(e,i),"group"===i.type&&i.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToMap(n),n instanceof s&&n.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromMap(n.id),n instanceof s&&n.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,n=new o(0,0,0,0),i=t||this._children,r=[],s=0;s<i.length;s++){var a=i[s];if(!a.ignore&&!a.invisible){var h=a.getBoundingRect(),c=a.getLocalTransform(r);c?(n.copy(h),n.applyTransform(c),e=e||n.clone(),e.union(n)):(e=e||h.clone(),e.union(h))}}return e||n}},i.inherits(s,r),t.exports=s},function(t,e,n){var i=n(8),r=n(25),o=n(4),s=n(39),a=n(40),h=new a(50),c=function(t){i.call(this,t)};c.prototype={constructor:c,type:"image",brush:function(t){var e,n=this.style,i=n.image;if(e="string"==typeof i?this._image:i,!e&&i){var r=h.get(i);if(!r)return e=new Image,e.onload=function(){e.onload=null;for(var t=0;t<r.pending.length;t++)r.pending[t].dirty()},r={image:e,pending:[this]},e.src=i,h.put(i,r),void(this._image=e);if(e=r.image,this._image=e,!e.width||!e.height)return void r.pending.push(this)}if(e){var o=n.width||e.width,a=n.height||e.height,c=n.x||0,l=n.y||0;if(!e.width||!e.height)return;if(t.save(),n.bind(t),this.setTransform(t),n.r&&(t.beginPath(),s.buildPath(t,n),t.clip()),n.sWidth&&n.sHeight){var u=n.sx||0,d=n.sy||0;t.drawImage(e,u,d,n.sWidth,n.sHeight,c,l,o,a)}else if(n.sx&&n.sy){var u=n.sx,d=n.sy,f=o-u,p=a-d;t.drawImage(e,u,d,f,p,c,l,o,a)}else t.drawImage(e,c,l,o,a);null==n.width&&(n.width=o),null==n.height&&(n.height=a),null!=n.text&&this.drawRectText(t,this.getBoundingRect()),t.restore()}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new r(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},o.inherits(c,i),t.exports=c},function(t,e){t.exports={buildPath:function(t,e){var n,i,r,o,s=e.x,a=e.y,h=e.width,c=e.height,l=e.r;h<0&&(s+=h,h=-h),c<0&&(a+=c,c=-c),"number"==typeof l?n=i=r=o=l:l instanceof Array?1===l.length?n=i=r=o=l[0]:2===l.length?(n=r=l[0],i=o=l[1]):3===l.length?(n=l[0],i=o=l[1],r=l[2]):(n=l[0],i=l[1],r=l[2],o=l[3]):n=i=r=o=0;var u;n+i>h&&(u=n+i,n*=h/u,i*=h/u),r+o>h&&(u=r+o,r*=h/u,o*=h/u),i+r>c&&(u=i+r,i*=c/u,r*=c/u),n+o>c&&(u=n+o,n*=c/u,o*=c/u),t.moveTo(s+n,a),t.lineTo(s+h-i,a),0!==i&&t.quadraticCurveTo(s+h,a,s+h,a+i),t.lineTo(s+h,a+c-r),0!==r&&t.quadraticCurveTo(s+h,a+c,s+h-r,a+c),t.lineTo(s+o,a+c),0!==o&&t.quadraticCurveTo(s,a+c,s,a+c-o),t.lineTo(s,a+n),0!==n&&t.quadraticCurveTo(s,a,s+n,a)}}},function(t,e){var n=function(){this.head=null,this.tail=null,this._len=0},i=n.prototype;i.insert=function(t){var e=new r(t);return this.insertEntry(e),e},i.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,this.tail=t):this.head=this.tail=t,this._len++},i.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},i.len=function(){return this._len};var r=function(t){this.value=t,this.next,this.prev},o=function(t){this._list=new n,this._map={},this._maxSize=t||10},s=o.prototype;s.put=function(t,e){var n=this._list,i=this._map;if(null==i[t]){var r=n.len();if(r>=this._maxSize&&r>0){var o=n.head;n.remove(o),delete i[o.key]}var s=n.insert(e);s.key=t,i[t]=s}},s.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},s.clear=function(){this._list.clear(),this._map={}},t.exports=o},function(t,e,n){var i=n(8),r=n(4),o=n(24),s=function(t){i.call(this,t)};s.prototype={constructor:s,type:"text",brush:function(t){var e=this.style,n=e.x||0,i=e.y||0,r=e.text,s=e.fill,a=e.stroke;if(null!=r&&(r+=""),r){if(t.save(),this.style.bind(t),this.setTransform(t),s&&(t.fillStyle=s),a&&(t.strokeStyle=a),t.font=e.textFont||e.font,t.textAlign=e.textAlign,e.textVerticalAlign){var h=o.getBoundingRect(r,t.font,e.textAlign,"top");switch(t.textBaseline="top",e.textVerticalAlign){case"middle":i-=h.height/2;break;case"bottom":i-=h.height}}else t.textBaseline=e.textBaseline;for(var c=o.measureText("",t.font).width,l=r.split("\n"),u=0;u<l.length;u++)s&&t.fillText(l[u],n,i),a&&t.strokeText(l[u],n,i),i+=c;t.restore()}},getBoundingRect:function(){if(!this._rect){var t=this.style,e=o.getBoundingRect(t.text+"",t.textFont||t.font,t.textAlign,t.textBaseline);e.x+=t.x||0,e.y+=t.y||0,this._rect=e}return this._rect}},r.inherits(s,i),t.exports=s},function(t,e,n){"use strict";t.exports=n(7).extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e){t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}})},function(t,e,n){t.exports=n(7).extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r0||0,0),o=Math.max(e.r,0),s=e.startAngle,a=e.endAngle,h=e.clockwise,c=Math.cos(s),l=Math.sin(s);t.moveTo(c*r+n,l*r+i),t.lineTo(c*o+n,l*o+i),t.arc(n,i,o,s,a,!h),t.lineTo(Math.cos(a)*r+n,Math.sin(a)*r+i),0!==r&&t.arc(n,i,r,a,s,h),t.closePath()}})},function(t,e,n){t.exports=n(7).extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=2*Math.PI;t.moveTo(n+e.r,i),t.arc(n,i,e.r,0,r,!1),t.moveTo(n+e.r0,i),t.arc(n,i,e.r0,0,r,!0)}})},function(t,e,n){var i=n(46);t.exports=n(7).extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){i.buildPath(t,e,!0)}})},function(t,e,n){var i=n(47),r=n(48);t.exports={buildPath:function(t,e,n){var o=e.points,s=e.smooth;if(o&&o.length>=2){if(s&&"spline"!==s){var a=r(o,s,n,e.smoothConstraint);t.moveTo(o[0][0],o[0][1]);for(var h=o.length,c=0;c<(n?h:h-1);c++){var l=a[2*c],u=a[2*c+1],d=o[(c+1)%h];t.bezierCurveTo(l[0],l[1],u[0],u[1],d[0],d[1])}}else{"spline"===s&&(o=i(o,n)),t.moveTo(o[0][0],o[0][1]);for(var c=1,f=o.length;c<f;c++)t.lineTo(o[c][0],o[c][1])}n&&t.closePath()}}}},function(t,e,n){function i(t,e,n,i,r,o,s){var a=.5*(n-t),h=.5*(i-e);return(2*(e-n)+a+h)*s+(-3*(e-n)-2*a-h)*o+a*r+e}var r=n(15);t.exports=function(t,e){for(var n=t.length,o=[],s=0,a=1;a<n;a++)s+=r.distance(t[a-1],t[a]);var h=s/2;h=h<n?n:h;for(var a=0;a<h;a++){var c,l,u,d=a/(h-1)*(e?n:n-1),f=Math.floor(d),p=d-f,g=t[f%n];e?(c=t[(f-1+n)%n],l=t[(f+1)%n],u=t[(f+2)%n]):(c=t[0===f?f:f-1],l=t[f>n-2?n-1:f+1],u=t[f>n-3?n-1:f+2]);var v=p*p,y=p*v;o.push([i(c[0],g[0],l[0],u[0],p,v,y),i(c[1],g[1],l[1],u[1],p,v,y)])}return o}},function(t,e,n){var i=n(15),r=i.min,o=i.max,s=i.scale,a=i.distance,h=i.add;t.exports=function(t,e,n,c){var l,u,d,f,p=[],g=[],v=[],y=[];if(c){d=[1/0,1/0],f=[-(1/0),-(1/0)];for(var m=0,x=t.length;m<x;m++)r(d,d,t[m]),o(f,f,t[m]);r(d,d,c[0]),o(f,f,c[1])}for(var m=0,x=t.length;m<x;m++){var _=t[m];if(n)l=t[m?m-1:x-1],u=t[(m+1)%x];else{if(0===m||m===x-1){p.push(i.clone(t[m]));continue}l=t[m-1],u=t[m+1]}i.sub(g,u,l),s(g,g,e);var w=a(_,l),P=a(_,u),b=w+P;0!==b&&(w/=b,P/=b),s(v,g,-w),s(y,g,P);var A=h([],_,v),T=h([],_,y);c&&(o(A,A,d),r(A,A,f),o(T,T,d),r(T,T,f)),p.push(A),p.push(T)}return n&&p.push(p.shift()),p}},function(t,e,n){var i=n(46);t.exports=n(7).extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){i.buildPath(t,e,!1)}})},function(t,e,n){var i=n(39);t.exports=n(7).extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,r=e.y,o=e.width,s=e.height;e.r?i.buildPath(t,e):t.rect(n,r,o,s),t.closePath()}})},function(t,e,n){t.exports=n(7).extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,i=e.y1,r=e.x2,o=e.y2,s=e.percent;0!==s&&(t.moveTo(n,i),s<1&&(r=n*(1-s)+r*s,o=i*(1-s)+o*s),t.lineTo(r,o))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}})},function(t,e,n){"use strict";var i=n(27),r=i.quadraticSubdivide,o=i.cubicSubdivide,s=i.quadraticAt,a=i.cubicAt,h=[];t.exports=n(7).extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,i=e.y1,s=e.x2,a=e.y2,c=e.cpx1,l=e.cpy1,u=e.cpx2,d=e.cpy2,f=e.percent;0!==f&&(t.moveTo(n,i),null==u||null==d?(f<1&&(r(n,c,s,f,h),c=h[1],s=h[2],r(i,l,a,f,h),l=h[1],a=h[2]),t.quadraticCurveTo(c,l,s,a)):(f<1&&(o(n,c,u,s,f,h),c=h[1],u=h[2],s=h[3],o(i,l,d,a,f,h),l=h[1],d=h[2],a=h[3]),t.bezierCurveTo(c,l,u,d,s,a)))},pointAt:function(t){var e=this.shape,n=e.cpx2,i=e.cpy2;return null===n||null===i?[s(e.x1,e.cpx1,e.x2,t),s(e.y1,e.cpy1,e.y2,t)]:[a(e.x1,e.cpx1,e.cpx1,e.x2,t),a(e.y1,e.cpy1,e.cpy1,e.y2,t)]}})},function(t,e,n){t.exports=n(7).extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r,0),o=e.startAngle,s=e.endAngle,a=e.clockwise,h=Math.cos(o),c=Math.sin(o);t.moveTo(h*r+n,c*r+i),t.arc(n,i,r,o,s,!a)}})},function(t,e,n){"use strict";var i=n(4),r=n(5),o=function(t,e,n,i,o){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==n?1:n,this.y2=null==i?0:i,r.call(this,o)};o.prototype={constructor:o,type:"linear",updateCanvasGradient:function(t,e){for(var n=t.getBoundingRect(),i=this.x*n.width+n.x,r=this.x2*n.width+n.x,o=this.y*n.height+n.y,s=this.y2*n.height+n.y,a=e.createLinearGradient(i,o,r,s),h=this.colorStops,c=0;c<h.length;c++)a.addColorStop(h[c].offset,h[c].color);this.canvasGradient=a}},i.inherits(o,r),t.exports=o},function(t,e,n){"use strict";var i=n(4),r=n(5),o=function(t,e,n,i){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==n?.5:n,r.call(this,i)};o.prototype={constructor:o,type:"radial",updateCanvasGradient:function(t,e){for(var n=t.getBoundingRect(),i=n.width,r=n.height,o=Math.min(i,r),s=this.x*i+n.x,a=this.y*r+n.y,h=this.r*o,c=e.createRadialGradient(s,a,0,s,a,h),l=this.colorStops,u=0;u<l.length;u++)c.addColorStop(l[u].offset,l[u].color);this.canvasGradient=c}},i.inherits(o,r),t.exports=o},function(t,e,n){function i(t,e,n,i,o,s){this.bigCanvas=t,this.eagleEyeNode=i,this.distance=o,this.imgSrc=s,this.ratio,this.groupRatio,this.group=n,this.img=document.createElement("img"),this.selection=document.createElement("div"),this.groupPosition=r.clone(e),this.selectPosition=[0,0],this.render()}var r=n(4);n(25);i.prototype.render=function(){var t=this;t.ratio=.12;var e=t.group.width*t.ratio,n=t.group.height*t.ratio;t.eagleEyeNode.style.width=e+"px",t.eagleEyeNode.style.height=n+"px",t.eagleEyeNode.style.marginTop=-n+"px",t.eagleEyeNode.style.marginLeft=t.bigCanvas.getWidth()-e+"px",t.eagleEyeNode.style.position="relative",t.eagleEyeNode.style.background="url("+t.imgSrc+") no-repeat",t.eagleEyeNode.style.backgroundSize=e/(t.group.width*t.distance[2]/t.bigCanvas.getWidth())+"px",t.backgroundSize=r.clone(t.eagleEyeNode.style.backgroundSize),t.eagleEyeNode.innerHTML="",t.selection.style.border="1px solid #ff0000",t.selection.style.width=t.bigCanvas.getWidth()/t.group.width*e+"px",t.selection.style.height=t.bigCanvas.getHeight()/t.group.height*n+"px",t.selectWidth=t.selection.style.width,t.selectHeight=t.selection.style.height,t.selection.style.position="absolute",t.selection.style.top="0px",t.selection.style.left="0px",t.eagleEyeNode.appendChild(this.selection)},i.prototype.updataSelection=function(t,e,n,i){var o=this;o.zoomScale=n,this.selection.style.width=this.selection.style.width.replace("px","")/n+"px",this.selection.style.height=this.selection.style.height.replace("px","")/n+"px";this.eagleEyeNode.style.width.replace("px","")/o.group.width;o.selectPosition[0]=r.clone(t)*o.ratio/i,o.selectPosition[1]=r.clone(e)*o.ratio/i,this.selection.style.left=-o.selectPosition[0]+"px",this.selection.style.top=-o.selectPosition[1]+"px"},i.prototype.updataMap=function(t,e){var n=this;n.eagleEyeNode.style.backgroundImage="url("+t+")";var i=e.width*n.ratio,r=e.height*n.ratio;n.eagleEyeNode.style.width=i+"px",n.eagleEyeNode.style.height=r+"px",n.eagleEyeNode.style.marginTop=-r+"px",n.eagleEyeNode.style.marginLeft=n.bigCanvas.getWidth()-i+"px"},i.prototype.updataSelectionPosition=function(t,e){var n=this;n.selectPosition[0]=r.clone(t[0])*n.ratio/e,n.selectPosition[1]=r.clone(t[1])*n.ratio/e,this.selection.style.left=-n.selectPosition[0]+"px",this.selection.style.top=-n.selectPosition[1]+"px"},t.exports=i},function(t,e,n){function i(t,e){function n(){}var i=t.prototype;n.prototype=e.prototype,t.prototype=new n;for(var r in i)t.prototype[r]=i[r];t.prototype.constructor=t,t.superClass=e}function r(){for(var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),i=0,r=0;r<36;r++)8==r||13==r||18==r||23==r?n[r]="-":14==r?n[r]="4":(i<=2&&(i=33554432+16777216*Math.random()|0),t=15&i,i>>=4,n[r]=e[19==r?3&t|8:t]);return"sid-"+n.join("")}function o(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function s(t){for(var e=o(t[0],t[1]),n=[t[0],t[1]],i=1;i<t.length-1;i++)e<o(t[i],t[i+1])&&(e=o(t[i],t[i+1]),n=[t[i],t[i+1]]);return n}function a(t){for(var e=0,n=0;n<t.length-1;n++)e+=o(t[n],t[n+1]);return e}function h(t){if(0==t.lenght)return NaN;for(var e=t[0],n=0;n<t.length;n++)e<t[n]&&(e=t[n]);return e}function c(t){if(0==t.lenght)return NaN;for(var e=t[0],n=0;n<t.length;n++)e>t[n]&&(e=t[n]);return e}function l(t){if(t.length<=1)return!0;for(var e=0;e<t.length-1;e++)if(t[e].x!=t[e+1].x&&t[e].y!=t[e+1].y)return!1;return!0}function u(t,e){if(t.startPoint.x==t.endPoint.x&&e.startPoint.x==e.endPoint.x)return t.startPoint.x==e.startPoint.x&&(t.contains(e.startPoint.x,e.startPoint.y)||t.contains(e.endPoint.x,e.endPoint.y));if(t.startPoint.x==t.endPoint.x||e.startPoint.x==e.endPoint.x){if(t.startPoint.x==t.endPoint.x){var n=t;t=e,e=n}var i=(t.endPoint.y-t.startPoint.y)/(t.endPoint.x-t.startPoint.x),r=t.startPoint.y-i*t.startPoint.x,o=e.startPoint.x,s=i*o+r;return t.contains(o,s)&&e.contains(o,s)}var a=(t.endPoint.y-t.startPoint.y)/(t.endPoint.x-t.startPoint.x),h=t.startPoint.y-a*t.startPoint.x,c=(e.endPoint.y-e.startPoint.y)/(e.endPoint.x-e.startPoint.x),l=e.startPoint.y-c*e.startPoint.x;return a==c?h==l&&(t.contains(e.startPoint.x,e.startPoint.y)||t.contains(e.endPoint.x,e.endPoint.y)):(o=(l-h)/(a-c),s=a*o+h,t.contains(o,s)&&e.contains(o,s))}function d(t,e,n){var i=[];i.push(new L(new E(e[0],e[1]),new E(e[2],e[1]))),i.push(new L(new E(e[2],e[1]),new E(e[2],e[3]))),i.push(new L(new E(e[2],e[3]),new E(e[0],e[3]))),i.push(new L(new E(e[0],e[3]),new E(e[0],e[1])));for(var r=0;r<t.length-1;r++)for(var o=new L(t[r],t[r+1]),s=0;s<i.length;s++)if(u(o,i[s]))return!0;if(n)for(var o=new L(t[t.length-1],t[0]),s=0;s<i.length;s++)if(u(o,i[s]))return!0;return!1}function f(t){if(t.length<=2)return-1;for(var e=0,n=1;n<t.length-1;n++)if(t[n-1].x==t[n].x&&t[n].x==t[n+1].x){if(p(t[n+1].y-t[n].y)!=p(t[n].y-t[n-1].y))return-1;e++}else if(t[n-1].y==t[n].y&&t[n].y==t[n+1].y){if(p(t[n+1].x-t[n].x)!=p(t[n].x-t[n-1].x))return-1;e++}else e--;return e}function p(t){return t>0?1:t<0?-1:0}function g(t){if(t.length<=2)return!0;for(var e=0;e<t.length-2;e++)if(t[e].x==t[e+1].x&&t[e+1].x==t[e+2].x){if(0!=p(t[e+1].y-t[e].y)&&p(t[e+1].y-t[e].y)==-1*p(t[e+2].y-t[e+1].y))return!1}else if(t[e].y==t[e+1].y&&t[e+1].y==t[e+2].y&&0!=p(t[e+1].x-t[e].x)&&p(t[e+1].x-t[e].x)==-1*p(t[e+2].x-t[e+1].x))return!1;return!0}function v(t,e){var n=[];if(e){for(var i=0;i<t.length;i++){var r=t[i];n.push(new E(r[0],r[1]))}return n}for(var i=0;i<t.length;i++){var r=t[i];n.push([r.x,r.y])}return n}function y(t){var e=[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]];return e}function m(t,e){return[[1,0,t],[0,1,e],[0,0,1]]}function x(t,e){return null==e&&(e=t),[[t,0,0],[0,e,0],[0,0,1]]}function _(t,e,n){var i=t.clone();return i.transform(m(-t.x,-t.y)),i.y-=e,i.transform(y(n)),i.transform(m(t.x,t.y)),i}function w(t){return{left:new E(t.x,t.y+t.height/2),top:new E(t.x+t.width/2,t.y),right:new E(t.x+t.width,t.y+t.height/2),bottom:new E(t.x+t.width/2,t.y+t.height),center:new E(t.x+t.width/2,t.y+t.height/2)}}function P(t){return[[10*Math.round(t.getRect().width/3/10),0],[10*Math.round(2*t.getRect().width/3/10),0],[t.getRect().width,10*Math.round(t.getRect().height/3/10)],[t.getRect().width,10*Math.round(2*t.getRect().height/3/10)],[10*Math.round(t.getRect().width/3/10),t.getRect().height],[10*Math.round(2*t.getRect().width/3/10),t.getRect().height],[0,10*Math.round(t.getRect().height/3/10)],[0,10*Math.round(2*t.getRect().height/3/10)]]}function b(t,e){return-Math.PI/2-Math.atan2(e.y-t.y,e.x-t.x)}function A(t,e,n,i){var r=t.x*e.y+t.y*n.x+e.x*n.y-(e.y*n.x+t.y*e.x+t.x*n.y);return i?Math.abs(r)<=i:0===r}function T(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function R(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function M(t,e,n){t.x=T(t.x,5),t.y=T(t.y,5),e.x=T(e.x,5),e.y=T(e.y,5);var i=Math.atan((e.x-t.x)/(e.y-t.y));for(i=-i,e.x>=t.x&&e.y>=t.y?i+=Math.PI:e.x<=t.x&&e.y>=t.y?i+=Math.PI:e.x<=t.x&&e.y<=t.y&&(i+=2*Math.PI);i>=2*Math.PI;)i-=2*Math.PI;return isNaN(i)&&(i=0),n&&(i=Math.round(i/n)*n),i}function C(t){var e=t.getBoundingRect(),n=[];n[0]=[-e.width/2,-e.height/2],n[1]=[e.width/2,-e.height/2],n[2]=[e.width/2,e.height/2],n[3]=[-e.width/2,e.height/2],n[4]=[-e.width/2,-e.height/2];var i,r,o;return t instanceof N.Circle?(i=new I(t.position[0]-e.width/2,t.position[1]-e.height/2,e.width,e.height),r=t.position[0],o=t.position[1]):(i=new I(t.position[0],t.position[1],e.width,e.height),r=t.position[0]+e.width/2,o=t.position[1]+e.height/2),{x:r,y:o,width:e.width,height:e.height,points:n,boundingRect:i}}function O(){for(var t,e=["0","2","3","4","5","6","7","8","9","a","b","c","d"],n="#",i=0;i<6;i++)t=Math.round(15*Math.random()),n+=e[t];return n}function S(t){return void 0===t}function k(t,e,n){!e&&n&&(e=n),e=e||{},e=D.defaults(e,z,!0);var i=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,function(e,n,i,s,a){return o+=t.slice(r,a).replace(q,H),r=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj",o)}catch(a){throw a.source=o,a}var h=function(t){return s.call(this,t)},c=e.variable||"obj";return h.source="function("+c+"){\n"+o+"}",h}var E=n(58),L=n(59),N=n(3),I=n(25),D=n(4),B={createNew:function(){var t=[];return{add:function(t,e){var n=this.get(t);n.push(e)},get:function(e){for(var n=0;n<t.length;n++)if(e==t[n].key)return t[n].value;var i=[];return t.push({key:e,value:i}),i},keys:function(){for(var e=[],n=0;n<t.length;n++)e.push(t[n].key);return e},top:function(){return t[t.length-1]},remove:function(e){for(var n=-1,i=0;i<t.length;i++)if(e==t[i].key){n=i;break}return t.splice(n,1)[0]},removeTop:function(){return t.splice(t.length-1,1)[0]},length:function(){return t.length}}}},z={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},F=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,H=function(t){return"\\"+G[t]};t.exports={inherits:i,getUUID:r,distance:o,getPolylineLength:a,max:h,min:c,orthogonalPath:l,polylineIntersectsRectangle:d,scorePath:f,forwardPath:g,traslatePoints:v,getEndPoint:_,getConnectorPoints:w,tangentRotation:b,collinearity:A,translationMatrix:m,scaleMatrix:x,round:T,getLength:R,getAngle:M,getRect:C,StackedMap:B,getMaxLineLength:s,randomColor:O,template:k,isUndefined:S,getSoltPoints:P}},function(t,e){function n(t,e){this.x=t,this.y=e}n.load=function(t){var e=new n(Number(t.x),Number(t.y));return e},n.loadArray=function(t){for(var e=[],i=0;i<t.length;i++)e.push(n.load(t[i]));return e},n.cloneArray=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].clone());return e},n.prototype={constructor:n,transform:function(t){var e=this.x,n=this.y;this.x=t[0][0]*e+t[0][1]*n+t[0][2],this.y=t[1][0]*e+t[1][1]*n+t[1][2]},equals:function(t){return t instanceof n&&(this.x==t.x&&this.y==t.y)},clone:function(){var t=new n(this.x,this.y);return t},near:function(t,e,n){var i=Math.sqrt(Math.pow(this.x-t,2)+Math.pow(this.y-e,2));return i<=n},contains:function(t,e){return this.x==t&&this.y==e},toString:function(){return"["+this.x+","+this.y+"]"},getPoints:function(){return[this]}},t.exports=n},function(t,e){function n(t,e){this.startPoint=t,this.endPoint=e,this.oType="Line"}n.load=function(t){var e=new n(Point.load(t.startPoint),Point.load(t.endPoint));return e},n.prototype={contructor:n,clone:function(){var t=new n(this.startPoint.clone(),this.endPoint.clone());return t},equals:function(t){return!(!t instanceof n)&&(this.startPoint.equals(t.startPoint)&&this.endPoint.equals(t.endPoint))},contains:function(t,e){if(Math.min(this.startPoint.x,this.endPoint.x)<=t&&t<=Math.max(this.startPoint.x,this.endPoint.x)&&Math.min(this.startPoint.y,this.endPoint.y)<=e&&e<=Math.max(this.startPoint.y,this.endPoint.y)){if(this.startPoint.x==this.endPoint.x)return t==this.startPoint.x;var n=(this.endPoint.y-this.startPoint.y)/(this.endPoint.x-this.startPoint.x),i=this.startPoint.y-n*this.startPoint.x;return e==n*t+i}return!1},near:function(t,e,n){if(this.endPoint.x===this.startPoint.x)return(this.startPoint.y-n<=e&&this.endPoint.y+n>=e||this.endPoint.y-n<=e&&this.startPoint.y+n>=e)&&t>this.startPoint.x-n&&t<this.startPoint.x+n;if(this.startPoint.y===this.endPoint.y)return(this.startPoint.x-n<=t&&this.endPoint.x+n>=t||this.endPoint.x-n<=t&&this.startPoint.x+n>=t)&&e>this.startPoint.y-n&&e<this.startPoint.y+n;var i=Math.min(this.endPoint.x,this.startPoint.x),r=Math.min(this.endPoint.y,this.startPoint.y),o=Math.max(this.endPoint.x,this.startPoint.x),s=Math.max(this.endPoint.y,this.startPoint.y),a=this.endPoint.y-this.startPoint.y,h=this.startPoint.x-this.endPoint.x,c=-(this.startPoint.x*this.endPoint.y-this.endPoint.x*this.startPoint.y),l=Math.abs((a*t+h*e+c)/Math.sqrt(Math.pow(a,2)+Math.pow(h,2))),u=(h*(h*t-a*e)-a*c)/(Math.pow(a,2)+Math.pow(h,2)),d=(a*(-h*t+a*e)-h*c)/(Math.pow(a,2)+Math.pow(h,2)),f=l<=n&&o>=u&&u>=i&&s>=d&&d>=r||this.startPoint.near(t,e,n)||this.endPoint.near(t,e,n);return f},getPoints:function(){var t=[];return t.push(this.startPoint),t.push(this.endPoint),t},getPoint:function(t){var e=t*(this.endPoint.x-this.startPoint.x)+this.startPoint.x,n=t*(this.endPoint.y-this.startPoint.y)+this.startPoint.y;return new Point(e,n)},toString:function(){return"line("+this.startPoint+","+this.endPoint+")"}},t.exports=n},function(t,e,n){"use strict";function i(t){r.each(o,function(e){this[e]=r.bind(t[e],t)},this)}var r=n(4),o=["getDom","getZr","getWidth","getHeight","dispatchAction","on","off","trigger","getDataURL","getConnectedDataURL","getModel","getOption"];t.exports=i},function(t,e,n){function i(t){delete u[t]}var r=n(11),o=n(62),s=n(63),a=n(67),h=n(68),c=!o.canvasSupported,l={canvas:n(69)},u={},d={};d.version="3.0.4",d.init=function(t,e){var n=new f(r(),t,e);return u[n.id]=n,n},d.dispose=function(t){if(t)t.dispose();else{for(var e in u)u[e].dispose();u={}}return d},d.getInstance=function(t){return u[t]},d.registerPainter=function(t,e){l[t]=e};var f=function(t,e,n){n=n||{},this.dom=e,this.id=t;var i=this,r=new a,u=n.renderer;if(c){if(!l.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");u="vml"}else u&&l[u]||(u="canvas");var d=new l[u](e,r,n);this.storage=r,this.painter=d,o.node||(this.handler=new s(d.getViewportRoot(),r,d)),this.animation=new h({stage:{update:function(){i._needsRefresh&&i.refreshImmediately();
}}}),this.animation.start(),this._needsRefresh;var f=r.delFromMap,p=r.addToMap;r.delFromMap=function(t){var e=r.get(t);f.call(r,t),e&&e.removeSelfFromZr(i)},r.addToMap=function(t){p.call(r,t),t.addSelfToZr(i)}};f.prototype={constructor:f,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer(t,e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},resize:function(){this.painter.resize(),this.handler&&this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},toDataURL:function(t,e,n){return this.painter.toDataURL(t,e,n)},pathToImage:function(t,e,n){var i=r();return this.painter.pathToImage(i,t,e,n)},setDefaultCursorStyle:function(t){this.handler.setDefaultCursorStyle(t)},on:function(t,e,n){this.handler&&this.handler.on(t,e,n)},off:function(t,e){this.handler&&this.handler.off(t,e)},trigger:function(t,e){this.handler&&this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler&&this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,i(this.id)}},t.exports=d},function(t,e){function n(t){var e={},n={},i=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),r=t.match(/(Android);?[\s\/]+([\d.]+)?/),o=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),a=!o&&t.match(/(iPhone\sOS)\s([\d_]+)/),h=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=h&&t.match(/TouchPad/),l=t.match(/Kindle\/([\d.]+)/),u=t.match(/Silk\/([\d._]+)/),d=t.match(/(BlackBerry).*Version\/([\d.]+)/),f=t.match(/(BB10).*Version\/([\d.]+)/),p=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),g=t.match(/PlayBook/),v=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),y=t.match(/Firefox\/([\d.]+)/),m=i&&t.match(/Mobile\//)&&!v,x=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!v,_=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),w=t.match(/Edge\/([\d.]+)/);return(n.webkit=!!i)&&(n.version=i[1]),r&&(e.android=!0,e.version=r[2]),a&&!s&&(e.ios=e.iphone=!0,e.version=a[2].replace(/_/g,".")),o&&(e.ios=e.ipad=!0,e.version=o[2].replace(/_/g,".")),s&&(e.ios=e.ipod=!0,e.version=s[3]?s[3].replace(/_/g,"."):null),h&&(e.webos=!0,e.version=h[2]),c&&(e.touchpad=!0),d&&(e.blackberry=!0,e.version=d[2]),f&&(e.bb10=!0,e.version=f[2]),p&&(e.rimtabletos=!0,e.version=p[2]),g&&(n.playbook=!0),l&&(e.kindle=!0,e.version=l[1]),u&&(n.silk=!0,n.version=u[1]),!u&&e.android&&t.match(/Kindle Fire/)&&(n.silk=!0),v&&(n.chrome=!0,n.version=v[1]),y&&(n.firefox=!0,n.version=y[1]),_&&(n.ie=!0,n.version=_[1]),m&&(t.match(/Safari/)||e.ios)&&(n.safari=!0),x&&(n.webview=!0),_&&(n.ie=!0,n.version=_[1]),w&&(n.edge=!0,n.version=w[1]),e.tablet=!!(o||g||r&&!t.match(/Mobile/)||y&&t.match(/Tablet/)||_&&!t.match(/Phone/)&&t.match(/Touch/)),e.phone=!(e.tablet||e.ipod||!(r||a||h||d||f||v&&t.match(/Android/)||v&&t.match(/CriOS\/([\d.]+)/)||y&&t.match(/Mobile/)||_&&t.match(/Touch/))),{browser:n,os:e,node:!1,canvasSupported:!!document.createElement("canvas").getContext,touchEventsSupported:"ontouchstart"in window&&!n.ie&&!n.edge,pointerEventsSupported:"onpointerdown"in window&&(n.edge||n.ie&&n.version>=10)}}var i={};i="undefined"==typeof navigator?{browser:{},os:{},node:!0,canvasSupported:!0}:n(navigator.userAgent),t.exports=i},function(t,e,n){"use strict";function i(t,e,n){return{type:t,event:n,target:e,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta}}function r(t,e,n){var i=t._gestureMgr;"start"===n&&i.clear();var r=i.recognize(e,t.findHover(e.zrX,e.zrY,null));if("end"===n&&i.clear(),r){var o=r.type;e.gestureEvent=o,t._dispatchProxy(r.target,o,r.event)}}function o(t){function e(t,e){return function(){if(!e._touching)return t.apply(e,arguments)}}for(var n=m.concat(x),i=0;i<n.length;i++){var r=n[i];t._handlers[r]=f.bind(A[r],t)}for(var i=0;i<y.length;i++){var r=y[i];t._handlers[r]=e(A[r],t)}}function s(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var i=t.parent;i;){if(i.clipPath&&!i.clipPath.contain(e,n))return!1;i=i.parent}return!0}return!1}function a(t){t._touching=!0,clearTimeout(t._touchTimer),t._touchTimer=setTimeout(function(){t._touching=!1},700)}function h(){return!1}function c(){return u.touchEventsSupported}function l(t){return"mousewheel"===t&&u.browser.firefox?"DOMMouseScroll":t}var u=n(62),d=n(64),f=n(4),p=n(65),g=n(66),v=n(12),y=["click","dblclick","mousewheel","mouseout"];!h()&&y.push("mouseup","mousedown","mousemove");var m=["touchstart","touchend","touchmove"],x=["pointerdown","pointerup","pointermove"],_=300,w=d.addEventListener,P=d.removeEventListener,b=d.normalizeEvent,A={mousemove:function(t){t=b(this.root,t);var e=t.zrX,n=t.zrY,i=this.findHover(e,n,null),r=this._hovered;this._hovered=i,this.root.style.cursor=i?i.cursor:this._defaultCursorStyle,r&&i!==r&&r.__zr&&this._dispatchProxy(r,"mouseout",t),this._dispatchProxy(i,"mousemove",t),i&&i!==r&&this._dispatchProxy(i,"mouseover",t)},mouseout:function(t){t=b(this.root,t);var e=t.toElement||t.relatedTarget;if(e!=this.root)for(;e&&9!=e.nodeType;){if(e===this.root)return;e=e.parentNode}this._dispatchProxy(this._hovered,"mouseout",t),this.trigger("globalout",{event:t})},touchstart:function(t){t=b(this.root,t),this._lastTouchMoment=new Date,r(this,t,"start"),A.mousemove.call(this,t),A.mousedown.call(this,t),a(this)},touchmove:function(t){t=b(this.root,t),r(this,t,"change"),A.mousemove.call(this,t),a(this)},touchend:function(t){t=b(this.root,t),r(this,t,"end"),A.mouseup.call(this,t),+new Date-this._lastTouchMoment<_&&A.click.call(this,t),a(this)}};f.each(["click","mousedown","mouseup","mousewheel","dblclick"],function(t){A[t]=function(e){e=b(this.root,e);var n=this.findHover(e.zrX,e.zrY,null);this._dispatchProxy(n,t,e)}});var T=function(t,e,n){function i(e,n){f.each(e,function(e){w(t,l(e),n._handlers[e])},n)}v.call(this),this.root=t,this.storage=e,this.painter=n,this._hovered,this._lastTouchMoment,this._lastX,this._lastY,this._defaultCursorStyle="default",this._gestureMgr=new g,this._handlers=[],this._touching=!1,this._touchTimer,o(this),h()?i(x,this):c()&&i(m,this),i(y,this),p.call(this)};T.prototype={constructor:T,resize:function(t){this._hovered=null},dispatch:function(t,e){var n=this._handlers[t];n&&n.call(this,e)},dispose:function(){for(var t=this.root,e=y.concat(m),n=0;n<e.length;n++){var i=e[n];P(t,l(i),this._handlers[i])}this.root=this.storage=this.painter=null},setDefaultCursorStyle:function(t){this._defaultCursorStyle=t},_dispatchProxy:function(t,e,n){for(var r="on"+e,o=i(e,t,n),s=t;s&&(s[r]&&(o.cancelBubble=s[r].call(s,o)),s.trigger(e,o),s=s.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(e,o),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[r]&&t[r].call(t,o),t.trigger&&t.trigger(e,o)}))},findHover:function(t,e,n){for(var i=this.storage.getDisplayList(),r=i.length-1;r>=0;r--)if(!i[r].silent&&i[r]!==n&&!i[r].ignore&&s(i[r],t,e))return i[r]}},f.mixin(T,v),f.mixin(T,p),t.exports=T},function(t,e,n){"use strict";function i(t){return t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0}}function r(t,e){if(e=e||window.event,null!=e.zrX)return e;var n=e.type,r=n&&n.indexOf("touch")>=0;if(r){var o="touchend"!=n?e.targetTouches[0]:e.changedTouches[0];if(o){var s=i(t);e.zrX=o.clientX-s.left,e.zrY=o.clientY-s.top}}else{var a=i(t);e.zrX=e.clientX-a.left,e.zrY=e.clientY-a.top,e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}return e}function o(t,e,n){h?t.addEventListener(e,n):t.attachEvent("on"+e,n)}function s(t,e,n){h?t.removeEventListener(e,n):t.detachEvent("on"+e,n)}var a=n(12),h="undefined"!=typeof window&&!!window.addEventListener,c=h?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};t.exports={normalizeEvent:r,addEventListener:o,removeEventListener:s,stop:c,Dispatcher:a}},function(t,e){function n(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}n.prototype={constructor:n,_dragStart:function(t){var e=t.target;e&&e.draggable&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this._dispatchProxy(e,"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,i=t.offsetY,r=n-this._x,o=i-this._y;this._x=n,this._y=i,e.drift(r,o,t),this._dispatchProxy(e,"drag",t.event);var s=this.findHover(n,i,e),a=this._dropTarget;this._dropTarget=s,e!==s&&(a&&s!==a&&this._dispatchProxy(a,"dragleave",t.event),s&&s!==a&&this._dispatchProxy(s,"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this._dispatchProxy(e,"dragend",t.event),this._dropTarget&&this._dispatchProxy(this._dropTarget,"drop",t.event),this._draggingTarget=null,this._dropTarget=null}},t.exports=n},function(t,e){"use strict";function n(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}function i(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var r=function(){this._track=[]};r.prototype={constructor:r,recognize:function(t,e){return this._doTrack(t,e),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e){var n=t.touches;if(n){for(var i={points:[],touches:[],target:e,event:t},r=0,o=n.length;r<o;r++){var s=n[r];i.points.push([s.clientX,s.clientY]),i.touches.push(s)}this._track.push(i)}},_recognize:function(t){for(var e in o)if(o.hasOwnProperty(e)){var n=o[e](this._track,t);if(n)return n}}};var o={pinch:function(t,e){var r=t.length;if(r){var o=(t[r-1]||{}).points,s=(t[r-2]||{}).points||o;if(s&&s.length>1&&o&&o.length>1){var a=n(o)/n(s);!isFinite(a)&&(a=1),e.pinchScale=a;var h=i(o);return e.pinchX=h[0],e.pinchY=h[1],{type:"pinch",target:t[0].target,event:e}}}}};t.exports=r},function(t,e,n){"use strict";function i(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2===e.z2?t.__renderidx-e.__renderidx:t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var r=n(4),o=n(37),s=function(){this._elements={},this._roots=[],this._displayList=[],this._displayListLen=0};s.prototype={constructor:s,getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,r=0,o=e.length;r<o;r++)this._updateAndAddDisplayable(e[r],null,t);n.length=this._displayListLen;for(var r=0,o=n.length;r<o;r++)n[r].__renderidx=r;n.sort(i)},_updateAndAddDisplayable:function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.clipPath;if(i&&(i.parent=t,i.updateTransform(),e?(e=e.slice(),e.push(i)):e=[i]),"group"==t.type){for(var r=t._children,o=0;o<r.length;o++){var s=r[o];s.__dirty=t.__dirty||s.__dirty,this._updateAndAddDisplayable(s,e,n)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){this._elements[t.id]||(t instanceof o&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof o&&n.delChildrenFromStorage(this)}return this._elements={},this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array)for(var e=0,i=t.length;e<i;e++)this.delRoot(t[e]);else{var s;s="string"==typeof t?this._elements[t]:t;var a=r.indexOf(this._roots,s);a>=0&&(this.delFromMap(s.id),this._roots.splice(a,1),s instanceof o&&s.delChildrenFromStorage(this))}},addToMap:function(t){return t instanceof o&&(t.__storage=this),t.dirty(),this._elements[t.id]=t,this},get:function(t){return this._elements[t]},delFromMap:function(t){var e=this._elements,n=e[t];return n&&(delete e[t],n instanceof o&&(n.__storage=null)),this},dispose:function(){this._elements=this._renderList=this._roots=null}},t.exports=s},function(t,e,n){"use strict";var i=n(4),r=n(64).Dispatcher,o="undefined"!=typeof window&&(window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)},s=n(17),a=function(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time=0,r.call(this)};a.prototype={constructor:a,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),n=0;n<e.length;n++)this.addClip(e[n])},removeClip:function(t){var e=i.indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),n=0;n<e.length;n++)this.removeClip(e[n]);t.animation=null},_update:function(){for(var t=(new Date).getTime(),e=t-this._time,n=this._clips,i=n.length,r=[],o=[],s=0;s<i;s++){var a=n[s],h=a.step(t);h&&(r.push(h),o.push(a))}for(var s=0;s<i;)n[s]._needsRemove?(n[s]=n[i-1],n.pop(),i--):s++;i=r.length;for(var s=0;s<i;s++)o[s].fire(r[s]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},start:function(){function t(){e._running&&(o(t),e._update())}var e=this;this._running=!0,this._time=(new Date).getTime(),o(t)},stop:function(){this._running=!1},clear:function(){this._clips=[]},animate:function(t,e){e=e||{};var n=new s(t,e.loop,e.getter,e.setter);return n}},i.mixin(a,r),t.exports=a},function(t,e,n){"use strict";function i(t){return parseInt(t,10)}function r(t){return!!t&&(!!t.isBuildin||"function"==typeof t.resize&&"function"==typeof t.refresh)}function o(t){t.__unusedCount++}function s(t){t.__dirty=!1,1==t.__unusedCount&&t.clear()}function a(t,e,n){return g.copy(t.getBoundingRect()),t.transform&&g.applyTransform(t.transform),v.width=e,v.height=n,!g.intersect(v)}function h(t,e){if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0}function c(t,e){for(var n=0;n<t.length;n++){var i,r=t[n];r.transform&&(i=r.transform,e.transform(i[0],i[1],i[2],i[3],i[4],i[5]));var o=r.path;o.beginPath(e),r.buildPath(o,r.shape),e.clip(),r.transform&&(i=r.invTransform,e.transform(i[0],i[1],i[2],i[3],i[4],i[5]))}}var l=n(22),u=n(4),d=n(21),f=n(25),p=n(70),g=new f(0,0,0,0),v=new f(0,0,0,0),y=function(t,e,n){var i=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();n=n||{},this.dpr=n.devicePixelRatio||l.devicePixelRatio,this._singleCanvas=i,this.root=t;var r=t.style;if(r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]="none",r["user-select"]="none",r["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e,i){var o=t.width,s=t.height;this._width=o,this._height=s;var a=new p(t,this,1);a.initContext(),this._layers={0:a},this._zlevelList=[0]}else{var o=this._getWidth(),s=this._getHeight();this._width=o,this._height=s;var h=document.createElement("div");this._domRoot=h;var c=h.style;c.position="relative",c.overflow="hidden",c.width=this._width+"px",c.height=this._height+"px",t.appendChild(h),this._layers={},this._zlevelList=[]}this._layerConfig={},this.pathToImage=this._createPathToImage()};y.prototype={constructor:y,isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._singleCanvas?this._layers[0].dom:this._domRoot},refresh:function(t){var e=this.storage.getDisplayList(!0),n=this._zlevelList;this._paintList(e,t);for(var i=0;i<n.length;i++){var r=n[i],o=this._layers[r];!o.isBuildin&&o.refresh&&o.refresh()}return this},_paintList:function(t,e){null==e&&(e=!1),this._updateLayerStatus(t);var n,i,r,l=this._width,u=this._height;this.eachBuildinLayer(o);for(var f=null,p=0,g=t.length;p<g;p++){var v=t[p],y=this._singleCanvas?0:v.zlevel;if(i!==y&&(i=y,n=this.getLayer(i),n.isBuildin||d("ZLevel "+i+" has been used by unkown layer "+n.id),r=n.ctx,n.__unusedCount=0,(n.__dirty||e)&&n.clear()),(n.__dirty||e)&&!v.invisible&&0!==v.style.opacity&&v.scale[0]&&v.scale[1]&&(!v.culling||!a(v,l,u))){var m=v.__clipPaths;h(m,f)&&(f&&r.restore(),m&&(r.save(),c(m,r)),f=m),v.beforeBrush&&v.beforeBrush(r),v.brush(r,!1),v.afterBrush&&v.afterBrush(r)}v.__dirty=!1}f&&r.restore(),this.eachBuildinLayer(s)},getLayer:function(t){if(this._singleCanvas)return this._layers[0];var e=this._layers[t];return e||(e=new p("zr_"+t,this,this.dpr),e.isBuildin=!0,this._layerConfig[t]&&u.merge(e,this._layerConfig[t],!0),this.insertLayer(t,e),e.initContext()),e},insertLayer:function(t,e){var n=this._layers,i=this._zlevelList,o=i.length,s=null,a=-1,h=this._domRoot;if(n[t])return void d("ZLevel "+t+" has been used already");if(!r(e))return void d("Layer of zlevel "+t+" is not valid");if(o>0&&t>i[0]){for(a=0;a<o-1&&!(i[a]<t&&i[a+1]>t);a++);s=n[i[a]]}if(i.splice(a+1,0,t),s){var c=s.dom;c.nextSibling?h.insertBefore(e.dom,c.nextSibling):h.appendChild(e.dom)}else h.firstChild?h.insertBefore(e.dom,h.firstChild):h.appendChild(e.dom);n[t]=e},eachLayer:function(t,e){var n,i,r=this._zlevelList;for(i=0;i<r.length;i++)n=r[i],t.call(e,this._layers[n],n)},eachBuildinLayer:function(t,e){var n,i,r,o=this._zlevelList;for(r=0;r<o.length;r++)i=o[r],n=this._layers[i],n.isBuildin&&t.call(e,n,i)},eachOtherLayer:function(t,e){var n,i,r,o=this._zlevelList;for(r=0;r<o.length;r++)i=o[r],n=this._layers[i],n.isBuildin||t.call(e,n,i)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){var e=this._layers,n={};this.eachBuildinLayer(function(t,e){n[e]=t.elCount,t.elCount=0});for(var i=0,r=t.length;i<r;i++){var o=t[i],s=this._singleCanvas?0:o.zlevel,a=e[s];if(a){if(a.elCount++,a.__dirty)continue;a.__dirty=o.__dirty}}this.eachBuildinLayer(function(t,e){n[e]!==t.elCount&&(t.__dirty=!0)})},clear:function(){return this.eachBuildinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},configLayer:function(t,e){if(e){var n=this._layerConfig;n[t]?u.merge(n[t],e,!0):n[t]=e;var i=this._layers[t];i&&u.merge(i,n[t],!0)}},delLayer:function(t){var e=this._layers,n=this._zlevelList,i=e[t];i&&(i.dom.parentNode.removeChild(i.dom),delete e[t],n.splice(u.indexOf(n,t),1))},resize:function(t,e){var n=this._domRoot;if(n.style.display="none",t=t||this._getWidth(),e=e||this._getHeight(),n.style.display="",this._width!=t||e!=this._height){n.style.width=t+"px",n.style.height=e+"px";for(var i in this._layers)this._layers[i].resize(t,e);this.refresh(!0)}return this._width=t,this._height=e,this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas)return this._layers[0].dom;var e=new p("image",this,t.pixelRatio||this.dpr);e.initContext();var n=e.ctx;e.clearColor=t.backgroundColor,e.clear();for(var i=this.storage.getDisplayList(!0),r=0;r<i.length;r++){var o=i[r];o.invisible||(o.beforeBrush&&o.beforeBrush(n),o.brush(n,!1),o.afterBrush&&o.afterBrush(n))}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getWidth:function(){var t=this.root,e=document.defaultView.getComputedStyle(t);return(t.clientWidth||i(e.width)||i(t.style.width))-(i(e.paddingLeft)||0)-(i(e.paddingRight)||0)|0},_getHeight:function(){var t=this.root,e=document.defaultView.getComputedStyle(t);return(t.clientHeight||i(e.height)||i(t.style.height))-(i(e.paddingTop)||0)-(i(e.paddingBottom)||0)|0},_pathToImage:function(t,e,i,r,o){var s=document.createElement("canvas"),a=s.getContext("2d");s.width=i*o,s.height=r*o,a.clearRect(0,0,i*o,r*o);var h={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(a);var c=n(38),l=new c({id:t,style:{x:0,y:0,image:s}});return null!=h.position&&(l.position=e.position=h.position),null!=h.rotation&&(l.rotation=e.rotation=h.rotation),null!=h.scale&&(l.scale=e.scale=h.scale),l},_createPathToImage:function(){var t=this;return function(e,n,i,r){return t._pathToImage(e,n,i,r,t.dpr)}}},t.exports=y},function(t,e,n){function i(){return!1}function r(t,e,n,i){var r=document.createElement(e),o=n.getWidth(),s=n.getHeight(),a=r.style;return a.position="absolute",a.left=0,a.top=0,a.width=o+"px",a.height=s+"px",r.width=o*i,r.height=s*i,r.setAttribute("data-zr-dom-id",t),r}var o=n(4),s=n(22),a=function(t,e,n){var a;n=n||s.devicePixelRatio,"string"==typeof t?a=r(t,"canvas",e,n):o.isObject(t)&&(a=t,t=a.id),this.id=t,this.dom=a;var h=a.style;h&&(a.onselectstart=i,h["-webkit-user-select"]="none",h["user-select"]="none",h["-webkit-touch-callout"]="none",h["-webkit-tap-highlight-color"]="rgba(0,0,0,0)"),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n};a.prototype={constructor:a,elCount:0,__dirty:!0,initContext:function(){this.ctx=this.dom.getContext("2d");var t=this.dpr;1!=t&&this.ctx.scale(t,t)},createBackBuffer:function(){var t=this.dpr;this.domBack=r("back-"+this.id,"canvas",this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!=t&&this.ctxBack.scale(t,t)},resize:function(t,e){var n=this.dpr,i=this.dom,r=i.style,o=this.domBack;r.width=t+"px",r.height=e+"px",i.width=t*n,i.height=e*n,1!=n&&this.ctx.scale(n,n),o&&(o.width=t*n,o.height=e*n,1!=n&&this.ctxBack.scale(n,n))},clear:function(t){var e=this.dom,n=this.ctx,i=e.width,r=e.height,o=this.clearColor,s=this.motionBlur&&!t,a=this.lastFrameAlpha,h=this.dpr;if(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,i/h,r/h)),n.clearRect(0,0,i/h,r/h),o&&(n.save(),n.fillStyle=this.clearColor,n.fillRect(0,0,i/h,r/h),n.restore()),s){var c=this.domBack;n.save(),n.globalAlpha=a,n.drawImage(c,0,0,i/h,r/h),n.restore()}}},t.exports=a},function(t,e,n){function i(t,e){r.call(this,t,e),this.bpmnInfo={type:-1,name:"GroupNode"},this.model=t;var n={shape:{width:0,height:0,r:7},style:{fill:"#f9f9f9",stroke:"#bbbbbb"},position:[0,0]};this.options=o.extend(n,t),this.max=[1024,960],this.render(this.options)}var r=n(72),o=n(4),s=(n(25),n(3)),a=n(57),h=n(73);i.prototype.render=function(t){var e=new s.Rect({shape:t.shape,style:t.style});e.name="Rect",this.add(e),this.position=t.position,this.mergedImage=t.mergedImage},i.prototype.fromJSON=function(t){},i.prototype.rectContain=function(t,e){var n=a.getRect(this);return n.boundingRect.contain(t,e)},i.prototype.reDraw=function(t,e,n){var i=this.options.shape.r;this.setProperties({shape:{width:i,height:i,r:i}});for(var r=this.childOfName("Rect"),s=this.getBoundingRect().width,a=this.getBoundingRect().height,c=r.shape.x,l=r.shape.y,u=this._children[1].position[0],d=this._children[1].position[1],f=this._children[1].position[0],p=this._children[1].position[1],n=o.clone(t.position),g=1;g<this._children.length;g++)this._children[g]instanceof h||1==this._children[g].isIcon||(u>this._children[g].position[0]&&(u=this._children[g].position[0]),f<this._children[g].position[0]&&(f=this._children[g].position[0]));for(var v=1;v<this._children.length;v++)this._children[v]instanceof h||1==this._children[v].isIcon||(d>this._children[v].position[1]&&(d=this._children[v].position[1]),p<this._children[v].position[1]&&(p=this._children[v].position[1]));if(s>this.max[0]?(s=this.max[0]-2,t.position[0]>u?n[0]=u+this.max[0]-t.width:n[0]=f-this.max[0]+t.width):(c=this.childOfName("Rect").position[0]+t.position[0],c>u&&(c=u),n[0]=t.movePosition[0]+t.moveX,t.position[0]>u?n[0]>u+this.max[0]-t.width&&(n[0]=u+this.max[0]-t.width):n[0]<f-this.max[0]+t.width&&(n[0]=f-this.max[0]+t.width)),a>this.max[1]?(a=this.max[1]-2,t.position[1]>d?n[1]=d+this.max[1]-t.height:n[1]=p-this.max[1]+t.height):(l=this.childOfName("Rect").position[1]+t.position[1],l>d&&(l=d),n[1]=t.movePosition[1]+t.moveY,t.position[1]>d?n[1]>d+this.max[1]-t.height&&(n[1]=d+this.max[1]-t.height):n[1]<p-this.max[1]+t.height&&(n[1]=p-this.max[1]+t.height)),e.attr("position",n),e.alarm){var y=[n[0]+e.getBoundingRect().width-(e.alarm.getBoundingRect().width-6),n[1]-e.alarm.getBoundingRect().height-3];e.alarm.attr("position",y)}this.setProperties({shape:{width:s,height:a,x:c,y:l}})},i.prototype.setProperties=function(t){var e=this.childOfName("Rect");e.setShape(t.shape),e.attr("style",t.style),this.attr("position",t.position)},i.prototype.merged=function(t){var e=this;if(this.mergedImage){var n=o.clone(this.position),i=this.relationImage.getBoundingRect().width,r=this.relationImage.getBoundingRect().height,s=[this.position[0]+this.childOfName("Rect").shape.x+(this.getBoundingRect().width/2-i/2),this.position[1]+this.childOfName("Rect").shape.y+(this.getBoundingRect().height/2-r/2)],a=o.clone(s);return this.relationImage.attr("style",{image:this.mergedImage,width:i,height:r}),this.relationImage.attr("position",s),this.hide(),this.relationImage.show(),this.relationImage.on("dblclick",function(){e.setProperties({position:[n[0]+(this.position[0]-a[0]),n[1]+(this.position[1]-a[1])]}),this.hide(),e.show()}),this.relationImage}},o.inherits(i,r),t.exports=i},function(t,e,n){function i(){this.resourceId=o.getUUID(),r.Group.call(this)}var r=n(3),o=n(57);i.prototype.render=function(){},i.prototype.getRect=function(t){},i.prototype.drawText=function(t,e){var n=this.bpmnInfo.name;null!=t&&(n=t);var i=new r.Text({style:{text:n,color:e?e:this.options.text.color,textFont:"12px Microsoft YaHei"},zlevel:20}),o=this.getRect().x-this.position[0]-i.getBoundingRect().width/2,s=this.getRect().y-this.position[1]+this.getBoundingRect().height/2+i.getBoundingRect().height+6;return i.attr("style",{x:o,y:s}),{text:i,rect:i.getBoundingRect()}},i.prototype.refreshText=function(){var t=this.childOfName("Title"),e=this.getRect().x-this.position[0]-t.getBoundingRect().width/2,n=this.getRect().y-this.position[1]+this.getBoundingRect().height/2+t.getBoundingRect().height+6;t.attr("style",{x:e,y:n})},i.prototype.toJSON=function(){},r.Util.inherits(i,r.Group),t.exports=i},function(t,e,n){function i(t){a.call(this),this.resourceId=r.getUUID();var e={symbol:{type:"arrow",size:10,color:"#000000"},style:{lineWidth:1,stroke:"#000000",lineType:i.TYPE_STRAIGHT},hoverStyle:{lineWidth:2,stroke:"lime"},arrowHoverStyle:{fill:"lime"},shape:{points:null,smooth:!1,smoothConstraint:null},position:[0,0],isEdit:!0,text:{text:"",color:"#000000",textFont:"12px Microsoft YaHei"}},n=t||{};this.options=o.merge(e,n,!0),this.model=t.model,this.handles=[],this.connectionPoints=[],this.conPointsGroup=null,this.startNode=null,this.endNode=null,this.icons=[],this.render()}var r=n(57),o=n(4),s=n(3),a=n(72),h=n(74),c=n(75),l=n(76);i.TYPE_STRAIGHT="straight",i.TYPE_JAGGED="jagged",i.TYPE_ROUND="round",i.RADIUS=3,i.START_NODE="startNode",i.END_NODE="endNode",i.LEFT="left",i.RIGHT="right",i.TOP="top",i.BOTTOM="bottom",i.BOTTOM="bottom",i.SEPERATOR="-",i.prototype.refresh=function(t){t&&(this.turningPoints=t);var t=r.traslatePoints(this.turningPoints);this.line.attr("shape",{points:t});var e=this.childOfName("toSymbol");e&&(e.attr("position",t[t.length-1]),e.attr("rotation",r.tangentRotation(this.turningPoints[this.turningPoints.length-2],this.turningPoints[this.turningPoints.length-1])));var n=this.childOfName("lineText");if(!n&&this.options.text.text){var o=this.drawText("lineText",this.options.text.text,0,0);this.add(o.text),n=this.childOfName("lineText")}if(n){n.setStyle("text",this.options.text.text);var s=this.middle(this.options.text);if(this.options.style.lineType==i.TYPE_STRAIGHT){var t=r.getMaxLineLength(this.turningPoints),a=-Math.atan2(t[1].y-s[1],t[1].x-s[0]);n.attr("rotation",a)}n.attr("position",s)}},i.prototype.render=function(){var t=this;this.line=new s.Polyline({position:this.options.position,shape:this.options.shape,style:this.options.style,z:0}),this.add(this.line);var e=["dblclick","click"];o.each(e,function(e){t.line.on(e,function(n){var i={};i.event=n,i.type="Connector:"+e,i.target=t,t.trigger(i.type,i),0!=t.options.isEdit&&(t.options.isEdit&&t.connectionPoints.length<1&&t.turningPoints.length>=2&&t.createAllconnectionPoint(),t.handles.length<1&&t.shapeSetHandle())})}),this.options.isEdit&&(this.conPointsGroup=new s.Group,this.add(this.conPointsGroup));var n=this.createSymbol("toSymbol",this.options.symbol.type,this.options.symbol.size,this.options.symbol.color);if(n&&this.add(n),this.options.hoverStyle){var i=this.line;s.setElementHoverStl(i,this.options.hoverStyle),n&&s.setElementHoverStl(n,this.options.arrowHoverStyle),i.on("mouseover",function(){s.doEnterHover(i),n&&s.doEnterHover(n)}).on("mouseout",function(){s.doLeaveHover(i),n&&s.doLeaveHover(n)})}if(this.options.text.text&&""!=this.options.text.text){var r=this.drawText("lineText",this.options.text.text,0,0);this.add(r.text)}},i.prototype.createAllconnectionPoint=function(){var t=this.startNode.getRect?this.startNode.getRect().boundingRect:r.getRect(this.startNode).boundingRect,e=this.endNode.getRect?this.endNode.getRect().boundingRect:r.getRect(this.endNode).boundingRect,n=r.getConnectorPoints(t),o=r.getConnectorPoints(e);this.connectionPointCreate(this.startNode,n.left,i.START_NODE+i.SEPERATOR+i.LEFT),this.connectionPointCreate(this.startNode,n.right,i.START_NODE+i.SEPERATOR+i.RIGHT),this.connectionPointCreate(this.startNode,n.top,i.START_NODE+i.SEPERATOR+i.TOP),this.connectionPointCreate(this.startNode,n.bottom,i.START_NODE+i.SEPERATOR+i.BOTTOM),this.connectionPointCreate(this.endNode,o.left,i.END_NODE+i.SEPERATOR+i.LEFT),this.connectionPointCreate(this.endNode,o.right,i.END_NODE+i.SEPERATOR+i.RIGHT),this.connectionPointCreate(this.endNode,o.top,i.END_NODE+i.SEPERATOR+i.TOP),this.connectionPointCreate(this.endNode,o.bottom,i.END_NODE+i.SEPERATOR+i.BOTTOM),this.connectionPointCreate(this,this.turningPoints[0].clone(),l.TYPE_CONNECTOR),this.connectionPointCreate(this,this.turningPoints[this.turningPoints.length-1].clone(),l.TYPE_CONNECTOR)},i.prototype.connectionPointCreate=function(t,e,n){var i=new l(this,e,n);this.conPointsGroup.add(i.shape)},i.prototype.clearHandles=function(){for(var t=0;t<this.handles.length;t++)this.remove(this.handles[t].handleShape);this.handles=[],this.conPointsGroup&&this.conPointsGroup.removeAll()},i.prototype.shapeSetHandle=function(){for(var t=1;t<this.turningPoints.length-2;t++){var e,n,i,o=r.collinearity(this.turningPoints[t-1],this.turningPoints[t],this.turningPoints[t+1]),s=r.collinearity(this.turningPoints[t],this.turningPoints[t+1],this.turningPoints[t+2]);(o||s&&!this.turningPoints[t+1].equals(this.turningPoints[t+2]))&&(o&&!this.turningPoints[t-1].equals(this.turningPoints[t])||s)||(this.turningPoints[t].x===this.turningPoints[t+1].x?(n=this.turningPoints[t].x,i=(this.turningPoints[t].y+this.turningPoints[t+1].y)/2,e=new c("h",n,i,this)):this.turningPoints[t].y===this.turningPoints[t+1].y&&(n=(this.turningPoints[t].x+this.turningPoints[t+1].x)/2,i=this.turningPoints[t].y,e=new c("v",n,i,this)),e&&(this.add(e.handleShape),this.handles.push(e)))}},i.prototype.createSymbol=function(t,e,n,i){if("none"!==e){o.isArray(n)||(n=[n,n]);var r=h.createSymbol(e,-n[0]/2,-n[1]/2,n[0],n[1],i);return r.name=t,r}},i.prototype.drawText=function(t,e,n,i,r){var o=new s.Text({style:{text:e,x:n,y:i,fill:r?r:this.options.text.color,textFont:this.options.text.textFont},zlevel:20});return o.name=t,{text:o,rect:o.getBoundingRect()}},i.prototype.middle=function(t){if(this.options.style.lineType==i.TYPE_STRAIGHT){var e=r.getMaxLineLength(this.turningPoints);if(t){var n=s.textContain.getWidth(t.text,t.textFont),o=r.getAngle(e[0],e[1]),a=r.distance(e[0],e[1])/2-n/2,h=r.getEndPoint(e[0],a,o);return[h.x,h.y]}var c=(e[0].x+e[1].x)/2,l=(e[0].y+e[1].y)/2;return[c,l]}if(this.options.style.lineType==i.TYPE_JAGGED){for(var u=0,d=0;d<this.turningPoints.length-1;d++)u+=r.getLength(this.turningPoints[d],this.turningPoints[d+1]);for(var f=-1,p=0,d=0;d<this.turningPoints.length-1;d++){f=d;var g=r.getLength(this.turningPoints[d],this.turningPoints[d+1]);if(!(p+g<u/2))break;p+=g}if(f!=-1){
var v=u/2-p;if(r.round(this.turningPoints[f].x,3)==r.round(this.turningPoints[f+1].x,3))return[this.turningPoints[f].x,Math.min(this.turningPoints[f].y,this.turningPoints[f+1].y)+v];if(r.round(this.turningPoints[f].y,3)==r.round(this.turningPoints[f+1].y,3))return[Math.min(this.turningPoints[f].x,this.turningPoints[f+1].x)+v,this.turningPoints[f].y];console.error("Connector:middle() - this should never happen "+this.turningPoints[f]+" "+this.turningPoints[f+1]+" nr of points "+this.turningPoints.length)}}return null},i.prototype.toJSON=function(){return this.model.set("resourceId",this.resourceId),this.model.set("properties.type",14),this.model.set("bounds.upperLeft.x",this.position[0]),this.model.set("bounds.upperLeft.y",this.position[1]),this.model.set("bounds.lowerRight.x",this.position[0]+this.getBoundingRect().width),this.model.set("bounds.lowerRight.y",this.position[1]+this.getBoundingRect().height),this.model.set("style.sPos",this.sPos),this.model.set("style.ePos",this.ePos),this.model.set("dockers",this.turningPoints),this.model.option},i.prototype.refreshModel=function(){this.model.set("options.dockers",this.turningPoints)},r.inherits(i,a),t.exports=i},function(t,e,n){"use strict";var i=n(3),r=n(25),o=i.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,o=e.height/2;t.moveTo(n,i-o),t.lineTo(n+r,i+o),t.lineTo(n-r,i+o),t.closePath()}}),s=i.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,o=e.height/2;t.moveTo(n,i-o),t.lineTo(n+r,i),t.lineTo(n,i+o),t.lineTo(n-r,i),t.closePath()}}),a=i.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,i=e.y,r=e.width/5*3,o=Math.max(r,e.height),s=r/2,a=s*s/(o-s),h=i-o+s+a,c=Math.asin(a/s),l=Math.cos(c)*s,u=Math.sin(c),d=Math.cos(c);t.arc(n,h,s,Math.PI-c,2*Math.PI+c);var f=.6*s,p=.7*s;t.bezierCurveTo(n+l-u*f,h+a+d*f,n,i-p,n,i),t.bezierCurveTo(n,i-p,n-l+u*f,h+a+d*f,n-l,h+a),t.closePath()}}),h=i.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,i=e.width,r=e.x,o=e.y,s=i/3*2;t.moveTo(r,o),t.lineTo(r+s,o+n),t.lineTo(r,o+n/4*3),t.lineTo(r-s,o+n),t.lineTo(r,o),t.closePath()}}),c={line:i.Line,rect:i.Rect,roundRect:i.Rect,square:i.Rect,circle:i.Circle,diamond:s,pin:a,arrow:h,triangle:o},l={line:function(t,e,n,i,r){r.x1=t,r.y1=e+i/2,r.x2=t+n,r.y2=e+i/2},rect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i},roundRect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i,r.r=Math.min(n,i)/4},square:function(t,e,n,i,r){var o=Math.min(n,i);r.x=t,r.y=e,r.width=o,r.height=o},circle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.r=Math.min(n,i)/2},diamond:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i},pin:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},arrow:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},triangle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i}},u={};for(var d in c)u[d]=new c[d];var f=i.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var t=this.style,e=this.shape;"pin"===e.symbolType&&"inside"===t.textPosition&&(t.textPosition=["50%","40%"],t.textAlign="center",t.textVerticalAlign="middle")},buildPath:function(t,e){var n=e.symbolType,i=u[n];"none"!==e.symbolType&&(i||(n="rect",i=u[n]),l[n](e.x,e.y,e.width,e.height,i.shape),i.buildPath(t,i.shape))}}),p=function(t){if("image"!==this.type){var e=this.style,n=this.shape;n&&"line"===n.symbolType?e.stroke=t:this.__isEmptyBrush?(e.stroke=t,e.fill="#fff"):(e.fill&&(e.fill=t),e.stroke&&(e.stroke=t)),this.dirty()}},g={createSymbol:function(t,e,n,o,s,a){var h=0===t.indexOf("empty");h&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var c;return c=0===t.indexOf("image://")?new i.Image({style:{image:t.slice(8),x:e,y:n,width:o,height:s}}):0===t.indexOf("path://")?i.makePath(t.slice(7),{},new r(e,n,o,s)):new f({shape:{symbolType:t,x:e,y:n,width:o,height:s}}),c.__isEmptyBrush=h,c.setColor=p,c.setColor(a),c}};t.exports=g},function(t,e,n){function i(t,e,n,o){this.type=t,this.x=e,this.y=n,this.visible=!0,this.connector=o,this.handleShape=new r.Circle({shape:{cx:e,cy:n,r:i.RADIUS},style:{fill:"rgb(0,255,0)",stroke:"rgb(0,0,0)"},z:2,draggable:!0});var s=this;this.handleShape.on("drag",function(t){s.actionConnector(t.offsetX,t.offsetY)})}var r=n(3),o=n(57);i.RADIUS=4,i.prototype={constructor:i,equals:function(t){return!(!t instanceof i)&&(this.type==t.type&&this.x==t.x&&this.y==t.y&&this.visible==t.visible)},actionConnector:function(t,e){switch(this.type){case"v":for(var n,i=1;i<this.connector.turningPoints.length-1;i++)this.connector.turningPoints[i-1].y==this.connector.turningPoints[i].y&&this.connector.turningPoints[i].y==this.y&&Math.min(this.connector.turningPoints[i].x,this.connector.turningPoints[i-1].x)<=this.x&&Math.max(this.connector.turningPoints[i].x,this.connector.turningPoints[i-1].x)>=this.x&&(n=i);var r=e-this.y,s=o.translationMatrix(0,r);this.connector.turningPoints[n-1].transform(s),this.connector.turningPoints[n].transform(s),this.connector.refresh(),this.y=e;break;case"h":for(var n,i=1;i<this.connector.turningPoints.length-1;i++)this.connector.turningPoints[i-1].x==this.connector.turningPoints[i].x&&this.connector.turningPoints[i].x==this.x&&Math.min(this.connector.turningPoints[i].y,this.connector.turningPoints[i-1].y)<=this.y&&Math.max(this.connector.turningPoints[i].y,this.connector.turningPoints[i-1].y)>=this.y&&(n=i);var a=t-this.x,s=o.translationMatrix(a,0);this.connector.turningPoints[n-1].transform(s),this.connector.turningPoints[n].transform(s),this.connector.refresh(),this.x=t}}},t.exports=i},function(t,e,n){function i(t,e,n){this.connector=t,this.point=e.clone(),this.type=n,this.color=i.NORMAL_COLOR,this.oType="ConnectionPoint",this.shape=new r.Circle({shape:{cx:this.point.x,cy:this.point.y,r:i.RADIUS},style:{fill:this.color,stroke:"#000000"},z:2}),this.shape.type=this.type,this.shape.connector=t}var r=n(3);n(57);i.NORMAL_COLOR="#FFFF33",i.OVER_COLOR="#FF9900",i.CONNECTED_COLOR="#ff0000",i.RADIUS=4,i.TYPE_FIGURE="figure",i.TYPE_CONNECTOR="connector",i.prototype={constructor:i,equals:function(t){return this.point.equals(t.point)&&this.connector==t.connector&&this.type==t.type&&this.color==t.color&&this.radius==t.radius}},t.exports=i},function(t,e,n){function i(t,e){r.call(this),this.render(t,e)}var r=n(72),o=n(4),s=n(3);i.ARROW_DRAGEND="OperationNode:dragendArrow",i.ARROW_DRAG="OperationNode:dragArrow",i.ARROW_DRAGSTART="OperationNode:dragstartArrow",i.DELETE_CLICK="OperationNode:deleteClick",i.prototype.render=function(t,e,n){this.renderBase(t,e,n),this.renderOther(t,e,n)},i.prototype.renderBase=function(t,e,n){var i=this,n=n;if(n)this.virtualRect.setShape({points:n.points}),0==t.linkShow?this.arrow.hide():(this.arrow.show(),this.arrow.attr("position",[n.width/2+10,n.height/2-10])),0==t.deleteShow?this.deletePath.hide():(this.deletePath.show(),0==t.linkShow?this.deletePath.attr("position",[n.width/2+10,n.height/2-10]):this.deletePath.attr("position",[n.width/2+30,n.height/2-10]));else{this.virtualRect=new s.Polyline({style:{lineDash:[2]}});var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAYUExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFY3HCoAAAAIdFJOUwA9/ueGIbZtux4kfgAAADxJREFUCNdjYEAFIglgKjxJyQHMcFJSEgAzWJSUICoYldQgDGERdYiAIYMrRECAASbAgF+AFSbAEIBmPwClqQTPsA3FRgAAAABJRU5ErkJggg==";this.arrow=new s.Image({style:{image:r,cursor:"default"},draggable:!0,z:19});var a=["dragstart","drag","dragend"];o.each(a,function(t){i.arrow.on(t,function(e){var n={};n.event=e,n.type="OperationNode:"+t+"Arrow",i.trigger(n.type,n)})});var h={x:0,y:0,width:10,height:15},c="M73.641,45.957l-0.021,0.252c0,0.032,0.021,0.06,0.021,0.088c0,0.065-0.022,0.126-0.026,0.191l-2.685,54.878H70.91c-0.231,4.304-5.166,10.81-31.748,10.81c-26.58,0-31.509-6.506-31.746-10.81H7.41L4.731,46.488c-0.009-0.06-0.028-0.126-0.028-0.191c0-0.032,0.01-0.06,0.01-0.088l-0.01-0.252h0.028c0.099-0.466,0.364-0.919,0.784-1.353c3.439,3.477,17.191,4.051,33.646,4.051s30.221-0.574,33.642-4.051c0.426,0.434,0.711,0.887,0.784,1.353H73.641z M78.335,25.102v6.407c0,1.316-1.34,2.567-3.715,3.696c-6.266,2.936-19.777,4.975-35.459,4.975c-15.666,0-29.189-2.039-35.442-4.975C1.33,34.075,0,32.825,0,31.509v-6.407c0-3.374,8.681-6.286,21.359-7.724V3.929c0-2.16,1.768-3.929,3.93-3.929h26.314c2.164,0,3.938,1.773,3.938,3.938v13.296C68.98,18.606,78.333,21.611,78.335,25.102z M48.416,11.395c0-2.348-0.321-4.27-0.715-4.27c-0.393,0-2.641,0-4.979,0h-8.545c-2.352,0-4.592,0-4.989,0c-0.388,0-0.714,1.922-0.714,4.27v5.367l1.083-0.065c3.067-0.173,6.286-0.27,9.595-0.271c3.202,0,6.292,0.098,9.264,0.252V11.395z";this.deletePath=s.makePath(c,{style:{fill:"#000000"}},h),this.deletePath.on("click",function(t){var e={};e.event=t,e.type="OperationNode:deleteClick",i.trigger(e.type,e)}),this.add(this.deletePath),this.add(this.virtualRect),this.add(this.arrow)}},i.prototype.renderOther=function(t,e,n){if(n){t.parent&&t.parent.isBg&&1==t.parent.isBg?this.attr("position",[n.x,n.y]):this.attr("position",[n.x+t.parent.position[0],n.y+t.parent.position[1]])}},o.inherits(i,r),t.exports=i},function(t,e,n){var i=n(4),r=n(79),o=n(73),s=n(57),a=(n(3),n(58)),h=n(81),c=n(82),l=(n(80),{LineOperations:[],bundleOffset:30,bundleGap:20,connectorMap:s.StackedMap.createNew(),connectorCreate:function(t,e,n,r){var s=this,l=n.model,u=new o(n);if(u.startNode=t,u.endNode=e,n.pos){var d=n.pos.split(",");u.sPos=d[0],u.ePos=d[1]}this.connectors.push(u);var f=this.getTwoNodeId(t,e);this.connectorMap.add(f,u),u.conPointsGroup&&u.conPointsGroup.on("click",function(t){var e=t.target.type.split(o.SEPERATOR),n=t.target.connector;e[0]===o.START_NODE?n.sPos=e[1]:e[0]===o.END_NODE&&(n.ePos=e[1]),s.refreshConnector(n,!0);var i={};i.event=t,i.type="conPointsGroup:click",i.lineNode=s.selConnector,r.trigger(i.type,i)});var p=["click"];i.each(p,function(t){u.on("Connector:"+t,function(e){var n=e.target;s.selConnector!==n&&(s.selConnector&&s.refreshConnector(s.selConnector),s.selConnector=n);var i={};i.event=e,i.type=t,i.target=s.selConnector,r.trigger(i.type,i)})}),u.line.on("dblclick",function(t){var e=this.parent,n=e.startNode,i=e.endNode,r=s.getTwoNodeId(n,i),o=s.connectorMap.get(r);if(1!=o.length)for(var a=parseInt(o.length/2),h=0;h<o.length;h++)h!=a&&(o[h].ignore?o[h].show():o[h].hide())}),this.bundleOffset=n.bundleOffset||this.bundleOffset,this.bundleGap=n.bundleGap||this.bundleGap;var g=this.connectorMap.get(f);if(1==g.length){var v=n.dockers;if(v&&v.length>=2){var y=a.loadArray(v);u.refresh(y)}else this.refreshConnector(g[0],!0)}else g.length>1&&this.refreshCons(g);var l=new c({});return l.set(h.ELEMENT_TYPE,h.CONNECTION),l.set(h.START_ID,t.model.get(h.ID)),l.set(h.END_ID,e.model.get(h.ID)),l.set(h.OPTIONS,i.clone(n)),l.set(h.DOCKERS,u.turningPoints),u.model=l,u},getTwoNodeId:function(t,e){return t.id+","+e.id},refreshCons:function(t){if(t[0].options.style.lineType==o.TYPE_JAGGED)for(var e=0;e<t.length;e++)this.refreshConnector(t[e],!0);else this.refreshConsStraight(t)},refreshConsStraight:function(t){var e=parseInt(t.length/2),n=[],i=t[0].startNode,r=t[0].endNode,o=s.getRect(i).boundingRect,a=s.getRect(r).boundingRect,h=s.getConnectorPoints(o),c=s.getConnectorPoints(a);t[0].sPos&&t[0].ePos||(o.x<a.x?(t[0].sPos="right",t[0].ePos="left"):(t[0].sPos="left",t[0].ePos="right"));for(var l=h[t[0].sPos],u=c[t[0].ePos],d=Math.atan2(u.y-l.y,u.x-l.x),f=e;f>=1;f--){var p=[];p.push(l);var g=l.clone();g.transform(s.translationMatrix(0,this.bundleGap*f)),g.x=g.x+this.bundleOffset*Math.cos(d),g.y=g.y+this.bundleOffset*Math.sin(d),p.push(g);var v=u.clone();v.transform(s.translationMatrix(0,this.bundleGap*f)),v.x=v.x-this.bundleOffset*Math.cos(d),v.y=v.y-this.bundleOffset*Math.sin(d),p.push(v),p.push(u),n.push(p)}n.push([l,u]);for(var y=Math.ceil(t.length/2),f=1;f<y;f++){var p=[];p.push(l);var g=l.clone();g.transform(s.translationMatrix(0,-this.bundleGap*f)),g.x=g.x+this.bundleOffset*Math.cos(d),g.y=g.y+this.bundleOffset*Math.sin(d),p.push(g);var v=u.clone();v.transform(s.translationMatrix(0,-this.bundleGap*f)),v.x=v.x-this.bundleOffset*Math.cos(d),v.y=v.y-this.bundleOffset*Math.sin(d),p.push(v),p.push(u),n.push(p)}for(var f=0;f<n.length;f++)t[f].refresh(n[f])},boundOffsetXY:function(t,e){var n=t.clone(),i=Math.atan2(n.y,n.x),r=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2));return e?r+=this.bundleOffset:r-=this.bundleOffset,n.x=r*Math.cos(i),n.y=r*Math.sin(i),n},setModel:function(t,e){var n=t.model.get("style.lineType");t.model.mergeOption(e),n!==e.style.lineType&&this.refreshConnector(t,!0)},refreshLineByNode:function(t){for(var e=this.connectorMap.keys(),n=0;n<e.length;n++){var i=e[n];if(i.indexOf(t.id)!=-1){var r=this.connectorMap.get(i);1==r.length?this.refreshConnector(r[0],!0):r.length>1&&this.refreshCons(r)}}}}),u=i.extend(r,l);t.exports=u},function(t,e,n){var i=(n(72),n(57)),r=(n(3),n(58)),o=n(73),s=n(80),a=n(4),h=30,c={CLOUD_RADIUS:12,CLOUD_LINEWIDTH:3,CLOUD_STROKE_STYLE:"rgba(255, 153, 0, 0.8)",stencilType:"SequenceFlow",connectors:[],selConnector:null,tempConnector:null,connectorForbidEdit:function(t){for(var e=0;e<this.connectors.length;e++)this.connectors[e].options.isEdit=!t},clearSelectCon:function(){null!=c.selConnector&&this.refreshConnector(this.selConnector)},deleteSelectCon:function(t,e){for(var n=[],i=0;i<this.connectors.length;i++)if(this.connectors[i].startNode==t||this.connectors[i].endNode==t){var r=this.connectors[i].startNode.model.get("outgoing");index=a.indexOf(r,this.connectors[i].resourceId),index!=-1&&r.splice(index,1),e.remove(this.connectors[i]),n.push(i),this.selConnector=null}for(var o=0;o<n.length;o++)this.connectors.splice(n[o],1)},deleteLine:function(t){var e=this.selConnector.startNode.model.get("outgoing");n=a.indexOf(e,this.selConnector.resourceId),n!=-1&&e.splice(n,1),t.remove(this.selConnector);var n=a.indexOf(this.connectors,this.selConnector);n!=-1&&this.connectors.splice(n,1),this.selConnector=null},refreshConnector:function(t,e){if(e||!t.turningPoints||t.turningPoints.length<2){var n=t.startNode,r=t.endNode,o=n.getRect?n.getRect().boundingRect:i.getRect(n).boundingRect,s=[o.x,o.y,o.x+o.width,o.y+o.height],a=n.getRect?r.getRect().boundingRect:i.getRect(r).boundingRect,h=[a.x,a.y,a.x+a.width,a.y+a.height],c=i.getConnectorPoints(o),l=i.getConnectorPoints(a);t.sPos&&t.ePos||(o.x<a.x?(t.sPos="right",t.ePos="left"):(t.sPos="left",t.ePos="right")),t.model&&t.model.get("style.lineType")&&(t.options.style.lineType=t.model.get("style.lineType"));var u=this.calcPointExpression(t.sPos,c),d=this.calcPointExpression(t.ePos,l),f=this.connector2Points(t.options.style.lineType,u,d,s,h);t.refresh(f[0][2])}t.clearHandles()},calcPointExpression:function(t,e){var n={top:e.top.x,left:e.left.y,right:e.right.y,bottom:e.bottom.x,center:e.center.x},o="<% print("+t+") %>",s=parseInt(i.template(o)(n));if(t.indexOf("top")!=-1)return new r(s,e.top.y);if(t.indexOf("left")!=-1)return new r(e.left.x,s);if(t.indexOf("right")!=-1)return new r(e.right.x,s);if(t.indexOf("bottom")!=-1)return new r(s,e.bottom.y);if(t.indexOf("center")!=-1)return new r(s,e.bottom.y);throw new Error("pos")},manageTempConnector:function(t,e,n){var r=t.getRect?t.getRect().boundingRect:i.getRect(t).boundingRect,s=[r.x,r.y,r.x+r.width,r.y+r.height],a=i.getConnectorPoints(r);c.tempConnector||(c.tempConnector=new o({isEdit:!1}));var h=c.tempConnector;r.x<e.x?(h.sPos="right",h.ePos="left"):(h.sPos="left",h.ePos="right"),h.options.style.lineType=n;var l=this.connector2Points(n,a[h.sPos],e,s,null);return h.refresh(l[0][2]),h},removeTempConnector:function(t){c.tempConnector&&(t.remove(c.tempConnector),c.tempConnector=null)},connector2Points:function(t,e,n,a,c){s.group("connectionManager: connector2Points"),s.info("ConnectionManager: connector2Points ("+t+", "+e+", "+n+", "+a+", "+c+")");var l=[];switch(t){case o.TYPE_STRAIGHT:var u=[e.clone(),n.clone()];l.push(["straight","straight",u]);break;case o.TYPE_ORGANIC:case o.TYPE_JAGGED:var d=null,f=null;if(null!=a){var p=[];p.push(new r(e.x,a[1]-h)),p.push(new r(a[2]+h,e.y)),p.push(new r(e.x,a[3]+h)),p.push(new r(a[0]-h,e.y)),d=p[0];for(var g=1;g<p.length;g++)i.distance(e,p[g])<i.distance(e,d)&&(d=p[g])}if(null!=c){var p=[];p.push(new r(n.x,c[1]-h)),p.push(new r(c[2]+h,n.y)),p.push(new r(n.x,c[3]+h)),p.push(new r(c[0]-h,n.y)),f=p[0];for(var g=1;g<p.length;g++)i.distance(n,p[g])<i.distance(n,f)&&(f=p[g])}var v=[e],y=0;d&&(v.push(d),y=1),f&&v.push(f),v.push(n);var m=r.cloneArray(v);l.push(["s0","s0",m]);var x=r.cloneArray(v),_=r.cloneArray(x);_.splice(y+1,0,new r(_[y].x,_[y+1].y)),l.push(["s1","s1_1",_]);var w=r.cloneArray(x);w.splice(y+1,0,new r(w[y+1].x,w[y].y)),l.push(["s1","s1_2",w]);var P=r.cloneArray(v),b=new r((P[y].x+P[y+1].x)/2,P[y].y),A=new r((P[y].x+P[y+1].x)/2,P[y+1].y);P.splice(y+1,0,b,A),l.push(["s2","s2_1",P]);var T=r.cloneArray(v),R=new r(T[y].x,(T[y].y+T[y+1].y)/2),M=new r(T[y+1].x,(T[y].y+T[y+1].y)/2);T.splice(y+1,0,R,M),l.push(["s2","s2_2",T]);var C=r.cloneArray(v),O=[C[y].x+20,C[y+1].x+20];a&&O.push(a[2]+20),c&&O.push(c[2]+20);var S=i.max(O),k=new r(S,C[y].y),E=new r(S,C[y+1].y);C.splice(y+1,0,k,E),l.push(["s2","s2_3",C]);var L=r.cloneArray(v),N=[L[y].y-20,L[y+1].y-20];a&&N.push(a[1]-20),c&&N.push(c[1]-20);var I=i.min(N),D=new r(L[y].x,I),B=new r(L[y+1].x,I);L.splice(y+1,0,D,B),l.push(["s2","s2_4",L]);var z=r.cloneArray(v),F=[z[y].x-20,z[y+1].x-20];a&&F.push(a[0]-20),c&&F.push(c[0]-20);var G=i.min(F),q=new r(G,z[y].y),H=new r(G,z[y+1].y);z.splice(y+1,0,q,H),l.push(["s2","s2_5",z]);var U=r.cloneArray(v),Y=[U[y].y+20,U[y+1].y+20];a&&Y.push(a[3]+20),c&&Y.push(c[3]+20);var W=i.max(Y),j=new r(U[y].x,W),V=new r(U[y+1].x,W);U.splice(y+1,0,j,V),l.push(["s2","s2_6",U]),s.info("Filter orthogonal solutions. Initial number of solutions = "+l.length);for(var Q=[],X=0;X<l.length;X++){var Z=l[X][2];i.orthogonalPath(Z)&&Q.push(l[X])}if(l=Q,s.info("\n\tOrthogonalSolutions = "+l.length),e.equals(n))s.info("Start and end point coincide...skip backward solution. I think we will just fall on s0 :)");else{s.info("Filter backward solutions. Initial number of solutions = "+l.length);for(var J=[],K="",X=0;X<l.length;X++){var Z=l[X][2];i.forwardPath(Z)?J.push(l[X]):K=K+"\n\t"+Z}l=J,s.info("\n\t ForwardSolutions = "+l.length),0==l.length&&s.info("Discarded solutions: "+K)}s.info("Filter non intersecting solutions. Initial number of solutions = "+l.length);for(var $=[],X=0;X<l.length;X++){var Z=l[X][2],tt=!1,et=Z.slice();(c||a)&&(et=et.slice(1,et.length-1)),a&&(tt=tt||i.polylineIntersectsRectangle(et,a)),c&&(tt=tt||i.polylineIntersectsRectangle(et,c)),tt||$.push(l[X])}0!=$.length&&(l=$),s.info("\n\t nonIntersectionSolutions = "+l.length),s.info("Get first class of solutions with same nr of points"),0==l.length&&s.info("This is not possible");for(var nt=l[0][2],it=nt.length,rt=[],X=0;X<l.length;X++){var Z=l[X][2];Z.length==it&&rt.push(l[X])}l=rt,s.info("pick the first solution with 90 degree angles (less turnarounds)");for(var ot=0,X=0;X<l.length;X++){var Z=l[X][2];i.scorePath(l[ot][2])<i.scorePath(l[X][2])&&(ot=X)}l=[l[ot]]}return s.groupEnd(),l}};t.exports=c},function(t,e){var n={LOG_LEVEL_NONE:0,LOG_LEVEL_DEBUG:1,LOG_LEVEL_INFO:2,LOG_LEVEL_ERROR:3,level:this.LOG_LEVEL_ERROR,debug:function(t){"undefined"!=typeof console&&this.level<=this.LOG_LEVEL_DEBUG&&"function"==typeof console.debug&&console.debug(t)},info:function(t){"undefined"!=typeof console&&this.level<=this.LOG_LEVEL_INFO&&console.info(t)},error:function(t){"undefined"!=typeof console&&this.level<=this.LOG_LEVEL_ERROR&&console.error(t)},group:function(t){this.level<=this.LOG_LEVEL_INFO&&"undefined"!=typeof console&&"function"==typeof console.group&&console.group(t)},groupEnd:function(){this.level<=this.LOG_LEVEL_INFO&&"undefined"!=typeof console&&"function"==typeof console.groupEnd&&console.groupEnd()}};n.level=n.LOG_LEVEL_ERROR,t.exports=n},function(t,e){t.exports={ELEMENT_TYPE:"elementType",MODE:"mode",BACKGROUND:"backgroud",OPTIONS:"options",ID:"id",START_ID:"startNodeId",END_ID:"endNodeId",ALARM:"Alarm",RELATIONID:"relationId",RELATION_IMAGE:"relationImage",GROUP:"Group",CONNECTION:"connection",CHILDS:"childs",TREE_ROOT:"treeRoot",DOCKERS:"options.dockers"}},function(t,e,n){function i(t,e,n){this.parentModel=e,this.option=t,this.init&&(arguments.length<=3?this.init(t,e,n):this.init.apply(this,arguments))}var r=n(4),o=n(83);i.prototype={constructor:i,init:function(t,e,n){r.merge(t,this.getDefaultOption())},getDefaultOption:function(){if(!this.hasOwnProperty("__defaultOption")){for(var t=[],e=this.constructor;e;){var n=e.prototype.defaultOption;n&&t.push(n),e=e.superClass}for(var i={},o=t.length-1;o>=0;o--)i=r.merge(i,t[o],!0);this.__defaultOption=i}return this.__defaultOption},mergeOption:function(t){r.merge(this.option,t,!0)},get:function(t,e){if(!t)return this.option;"string"==typeof t&&(t=t.split("."));for(var n=this.option,i=this.parentModel,r=0;r<t.length&&(n=n&&"object"==typeof n?n[t[r]]:null,null!=n);r++);return null==n&&i&&!e&&(n=i.get(t)),n},set:function(t,e){var n=this.option;if(t.indexOf(".")==-1)n[t]=e;else{for(var i,r=t.split("."),o=r.length,s=n,a=0;a<o-1;a++)i=r[a],null==s[i]&&(s[i]={}),s=s[i];i=r[o-1],s[i]=e}},getShallow:function(t,e){var n=this.option,i=n&&n[t],r=this.parentModel;return null==i&&r&&!e&&(i=r.getShallow(t)),i},getModel:function(t,e){var n=this.get(t,!0),r=this.parentModel,o=new i(n,e||r&&r.getModel(t));return o},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){var t=this.constructor;return new t(r.clone(this.option))}},o.enableClassExtend(i),t.exports=i},function(t,e,n){function i(t,e){var n=o.slice(arguments,2);return this.superClass.prototype[e].apply(t,n)}function r(t,e,n){return this.superClass.prototype[e].apply(t,n)}var o=n(4),s={},a=".",h="___FT__COMPONENT__CONTAINER___",c=s.parseClassType=function(t){var e={main:"",sub:""};return t&&(t=t.split(a),e.main=t[0]||"",e.sub=t[1]||""),e};s.enableClassExtend=function(t,e){t.extend=function(n){var s=function(){e&&e.apply(this,arguments),t.apply(this,arguments)};return o.extend(s.prototype,n),s.extend=this.extend,s.superCall=i,s.superApply=r,o.inherits(s,this),s.superClass=this,s}},s.enableClassManagement=function(t,e){function n(t){var e=i[t.main];return e&&e[h]||(e=i[t.main]={},e[h]=!0),e}e=e||{};var i={};if(t.registerClass=function(t,e){if(e)if(e=c(e),e.sub){if(e.sub!==h){var r=n(e);r[e.sub]=t}}else{if(i[e.main])return;i[e.main]=t}return t},t.getClass=function(t,e,n){var r=i[t];if(r&&r[h]&&(r=e?r[e]:null),n&&!r)throw new Error("Component "+t+"."+(e||"")+" not exists. Load it first.");return r},t.getClassesByMainType=function(t){t=c(t);var e=[],n=i[t.main];return n&&n[h]?o.each(n,function(t,n){n!==h&&e.push(t)}):e.push(n),e},t.hasClass=function(t){return t=c(t),!!i[t.main]},t.getAllClassMainTypes=function(){var t=[];return o.each(i,function(e,n){t.push(n)}),t},t.hasSubTypes=function(t){t=c(t);var e=i[t.main];return e&&e[h]},t.parseClassType=c,e.registerWhenExtend){var r=t.extend;r&&(t.extend=function(e){var n=r.call(this,e);return t.registerClass(n,e.type)})}return t},t.exports=s},function(t,e,n){var i=n(85),r=n(15),o=(n(25),n(57)),s=[];t.exports=function(t,e,n,a,h,c){var a=a||100,c=c||.1,h=h||30,l=_.map(t,function(t,e){var n=a/2;return t.w=n,t.rep=n,t.p=null,{w:n,rep:n,p:null}}),u=(_.map(e,function(t,e){return t.n1=t.startNode,t.n2=t.endNode,t.d=h,t.curveness=0,{n1:t.startNode,n2:t.endNode,d:h,curveness:0}}),i(t,e,{rect:n,gravity:c})),d=u.step;u.step=function(e){for(var n=0,i=t.length;n<i;n++)l[n].fixed&&r.copy(l[n].p,l[n].position);d(function(t,n,i){for(var r=0,a=t.length;r<a;r++)t[r].fixed||t[r].attr("position",t[r].p),s[r]=t[r].p;for(var r=0,a=n.length;r<a;r++){var h=n[r],c=h.n1.p,l=h.n2.p,u=[c,l];h.curveness>0&&u.push([(c[0]+l[0])/2-(c[1]-l[1])*h.curveness,(c[1]+l[1])/2-(l[0]-c[0])*h.curveness]);var d=o.traslatePoints(u,!0);h.refresh(d)}e&&e(i)})},u.step()}},function(t,e,n){var i=n(15),r=i.scaleAndAdd;t.exports=function(t,e,n){for(var o=n.rect,s=o.width,a=o.height,h=[o.x+s/2,o.y+a/2],c=null==n.gravity?.1:n.gravity,l=0;l<t.length;l++){var u=t[l];u.p||(u.p=i.create(s*(Math.random()-.5)+h[0],a*(Math.random()-.5)+h[1])),u.pp=i.clone(u.p),u.edges=null}var d=.6;return{warmUp:function(){d=.5},setFixed:function(e){t[e].fixed=!0},setUnfixed:function(e){t[e].fixed=!1},step:function(n){for(var o=[],s=t.length,a=0;a<e.length;a++){var l=e[a],u=l.n1,f=l.n2;i.sub(o,f.p,u.p);var p=i.len(o)-l.d,g=f.w/(u.w+f.w);i.normalize(o,o),!u.fixed&&r(u.p,u.p,o,g*p*d),!f.fixed&&r(f.p,f.p,o,-(1-g)*p*d)}for(var a=0;a<s;a++){var v=t[a];v.fixed||(i.sub(o,h,v.p),i.scaleAndAdd(v.p,v.p,o,c*d))}for(var a=0;a<s;a++)for(var u=t[a],y=a+1;y<s;y++){var f=t[y];i.sub(o,f.p,u.p);var p=i.len(o);0===p&&(i.set(o,Math.random()-.5,Math.random()-.5),p=1);var m=(u.rep+f.rep)/p/p;!u.fixed&&r(u.pp,u.pp,o,m),!f.fixed&&r(f.pp,f.pp,o,-m)}for(var x=[],a=0;a<s;a++){var v=t[a];v.fixed||(i.sub(x,v.p,v.pp),i.scaleAndAdd(v.p,v.p,x,d),i.copy(v.pp,v.p))}d=.992*d,n&&n(t,e,d<.01)}}}},function(t,e,n){var i=n(3),r=n(78);t.exports=function(t){function e(t){for(var n=[],o=0;o<r.connectors.length;o++)r.connectors[o].startNode==t&&n.push(r.connectors[o].endNode);if(n.length>0){for(var s=t.layout.width,a=0;a<n.length;a++){var h,c;t instanceof i.Circle?n[a]instanceof i.Circle?(h=t.position[0]-s*(n.length-1)/2+s*a,c=t.position[1]+t.layout.height):(h=t.position[0]-s*(n.length-1)/2+s*a-n[a].shape.width/2,c=t.position[1]+t.layout.height-n[a].shape.height/2):n[a]instanceof i.Circle?(h=t.position[0]+t.shape.width/2-s*(n.length-1)/2+s*a,c=t.position[1]+t.shape.height/2+t.layout.height):(h=t.position[0]+t.shape.width/2-s*(n.length-1)/2+s*a-n[a].shape.width/2,c=t.position[1]+t.shape.height/2+t.layout.height-n[a].shape.height/2),n[a].attr("position",[h,c])}r.refreshLineByNode(t)}for(var l=0;l<n.length;l++)e(n[l])}e(t)}},function(t,e,n){function i(t,e){var n=[];return e.eachChild(function(t){if(t.model){if(t instanceof l){var e=[];t.eachChild(function(t){t.model&&e.push(t.model.option)}),t.model.set(h.CHILDS,e)}t instanceof u&&t.refreshModel(),n.push(t.model.option)}}),t.set(h.CHILDS,n),t.option}function r(t,e,n,i,s){for(var a=[],c=0;c<n.length;c++){var l=n[c];if(l.elementType===h.CONNECTION)a.push(l);else if(l.elementType===h.ALARM){var u=o(t.group,l.relationId);t.creatAlarm(u,l.options)}else if(l.elementType===h.GROUP){l.options.id=l.id;var e=t.creatNode(l.elementType,l.options);r(t,e,l.childs,!0,s),t.add(e)}else{l.options.id=l.id;var d=t.creatNode(l.elementType,l.options);if(i?e.add(d):t.add(d),l.options.layout&&l.options.layout.layout===h.TREE_ROOT){var d=o(e,l.id);s.push(d)}}}for(var c=0,f=a.length;c<f;c++){var p=a[c],g=o(e,p.startNodeId),v=o(e,p.endNodeId);if(g&&v){var y=t.creatLink(g,v,p.options);i?e.add(y):t.add(y)}}}function o(t,e){var n=null;return t.eachChild(function(t){t.model&&t.model.get(h.ID)===e&&(n=t)}),n}function s(t,e){e=e||{},e.pixelRatio=e.pixelRatio||1,e.backgroundColor=e.backgroundColor||"#FFFFFF";var n=t.storage.getDisplayList();return c.each(n,function(t){t.stopAnimation(!0)}),t.painter.getRenderedCanvas(e)}function a(t,e){e=e||{};var n=s(t,e).toDataURL("image/"+(e&&e.type||"png"));return n}var h=(n(82),n(81)),c=n(4),l=n(71),u=n(73);t.exports={toJson:i,fromJson:r,toDataURL:a}},function(t,e,n){var i=(n(72),n(57),n(3)),r=(n(58),n(4),n(79)),o={LineOperations:[],isEdit:!0,creatOperation:function(t,e){var n=new i.Image({style:{image:e.icon,width:e.width||15,height:e.height||15}});return n.key=t,n.operation=!0,n.hide(),e.lineNode.icons.push(n),o.LineOperations.push(n),n.on("click",function(){e.callback(e.lineNode)}),n},bindOperation:function(t){if(0!=o.isEdit){for(var e=t.middle(),n=[],i=0;i<t.icons.length;i++)n.push(t.icons[i].style.width);for(var r=0;r<t.icons.length;r++){for(var s=10,a=0;a<r;a++)s+=n[a]+10;t.icons[r].attr("position",[e[0]+s,e[1]+5]),t.icons[r].show()}}},hideAllLineOperation:function(){for(var t=0;t<o.LineOperations.length;t++){var e=o.LineOperations[t];e.hide()}},addIcon:function(t,e,n){if(e.lineNode.icons)for(var i=0;i<e.lineNode.icons.length;i++)if(e.lineNode.icons[i].key==t)return void o.bindOperation(e.lineNode);var r=o.creatOperation(t,e);n.add(r),o.bindOperation(e.lineNode)},deleteIconObj:function(t,e){return{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAOBAMAAADpk+DfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAtUExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMGgKD4AAAAPdFJOUwDH/g+agESj4Y6zUiRnh7lnwbkAAABLSURBVAjXY2BgYDZgAIEnnkCa7a5cYGwCwwklIOhhMBEEgmIGnlAgOMDAprhQUGgDA5vWdJciXJRGR0dTAgPzQ0FBSaBpzMbGBgwAIoUW3sQ2EdkAAAAASUVORK5CYII=",width:12,height:14,lineNode:e,callback:function(n){for(var i=0;i<e.icons.length;i++)t.remove(e.icons[i]);r.deleteLine(t),o.hideAllLineOperation(),n.cancelBubble=!0}}}};t.exports=o}])});
//# sourceMappingURL=fish-topo-flow.min.js.map
